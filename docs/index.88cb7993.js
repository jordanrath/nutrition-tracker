function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};const i=(t=0,e=0,i=0)=>4*t+4*e+9*i;var n={},s={};Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=document.body.appendChild(document.createElement("div")),this.view.classList.add("snackbar"),this.isActive=!1,this.queue=[],this.gap=250,this.duration=5e3}return o(t,[{key:"show",value:function(t){var e=this;this.isActive?this.queue.push(t):(this.isActive=!0,this.view.textContent=t,this.view.classList.add("snackbar--visible"),this.queue.shift(),setTimeout((function(){return e.hide()}),this.duration))}},{key:"hide",value:function(){var t=this;this.isActive=!1,this.view.classList.remove("snackbar--visible"),this.queue.length&&setTimeout((function(){return t.show(t.queue[0])}),this.gap)}}]),t}();s.default=r;var a,h=(a=s)&&a.__esModule?a:{default:a};var l=void 0;l||(l=new h.default),n=l;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var c,u,d,f=c={};function p(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}function m(t){if(u===setTimeout)return setTimeout(t,0);if((u===p||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}!function(){try{u="function"==typeof setTimeout?setTimeout:p}catch(t){u=p}try{d="function"==typeof clearTimeout?clearTimeout:g}catch(t){d=g}}();var b,y=[],v=!1,x=-1;function _(){v&&b&&(v=!1,b.length?y=b.concat(y):x=-1,y.length&&w())}function w(){if(!v){var t=m(_);v=!0;for(var e=y.length;e;){for(b=y,y=[];++x<e;)b&&b[x].run();x=-1,e=y.length}b=null,v=!1,function(t){if(d===clearTimeout)return clearTimeout(t);if((d===g||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}(t)}}function k(t,e){this.fun=t,this.array=e}function S(){}f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];y.push(new k(t,e)),1!==y.length||v||m(w)},k.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=S,f.addListener=S,f.once=S,f.off=S,f.removeListener=S,f.removeAllListeners=S,f.emit=S,f.prependListener=S,f.prependOnceListener=S,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0};const M=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=63&s|128):55296==(64512&s)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++n)),e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=63&s|128):(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=63&s|128)}return e},E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let e=0;e<t.length;e+=3){const s=t[e],o=e+1<t.length,r=o?t[e+1]:0,a=e+2<t.length,h=a?t[e+2]:0,l=s>>2,c=(3&s)<<4|r>>4;let u=(15&r)<<2|h>>6,d=63&h;a||(d=64,o||(u=64)),n.push(i[l],i[c],i[u],i[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(M(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let i=0,n=0;for(;i<t.length;){const s=t[i++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[i++];e[n++]=String.fromCharCode((31&s)<<6|63&o)}else if(s>239&&s<365){const o=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(1023&o))}else{const o=t[i++],r=t[i++];e[n++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&r)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let e=0;e<t.length;){const s=i[t.charAt(e++)],o=e<t.length?i[t.charAt(e)]:0;++e;const r=e<t.length?i[t.charAt(e)]:64;++e;const a=e<t.length?i[t.charAt(e)]:64;if(++e,null==s||null==o||null==r||null==a)throw Error();const h=s<<2|o>>4;if(n.push(h),64!==r){const t=o<<4&240|r>>2;if(n.push(t),64!==a){const t=r<<6&192|a;n.push(t)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},T=function(t){return function(t){const e=M(t);return E.encodeByteArray(e,!0)}(t).replace(/\./g,"")},C=function(t){try{return E.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function D(){return"object"==typeof indexedDB}function A(){return new Promise(((t,e)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function P(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const O=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,L=()=>{try{return O()||(()=>{if(void 0===c||void 0===c.env)return})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&C(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},R=t=>{const e=(t=>{var e,i;return null===(i=null===(e=L())||void 0===e?void 0:e.emulatorHosts)||void 0===i?void 0:i[t]})(t);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(i+1),10);return"["===e[0]?[e.substring(1,i-1),n]:[e.substring(0,i),n]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,i))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",n=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[T(JSON.stringify({alg:"none",type:"JWT"})),T(JSON.stringify(o)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z.prototype.create)}}class z{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},n=`${this.service}/${t}`,s=this.errors[t],o=s?function(t,e){return t.replace(B,((t,i)=>{const n=e[i];return null!=n?String(n):`<${i}?>`}))}(s,i):"Error",r=`${this.serviceName}: ${o} (${n}).`;return new j(n,r,i)}}const B=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t,e){if(t===e)return!0;const i=Object.keys(t),n=Object.keys(e);for(const s of i){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(H(i)&&H(o)){if(!V(i,o))return!1}else if(i!==o)return!1}for(const t of n)if(!i.includes(t))return!1;return!0}function H(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t,e=1e3,i=2){const n=e*Math.pow(i,t),s=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function W(t){return t&&t._delegate?t._delegate:t}class ${constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new N;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&t.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),n=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(n)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:Y})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});e.resolve(t)}catch(t){}}}}clearInstance(t=Y){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=Y){return this.instances.has(t)}getOptions(t=Y){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[t,e]of this.instancesDeferred.entries()){i===this.normalizeInstanceIdentifier(t)&&e.resolve(n)}return n}onInit(t,e){var i;const n=this.normalizeInstanceIdentifier(e),s=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;s.add(t),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&t(o,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const n of i)try{n(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=t,n===Y?void 0:n),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(t){}var n;return i||null}normalizeInstanceIdentifier(t=Y){return this.component?this.component.multipleInstances?t:Y:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class X{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new q(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=[];var G,J;(J=G||(G={}))[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT";const Q={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},Z=G.INFO,tt={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},et=(t,e,...i)=>{if(e<t.logLevel)return;const n=(new Date).toISOString(),s=tt[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${n}]  ${t.name}:`,...i)};class it{constructor(t){this.name=t,this._logLevel=Z,this._logHandler=et,this._userLogHandler=null,K.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in G))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Q[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...t),this._logHandler(this,G.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...t),this._logHandler(this,G.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,G.INFO,...t),this._logHandler(this,G.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,G.WARN,...t),this._logHandler(this,G.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...t),this._logHandler(this,G.ERROR,...t)}}let nt,st;const ot=new WeakMap,rt=new WeakMap,at=new WeakMap,ht=new WeakMap,lt=new WeakMap;let ct={get(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return rt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||at.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ft(t[e])},set:(t,e,i)=>(t[e]=i,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ut(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(pt(this),e),ft(ot.get(this))}:function(...e){return ft(t.apply(pt(this),e))}:function(e,...i){const n=t.call(pt(this),e,...i);return at.set(n,e.sort?e.sort():[e]),ft(n)}}function dt(t){return"function"==typeof t?ut(t):(t instanceof IDBTransaction&&function(t){if(rt.has(t))return;const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{e(),n()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)}));rt.set(t,e)}(t),e=t,(nt||(nt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,ct):t);var e}function ft(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{e(ft(t.result)),n()},o=()=>{i(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&ot.set(e,t)})).catch((()=>{})),lt.set(e,t),e}(t);if(ht.has(t))return ht.get(t);const e=dt(t);return e!==t&&(ht.set(t,e),lt.set(e,t)),e}const pt=t=>lt.get(t);function gt(t,e,{blocked:i,upgrade:n,blocking:s,terminated:o}={}){const r=indexedDB.open(t,e),a=ft(r);return n&&r.addEventListener("upgradeneeded",(t=>{n(ft(r.result),t.oldVersion,t.newVersion,ft(r.transaction))})),i&&r.addEventListener("blocked",(()=>i())),a.then((t=>{o&&t.addEventListener("close",(()=>o())),s&&t.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),a}const mt=["get","getKey","getAll","getAllKeys","count"],bt=["put","add","delete","clear"],yt=new Map;function vt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(yt.get(e))return yt.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,s=bt.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!mt.includes(i))return;const o=async function(t,...e){const o=this.transaction(t,s?"readwrite":"readonly");let r=o.store;return n&&(r=r.index(e.shift())),(await Promise.all([r[i](...e),s&&o.done]))[0]};return yt.set(e,o),o}ct=(t=>({...t,get:(e,i,n)=>vt(e,i)||t.get(e,i,n),has:(e,i)=>!!vt(e,i)||t.has(e,i)}))(ct);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const _t="@firebase/app",wt="0.8.3",kt=new it("@firebase/app"),St="[DEFAULT]",Mt={[_t]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Et=new Map,Tt=new Map;function Ct(t,e){try{t.container.addComponent(e)}catch(i){kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function It(t){const e=t.name;if(Tt.has(e))return kt.debug(`There were multiple attempts to register component ${e}.`),!1;Tt.set(e,t);for(const e of Et.values())Ct(e,t);return!0}function Dt(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const At=new z("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pt{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw At.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e={}){let i=t;if("object"!=typeof e){e={name:e}}const n=Object.assign({name:St,automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw At.create("bad-app-name",{appName:String(s)});var o;if(i||(i=null===(o=L())||void 0===o?void 0:o.config),!i)throw At.create("no-options");const r=Et.get(s);if(r){if(V(i,r.options)&&V(n,r.config))return r;throw At.create("duplicate-app",{appName:s})}const a=new X(s);for(const t of Tt.values())a.addComponent(t);const h=new Pt(i,n,a);return Et.set(s,h),h}function Lt(t=St){const e=Et.get(t);if(!e&&t===St)return Ot();if(!e)throw At.create("no-app",{appName:t});return e}function Rt(t,e,i){var n;let s=null!==(n=Mt[t])&&void 0!==n?n:t;i&&(s+=`-${i}`);const o=s.match(/\s|\//),r=e.match(/\s|\//);if(o||r){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&r&&t.push("and"),r&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void kt.warn(t.join(" "))}It(new $(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Nt="firebase-heartbeat-store";let Ft=null;function jt(){return Ft||(Ft=gt("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(Nt)}}).catch((t=>{throw At.create("idb-open",{originalErrorMessage:t.message})}))),Ft}async function zt(t,e){var i;try{const i=(await jt()).transaction(Nt,"readwrite"),n=i.objectStore(Nt);return await n.put(e,Bt(t)),i.done}catch(t){if(t instanceof j)kt.warn(t.message);else{const e=At.create("idb-set",{originalErrorMessage:null===(i=t)||void 0===i?void 0:i.message});kt.warn(e.message)}}}function Bt(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Ut(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=Ht();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ht(),{heartbeatsToSend:e,unsentEntries:i}=function(t,e=1024){const i=[];let n=t.slice();for(const s of t){const t=i.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),Wt(i)>e){t.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),Wt(i)>e){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=T(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function Ht(){return(new Date).toISOString().substring(0,10)}class Ut{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!D()&&A().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(t){var e;try{return(await jt()).transaction(Nt).objectStore(Nt).get(Bt(t))}catch(t){if(t instanceof j)kt.warn(t.message);else{const i=At.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});kt.warn(i.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return zt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return zt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}}}function Wt(t){return T(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;$t="",It(new $("platform-logger",(t=>new xt(t)),"PRIVATE")),It(new $("heartbeat",(t=>new Vt(t)),"PRIVATE")),Rt(_t,wt,$t),Rt(_t,wt,"esm2017"),Rt("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Rt("firebase","9.13.0","app");var Yt,qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},Xt={},Kt=Kt||{},Gt=qt||self;function Jt(){}function Qt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Zt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var te="closure_uid_"+(1e9*Math.random()>>>0),ee=0;function ie(t,e,i){return t.call.apply(t.bind,arguments)}function ne(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function se(t,e,i){return(se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ie:ne).apply(null,arguments)}function oe(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function re(t,e){function i(){}i.prototype=e.prototype,t.X=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.Wb=function(t,i,n){for(var s=Array(arguments.length-2),o=2;o<arguments.length;o++)s[o-2]=arguments[o];return e.prototype[i].apply(t,s)}}function ae(){this.s=this.s,this.o=this.o}ae.prototype.s=!1,ae.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,te)&&t[te]||(t[te]=++ee))},ae.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const he=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1};function le(t){const e=t.length;if(0<e){const i=Array(e);for(let n=0;n<e;n++)i[n]=t[n];return i}return[]}function ce(t,e){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(Qt(i)){const e=t.length||0,n=i.length||0;t.length=e+n;for(let s=0;s<n;s++)t[e+s]=i[s]}else t.push(i)}}function ue(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gt.addEventListener("test",Jt,e),Gt.removeEventListener("test",Jt,e)}catch(t){}return t}();function fe(t){return/^[\s\xa0]*$/.test(t)}var pe=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ge(t,e){return t<e?-1:t>e?1:0}function me(){var t=Gt.navigator;return t&&(t=t.userAgent)?t:""}function be(t){return-1!=me().indexOf(t)}function ye(t){return ye[" "](t),t}ye[" "]=Jt;var ve,xe,_e=be("Opera"),we=be("Trident")||be("MSIE"),ke=be("Edge"),Se=ke||we,Me=be("Gecko")&&!(-1!=me().toLowerCase().indexOf("webkit")&&!be("Edge"))&&!(be("Trident")||be("MSIE"))&&!be("Edge"),Ee=-1!=me().toLowerCase().indexOf("webkit")&&!be("Edge");function Te(){var t=Gt.document;return t?t.documentMode:void 0}t:{var Ce="",Ie=(xe=me(),Me?/rv:([^\);]+)(\)|;)/.exec(xe):ke?/Edge\/([\d\.]+)/.exec(xe):we?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(xe):Ee?/WebKit\/(\S+)/.exec(xe):_e?/(?:Version)[ \/]?(\S+)/.exec(xe):void 0);if(Ie&&(Ce=Ie?Ie[1]:""),we){var De=Te();if(null!=De&&De>parseFloat(Ce)){ve=String(De);break t}}ve=Ce}var Ae,Pe={};function Oe(){return function(t){var e=Pe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){let t=0;const e=pe(String(ve)).split("."),i=pe("9").split("."),n=Math.max(e.length,i.length);for(let r=0;0==t&&r<n;r++){var s=e[r]||"",o=i[r]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=ge(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||ge(0==s[2].length,0==o[2].length)||ge(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}))}if(Gt.document&&we){var Le=Te();Ae=Le||(parseInt(ve,10)||void 0)}else Ae=void 0;var Re=Ae;function Ne(t,e){if(ue.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Me){t:{try{ye(e.nodeName);var s=!0;break t}catch(t){}s=!1}s||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Fe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ne.X.h.call(this)}}re(Ne,ue);var Fe={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Be(t,e,i,n,s){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!n,this.ha=s,this.key=++ze,this.ba=this.ea=!1}function Ve(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function He(t,e,i){for(const n in t)e.call(i,t[n],n,t)}function Ue(t){const e={};for(const i in t)e[i]=t[i];return e}const We="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $e(t,e){let i,n;for(let e=1;e<arguments.length;e++){for(i in n=arguments[e],n)t[i]=n[i];for(let e=0;e<We.length;e++)i=We[e],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}function Ye(t){this.src=t,this.g={},this.h=0}function qe(t,e){var i=e.type;if(i in t.g){var n,s=t.g[i],o=he(s,e);(n=0<=o)&&Array.prototype.splice.call(s,o,1),n&&(Ve(e),0==t.g[i].length&&(delete t.g[i],t.h--))}}function Xe(t,e,i,n){for(var s=0;s<t.length;++s){var o=t[s];if(!o.ba&&o.listener==e&&o.capture==!!i&&o.ha==n)return s}return-1}Ye.prototype.add=function(t,e,i,n,s){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var r=Xe(t,e,n,s);return-1<r?(e=t[r],i||(e.ea=!1)):((e=new Be(e,this.src,o,!!n,s)).ea=i,t.push(e)),e};var Ke="closure_lm_"+(1e6*Math.random()|0),Ge={};function Je(t,e,i,n,s){if(n&&n.once)return Ze(t,e,i,n,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Je(t,e[o],i,n,s);return null}return i=ri(i),t&&t[je]?t.N(e,i,Zt(n)?!!n.capture:!!n,s):Qe(t,e,i,!1,n,s)}function Qe(t,e,i,n,s,o){if(!e)throw Error("Invalid event type");var r=Zt(s)?!!s.capture:!!s,a=si(t);if(a||(t[Ke]=a=new Ye(t)),(i=a.add(e,i,n,r,o)).proxy)return i;if(n=function(){function t(i){return e.call(t.src,t.listener,i)}const e=ni;return t}(),i.proxy=n,n.src=t,n.listener=i,t.addEventListener)de||(s=r),void 0===s&&(s=!1),t.addEventListener(e.toString(),n,s);else if(t.attachEvent)t.attachEvent(ii(e.toString()),n);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(n)}return i}function Ze(t,e,i,n,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ze(t,e[o],i,n,s);return null}return i=ri(i),t&&t[je]?t.O(e,i,Zt(n)?!!n.capture:!!n,s):Qe(t,e,i,!0,n,s)}function ti(t,e,i,n,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)ti(t,e[o],i,n,s);else n=Zt(n)?!!n.capture:!!n,i=ri(i),t&&t[je]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(i=Xe(o=t.g[e],i,n,s))&&(Ve(o[i]),Array.prototype.splice.call(o,i,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=si(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Xe(e,i,n,s)),(i=-1<t?e[t]:null)&&ei(i))}function ei(t){if("number"!=typeof t&&t&&!t.ba){var e=t.src;if(e&&e[je])qe(e.i,t);else{var i=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(i,n,t.capture):e.detachEvent?e.detachEvent(ii(i),n):e.addListener&&e.removeListener&&e.removeListener(n),(i=si(e))?(qe(i,t),0==i.h&&(i.src=null,e[Ke]=null)):Ve(t)}}}function ii(t){return t in Ge?Ge[t]:Ge[t]="on"+t}function ni(t,e){if(t.ba)t=!0;else{e=new Ne(e,this);var i=t.listener,n=t.ha||t.src;t.ea&&ei(t),t=i.call(n,e)}return t}function si(t){return(t=t[Ke])instanceof Ye?t:null}var oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ri(t){return"function"==typeof t?t:(t[oi]||(t[oi]=function(e){return t.handleEvent(e)}),t[oi])}function ai(){ae.call(this),this.i=new Ye(this),this.P=this,this.I=null}function hi(t,e){var i,n=t.I;if(n)for(i=[];n;n=n.I)i.push(n);if(t=t.P,n=e.type||e,"string"==typeof e)e=new ue(e,t);else if(e instanceof ue)e.target=e.target||t;else{var s=e;$e(e=new ue(n,t),s)}if(s=!0,i)for(var o=i.length-1;0<=o;o--){var r=e.g=i[o];s=li(r,n,!0,e)&&s}if(s=li(r=e.g=t,n,!0,e)&&s,s=li(r,n,!1,e)&&s,i)for(o=0;o<i.length;o++)s=li(r=e.g=i[o],n,!1,e)&&s}function li(t,e,i,n){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,o=0;o<e.length;++o){var r=e[o];if(r&&!r.ba&&r.capture==i){var a=r.listener,h=r.ha||r.src;r.ea&&qe(t.i,r),s=!1!==a.call(h,n)&&s}}return s&&!n.defaultPrevented}re(ai,ae),ai.prototype[je]=!0,ai.prototype.removeEventListener=function(t,e,i,n){ti(this,t,e,i,n)},ai.prototype.M=function(){if(ai.X.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var i=e.g[t],n=0;n<i.length;n++)Ve(i[n]);delete e.g[t],e.h--}}this.I=null},ai.prototype.N=function(t,e,i,n){return this.i.add(String(t),e,!1,i,n)},ai.prototype.O=function(t,e,i,n){return this.i.add(String(t),e,!0,i,n)};var ci=Gt.JSON.stringify;function ui(){var t=yi;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var di,fi=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new pi),(t=>t.reset()));class pi{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function gi(t){Gt.setTimeout((()=>{throw t}),0)}function mi(t,e){di||function(){var t=Gt.Promise.resolve(void 0);di=function(){t.then(vi)}}(),bi||(di(),bi=!0),yi.add(t,e)}var bi=!1,yi=new class{constructor(){this.h=this.g=null}add(t,e){const i=fi.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function vi(){for(var t;t=ui();){try{t.h.call(t.g)}catch(t){gi(t)}var e=fi;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}bi=!1}function xi(t,e){ai.call(this),this.h=t||1,this.g=e||Gt,this.j=se(this.lb,this),this.l=Date.now()}function _i(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function wi(t,e,i){if("function"==typeof t)i&&(t=se(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=se(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gt.setTimeout(t,e||0)}function ki(t){t.g=wi((()=>{t.g=null,t.i&&(t.i=!1,ki(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}re(xi,ai),(Yt=xi.prototype).ca=!1,Yt.R=null,Yt.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),hi(this,"tick"),this.ca&&(_i(this),this.start()))}},Yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Yt.M=function(){xi.X.M.call(this),_i(this),delete this.g};class Si extends ae{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ki(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(t){ae.call(this),this.h=t,this.g={}}re(Mi,ae);var Ei=[];function Ti(t,e,i,n){Array.isArray(i)||(i&&(Ei[0]=i.toString()),i=Ei);for(var s=0;s<i.length;s++){var o=Je(e,i[s],n||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Ci(t){He(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ei(t)}),t),t.g={}}function Ii(){this.g=!0}function Di(t,e,i,n){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var n=i[t];if(!(2>n.length)){var s=n[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var r=1;r<s.length;r++)s[r]=""}}}return ci(i)}catch(t){return e}}(t,i)+(n?" "+n:"")}))}Mi.prototype.M=function(){Mi.X.M.call(this),Ci(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ii.prototype.Aa=function(){this.g=!1},Ii.prototype.info=function(){};var Ai={},Pi=null;function Oi(){return Pi=Pi||new ai}function Li(t){ue.call(this,Ai.Pa,t)}function Ri(t){const e=Oi();hi(e,new Li(e))}function Ni(t,e){ue.call(this,Ai.STAT_EVENT,t),this.stat=e}function Fi(t){const e=Oi();hi(e,new Ni(e,t))}function ji(t,e){ue.call(this,Ai.Qa,t),this.size=e}function zi(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Gt.setTimeout((function(){t()}),e)}Ai.Pa="serverreachability",re(Li,ue),Ai.STAT_EVENT="statevent",re(Ni,ue),Ai.Qa="timingevent",re(ji,ue);var Bi={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Vi={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Hi(){}function Ui(t){return t.h||(t.h=t.i())}function Wi(){}Hi.prototype.h=null;var $i,Yi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function qi(){ue.call(this,"d")}function Xi(){ue.call(this,"c")}function Ki(){}function Gi(t,e,i,n){this.l=t,this.j=e,this.m=i,this.U=n||1,this.S=new Mi(this),this.O=Qi,t=Se?125:void 0,this.T=new xi(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ji}function Ji(){this.i=null,this.g="",this.h=!1}re(qi,ue),re(Xi,ue),re(Ki,Hi),Ki.prototype.g=function(){return new XMLHttpRequest},Ki.prototype.i=function(){return{}},$i=new Ki;var Qi=45e3,Zi={},tn={};function en(t,e,i){t.K=1,t.v=_n(mn(e)),t.s=i,t.P=!0,nn(t,null)}function nn(t,e){t.F=Date.now(),an(t),t.A=mn(t.v);var i=t.A,n=t.U;Array.isArray(n)||(n=[String(n)]),Ln(i.i,"t",n),t.C=0,i=t.l.H,t.h=new Ji,t.g=Os(t.l,i?e:null,!t.s),0<t.N&&(t.L=new Si(se(t.La,t,t.g),t.N)),Ti(t.S,t.g,"readystatechange",t.ib),e=t.H?Ue(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ri(),function(t,e,i,n,s,o){t.info((function(){if(t.g)if(o)for(var r="",a=o.split("&"),h=0;h<a.length;h++){var l=a[h].split("=");if(1<l.length){var c=l[0];l=l[1];var u=c.split("_");r=2<=u.length&&"type"==u[1]?r+(c+"=")+l+"&":r+(c+"=redacted&")}}else r=null;else r=o;return"XMLHTTP REQ ("+n+") [attempt "+s+"]: "+e+"\n"+i+"\n"+r}))}(t.j,t.u,t.A,t.m,t.U,t.s)}function sn(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Da)}function on(t,e,i){let n,s=!0;for(;!t.I&&t.C<i.length;){if(n=rn(t,i),n==tn){4==e&&(t.o=4,Fi(14),s=!1),Di(t.j,t.m,null,"[Incomplete Response]");break}if(n==Zi){t.o=4,Fi(15),Di(t.j,t.m,i,"[Invalid Chunk]"),s=!1;break}Di(t.j,t.m,n,null),dn(t,n)}sn(t)&&n!=tn&&n!=Zi&&(t.h.g="",t.C=0),4!=e||0!=i.length||t.h.h||(t.o=1,Fi(16),s=!1),t.i=t.i&&s,s?0<i.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),Ms(e),e.K=!0,Fi(11))):(Di(t.j,t.m,i,"[Invalid Chunked Response]"),un(t),cn(t))}function rn(t,e){var i=t.C,n=e.indexOf("\n",i);return-1==n?tn:(i=Number(e.substring(i,n)),isNaN(i)?Zi:(n+=1)+i>e.length?tn:(e=e.substr(n,i),t.C=n+i,e))}function an(t){t.V=Date.now()+t.O,hn(t,t.O)}function hn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=zi(se(t.gb,t),e)}function ln(t){t.B&&(Gt.clearTimeout(t.B),t.B=null)}function cn(t){0==t.l.G||t.I||Cs(t.l,t)}function un(t){ln(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,_i(t.T),Ci(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function dn(t,e){try{var i=t.l;if(0!=i.G&&(i.g==t||Bn(i.h,t)))if(!t.J&&Bn(i.h,t)&&3==i.G){try{var n=i.Fa.g.parse(e)}catch(t){n=null}if(Array.isArray(n)&&3==n.length){var s=n;if(0==s[0]){t:if(!i.u){if(i.g){if(!(i.g.F+3e3<t.F))break t;Ts(i),bs(i)}Ss(i),Fi(18)}}else i.Ba=s[1],0<i.Ba-i.T&&37500>s[2]&&i.L&&0==i.A&&!i.v&&(i.v=zi(se(i.cb,i),6e3));if(1>=zn(i.h)&&i.ja){try{i.ja()}catch(t){}i.ja=void 0}}else Ds(i,11)}else if((t.J||i.g==t)&&Ts(i),!fe(e))for(s=i.Fa.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(i.T=l[0],l=l[1],2==i.G)if("c"==l[0]){i.I=l[1],i.ka=l[2];const e=l[3];null!=e&&(i.ma=e,i.j.info("VER="+i.ma));const s=l[4];null!=s&&(i.Ca=s,i.j.info("SVER="+i.Ca));const c=l[5];null!=c&&"number"==typeof c&&0<c&&(n=1.5*c,i.J=n,i.j.info("backChannelRequestTimeoutMs_="+n)),n=i;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var o=n.h;o.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Vn(o,o.h),o.h=null))}if(n.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(n.za=t,xn(n.F,n.D,t))}}i.G=3,i.l&&i.l.xa(),i.$&&(i.P=Date.now()-t.F,i.j.info("Handshake RTT: "+i.P+"ms"));var r=t;if((n=i).sa=Ps(n,n.H?n.ka:null,n.V),r.J){Hn(n.h,r);var a=r,h=n.J;h&&a.setTimeout(h),a.B&&(ln(a),an(a)),n.g=r}else ks(n);0<i.i.length&&vs(i)}else"stop"!=l[0]&&"close"!=l[0]||Ds(i,7);else 3==i.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ds(i,7):ms(i):"noop"!=l[0]&&i.l&&i.l.wa(l),i.A=0)}Ri()}catch(t){}}function fn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var i=function(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(Qt(t)||"string"==typeof t){var e=[];t=t.length;for(var i=0;i<t;i++)e.push(i);return e}e=[],i=0;for(const n in t)e[i++]=n;return e}}}(t),n=function(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Qt(t)){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e}for(n in e=[],i=0,t)e[i++]=t[n];return e}(t),s=n.length,o=0;o<s;o++)e.call(void 0,n[o],i&&i[o],t)}(Yt=Gi.prototype).setTimeout=function(t){this.O=t},Yt.ib=function(t){t=t.target;const e=this.L;e&&3==cs(t)?e.l():this.La(t)},Yt.La=function(t){try{if(t==this.g)t:{const c=cs(this.g);var e=this.g.Ea();this.g.aa();if(!(3>c)&&(3!=c||Se||this.g&&(this.h.h||this.g.fa()||us(this.g)))){this.I||4!=c||7==e||Ri(),ln(this);var i=this.g.aa();this.Y=i;e:if(sn(this)){var n=us(this.g);t="";var s=n.length,o=4==cs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){un(this),cn(this);var r="";break e}this.h.i=new Gt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==s-1});n.splice(0,s),this.h.g+=t,this.C=0,r=this.h.g}else r=this.g.fa();if(this.i=200==i,function(t,e,i,n,s,o,r){t.info((function(){return"XMLHTTP RESP ("+n+") [ attempt "+s+"]: "+e+"\n"+i+"\n"+o+" "+r}))}(this.j,this.u,this.A,this.m,this.U,c,i),this.i){if(this.Z&&!this.J){e:{if(this.g){var a,h=this.g;if((a=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(a)){var l=a;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,Fi(12),un(this),cn(this);break t}Di(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dn(this,i)}this.P?(on(this,c,r),Se&&this.i&&3==c&&(Ti(this.S,this.T,"tick",this.hb),this.T.start())):(Di(this.j,this.m,r,null),dn(this,r)),4==c&&un(this),this.i&&!this.I&&(4==c?Cs(this.l,this):(this.i=!1,an(this)))}else 400==i&&0<r.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),un(this),cn(this)}}}catch(t){}},Yt.hb=function(){if(this.g){var t=cs(this.g),e=this.g.fa();this.C<e.length&&(ln(this),on(this,t,e),this.i&&4!=t&&an(this))}},Yt.cancel=function(){this.I=!0,un(this)},Yt.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Ri(),Fi(17)),un(this),this.o=2,cn(this)):hn(this,this.V-t)};var pn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gn(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof gn){this.h=void 0!==e?e:t.h,bn(this,t.j),this.s=t.s,this.g=t.g,yn(this,t.m),this.l=t.l,e=t.i;var i=new Dn;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),vn(this,i),this.o=t.o}else t&&(i=String(t).match(pn))?(this.h=!!e,bn(this,i[1]||"",!0),this.s=wn(i[2]||""),this.g=wn(i[3]||"",!0),yn(this,i[4]),this.l=wn(i[5]||"",!0),vn(this,i[6]||"",!0),this.o=wn(i[7]||"")):(this.h=!!e,this.i=new Dn(null,this.h))}function mn(t){return new gn(t)}function bn(t,e,i){t.j=i?wn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function vn(t,e,i){e instanceof Dn?(t.i=e,function(t,e){e&&!t.j&&(An(t),t.i=null,t.g.forEach((function(t,e){var i=e.toLowerCase();e!=i&&(Pn(this,e),Ln(this,i,t))}),t)),t.j=e}(t.i,t.h)):(i||(e=kn(e,Cn)),t.i=new Dn(e,t.h))}function xn(t,e,i){t.i.set(e,i)}function _n(t){return xn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function wn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kn(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,Sn),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Sn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}gn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kn(e,Mn,!0),":");var i=this.g;return(i||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(kn(e,Mn,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&t.push(":",String(i))),(i=this.l)&&(this.g&&"/"!=i.charAt(0)&&t.push("/"),t.push(kn(i,"/"==i.charAt(0)?Tn:En,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.o)&&t.push("#",kn(i,In)),t.join("")};var Mn=/[#\/\?@]/g,En=/[#\?:]/g,Tn=/[#\?]/g,Cn=/[#\?@]/g,In=/#/g;function Dn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function An(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var n=t[i].indexOf("="),s=null;if(0<=n){var o=t[i].substring(0,n);s=t[i].substring(n+1)}else o=t[i];e(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,(function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)})))}function Pn(t,e){An(t),e=Rn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function On(t,e){return An(t),e=Rn(t,e),t.g.has(e)}function Ln(t,e,i){Pn(t,e),0<i.length&&(t.i=null,t.g.set(Rn(t,e),le(i)),t.h+=i.length)}function Rn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Yt=Dn.prototype).add=function(t,e){An(this),this.i=null,t=Rn(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this},Yt.forEach=function(t,e){An(this),this.g.forEach((function(i,n){i.forEach((function(i){t.call(e,i,n,this)}),this)}),this)},Yt.oa=function(){An(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let n=0;n<e.length;n++){const s=t[n];for(let t=0;t<s.length;t++)i.push(e[n])}return i},Yt.W=function(t){An(this);let e=[];if("string"==typeof t)On(this,t)&&(e=e.concat(this.g.get(Rn(this,t))));else{t=Array.from(this.g.values());for(let i=0;i<t.length;i++)e=e.concat(t[i])}return e},Yt.set=function(t,e){return An(this),this.i=null,On(this,t=Rn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Yt.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},Yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var n=e[i];const o=encodeURIComponent(String(n)),r=this.W(n);for(n=0;n<r.length;n++){var s=o;""!==r[n]&&(s+="="+encodeURIComponent(String(r[n]))),t.push(s)}}return this.i=t.join("&")};function Nn(t){this.l=t||Fn,Gt.PerformanceNavigationTiming?t=0<(t=Gt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fn=10;function jn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function zn(t){return t.h?1:t.g?t.g.size:0}function Bn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Vn(t,e){t.g?t.g.add(e):t.h=e}function Hn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Un(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const i of t.g.values())e=e.concat(i.D);return e}return le(t.i)}function Wn(){}function $n(){this.g=new Wn}function Yn(t,e,i){const n=i||"";try{fn(t,(function(t,i){let s=t;Zt(t)&&(s=ci(t)),e.push(n+i+"="+encodeURIComponent(s))}))}catch(t){throw e.push(n+"type="+encodeURIComponent("_badmap")),t}}function qn(t,e,i,n,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(n)}catch(t){}}function Xn(t){this.l=t.ac||null,this.j=t.jb||!1}function Kn(t,e){ai.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Gn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nn.prototype.cancel=function(){if(this.i=Un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Wn.prototype.stringify=function(t){return Gt.JSON.stringify(t,void 0)},Wn.prototype.parse=function(t){return Gt.JSON.parse(t,void 0)},re(Xn,Hi),Xn.prototype.g=function(){return new Kn(this.l,this.j)},Xn.prototype.i=function(t){return function(){return t}}({}),re(Kn,ai);var Gn=0;function Jn(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function Qn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zn(t)}function Zn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Yt=Kn.prototype).open=function(t,e){if(this.readyState!=Gn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zn(this)},Yt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qn(this)),this.readyState=Gn},Yt.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Gt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jn(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},Yt.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Qn(this):Zn(this),3==this.readyState&&Jn(this)}},Yt.Va=function(t){this.g&&(this.response=this.responseText=t,Qn(this))},Yt.Ua=function(t){this.g&&(this.response=t,Qn(this))},Yt.ga=function(){this.g&&Qn(this)},Yt.setRequestHeader=function(t,e){this.v.append(t,e)},Yt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Yt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var i=e.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=e.next();return t.join("\r\n")},Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ts=Gt.JSON.parse;function es(t){ai.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=is,this.K=this.L=!1}re(es,ai);var is="",ns=/^https?$/i,ss=["POST","PUT"];function os(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rs(t),hs(t)}function rs(t){t.D||(t.D=!0,hi(t,"complete"),hi(t,"error"))}function as(t){if(t.h&&void 0!==Kt&&(!t.C[1]||4!=cs(t)||2!=t.aa()))if(t.v&&4==cs(t))wi(t.Ha,0,t);else if(hi(t,"readystatechange"),4==cs(t)){t.h=!1;try{const a=t.aa();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var i;if(!(i=e)){var n;if(n=0===a){var s=String(t.H).match(pn)[1]||null;if(!s&&Gt.self&&Gt.self.location){var o=Gt.self.location.protocol;s=o.substr(0,o.length-1)}n=!ns.test(s?s.toLowerCase():"")}i=n}if(i)hi(t,"complete"),hi(t,"success");else{t.m=6;try{var r=2<cs(t)?t.g.statusText:""}catch(t){r=""}t.j=r+" ["+t.aa()+"]",rs(t)}}finally{hs(t)}}}function hs(t,e){if(t.g){ls(t);const i=t.g,n=t.C[0]?Jt:null;t.g=null,t.C=null,e||hi(t,"ready");try{i.onreadystatechange=n}catch(t){}}}function ls(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Gt.clearTimeout(t.A),t.A=null)}function cs(t){return t.g?t.g.readyState:0}function us(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case is:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ds(t){let e="";return He(t,(function(t,i){e+=i,e+=":",e+=t,e+="\r\n"})),e}function fs(t,e,i){t:{for(n in i){var n=!1;break t}n=!0}n||(i=ds(i),"string"==typeof t?null!=i&&encodeURIComponent(String(i)):xn(t,e,i))}function ps(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function gs(t){this.Ca=0,this.i=[],this.j=new Ii,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ps("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ps("baseRetryDelayMs",5e3,t),this.bb=ps("retryDelaySeedMs",1e4,t),this.$a=ps("forwardChannelMaxRetries",2,t),this.ta=ps("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Nn(t&&t.concurrentRequestLimit),this.Fa=new $n,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ms(t){if(ys(t),3==t.G){var e=t.U++,i=mn(t.F);xn(i,"SID",t.I),xn(i,"RID",e),xn(i,"TYPE","terminate"),_s(t,i),(e=new Gi(t,t.j,e,void 0)).K=2,e.v=_n(mn(i)),i=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(i=Gt.navigator.sendBeacon(e.v.toString(),"")),!i&&Gt.Image&&((new Image).src=e.v,i=!0),i||(e.g=Os(e.l,null),e.g.da(e.v)),e.F=Date.now(),an(e)}As(t)}function bs(t){t.g&&(Ms(t),t.g.cancel(),t.g=null)}function ys(t){bs(t),t.u&&(Gt.clearTimeout(t.u),t.u=null),Ts(t),t.h.cancel(),t.m&&("number"==typeof t.m&&Gt.clearTimeout(t.m),t.m=null)}function vs(t){jn(t.h)||t.m||(t.m=!0,mi(t.Ja,t),t.C=0)}function xs(t,e){var i;i=e?e.m:t.U++;const n=mn(t.F);xn(n,"SID",t.I),xn(n,"RID",i),xn(n,"AID",t.T),_s(t,n),t.o&&t.s&&fs(n,t.o,t.s),i=new Gi(t,t.j,i,t.C+1),null===t.o&&(i.H=t.s),e&&(t.i=e.D.concat(t.i)),e=ws(t,i,1e3),i.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Vn(t.h,i),en(i,n,e)}function _s(t,e){t.ia&&He(t.ia,(function(t,i){xn(e,i,t)})),t.l&&fn({},(function(t,i){xn(e,i,t)}))}function ws(t,e,i){i=Math.min(t.i.length,i);var n=t.l?se(t.l.Ra,t.l,t):null;t:{var s=t.i;let e=-1;for(;;){const t=["count="+i];-1==e?0<i?(e=s[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let r=0;r<i;r++){let i=s[r].h;const a=s[r].g;if(i-=e,0>i)e=Math.max(0,s[r].h-100),o=!1;else try{Yn(a,t,"req"+i+"_")}catch(t){n&&n(a)}}if(o){n=t.join("&");break t}}}return t=t.i.splice(0,i),e.D=t,n}function ks(t){t.g||t.u||(t.Z=1,mi(t.Ia,t),t.A=0)}function Ss(t){return!(t.g||t.u||3<=t.A)&&(t.Z++,t.u=zi(se(t.Ia,t),Is(t,t.A)),t.A++,!0)}function Ms(t){null!=t.B&&(Gt.clearTimeout(t.B),t.B=null)}function Es(t){t.g=new Gi(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=mn(t.sa);xn(e,"RID","rpc"),xn(e,"SID",t.I),xn(e,"CI",t.L?"0":"1"),xn(e,"AID",t.T),xn(e,"TYPE","xmlhttp"),_s(t,e),t.o&&t.s&&fs(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var i=t.g;t=t.ka,i.K=1,i.v=_n(mn(e)),i.s=null,i.P=!0,nn(i,t)}function Ts(t){null!=t.v&&(Gt.clearTimeout(t.v),t.v=null)}function Cs(t,e){var i=null;if(t.g==e){Ts(t),Ms(t),t.g=null;var n=2}else{if(!Bn(t.h,e))return;i=e.D,Hn(t.h,e),n=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==n){i=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;hi(n=Oi(),new ji(n,i)),vs(t)}else ks(t);else if(3==(s=e.o)||0==s&&0<t.pa||!(1==n&&function(t,e){return!(zn(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Za?0:t.$a)||(t.m=zi(se(t.Ja,t,e),Is(t,t.C)),t.C++,0)))}(t,e)||2==n&&Ss(t)))switch(i&&0<i.length&&(e=t.h,e.i=e.i.concat(i)),s){case 1:Ds(t,5);break;case 4:Ds(t,10);break;case 3:Ds(t,6);break;default:Ds(t,2)}}function Is(t,e){let i=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(i*=2),i*e}function Ds(t,e){if(t.j.info("Error code "+e),2==e){var i=null;t.l&&(i=null);var n=se(t.kb,t);i||(i=new gn("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||bn(i,"https"),_n(i)),function(t,e){const i=new Ii;if(Gt.Image){const n=new Image;n.onload=oe(qn,i,n,"TestLoadImage: loaded",!0,e),n.onerror=oe(qn,i,n,"TestLoadImage: error",!1,e),n.onabort=oe(qn,i,n,"TestLoadImage: abort",!1,e),n.ontimeout=oe(qn,i,n,"TestLoadImage: timeout",!1,e),Gt.setTimeout((function(){n.ontimeout&&n.ontimeout()}),1e4),n.src=t}else e(!1)}(i.toString(),n)}else Fi(2);t.G=0,t.l&&t.l.va(e),As(t),ys(t)}function As(t){if(t.G=0,t.la=[],t.l){const e=Un(t.h);0==e.length&&0==t.i.length||(ce(t.la,e),ce(t.la,t.i),t.h.i.length=0,le(t.i),t.i.length=0),t.l.ua()}}function Ps(t,e,i){var n=i instanceof gn?mn(i):new gn(i,void 0);if(""!=n.g)e&&(n.g=e+"."+n.g),yn(n,n.m);else{var s=Gt.location;n=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new gn(null,void 0);n&&bn(o,n),e&&(o.g=e),s&&yn(o,s),i&&(o.l=i),n=o}return i=t.D,e=t.za,i&&e&&xn(n,i,e),xn(n,"VER",t.ma),_s(t,n),n}function Os(t,e,i){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=i&&t.Da&&!t.ra?new es(new Xn({jb:!0})):new es(t.ra)).Ka(t.H),e}function Ls(){}function Rs(){if(we&&!(10<=Number(Re)))throw Error("Environmental error: no available transport.")}function Ns(t,e){ai.call(this),this.g=new gs(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!fe(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fe(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new zs(this)}function Fs(t){qi.call(this);var e=t.__sm__;if(e){t:{for(const i in e){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function js(){Xi.call(this),this.status=1}function zs(t){this.g=t}(Yt=es.prototype).Ka=function(t){this.L=t},Yt.da=function(t,e,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$i.g(),this.C=this.u?Ui(this.u):Ui($i),this.g.onreadystatechange=se(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void os(this,t)}if(t=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)i.set(s,n[s]);else{if("function"!=typeof n.keys||"function"!=typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const t of n.keys())i.set(t,n.get(t))}n=Array.from(i.keys()).find((t=>"content-type"==t.toLowerCase())),s=Gt.FormData&&t instanceof Gt.FormData,!(0<=he(ss,e))||n||s||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of i)this.g.setRequestHeader(t,e);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ls(this),0<this.B&&((this.K=function(t){return we&&Oe()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=se(this.qa,this)):this.A=wi(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){os(this,t)}},Yt.qa=function(){void 0!==Kt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},Yt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,hi(this,"complete"),hi(this,"abort"),hs(this))},Yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hs(this,!0)),es.X.M.call(this)},Yt.Ha=function(){this.s||(this.F||this.v||this.l?as(this):this.fb())},Yt.fb=function(){as(this)},Yt.aa=function(){try{return 2<cs(this)?this.g.status:-1}catch(t){return-1}},Yt.fa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Yt.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ts(e)}},Yt.Ea=function(){return this.m},Yt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Yt=gs.prototype).ma=8,Yt.G=1,Yt.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Gi(this,this.j,t,void 0);let o=this.s;if(this.S&&(o?(o=Ue(o),$e(o,this.S)):o=this.S),null!==this.o||this.N||(s.H=o,o=null),this.O)t:{for(var e=0,i=0;i<this.i.length;i++){var n=this.i[i];if(void 0===(n="__data__"in n.g&&"string"==typeof(n=n.g.__data__)?n.length:void 0))break;if(4096<(e+=n)){e=i;break t}if(4096===e||i===this.i.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ws(this,s,e),xn(i=mn(this.F),"RID",t),xn(i,"CVER",22),this.D&&xn(i,"X-HTTP-Session-Id",this.D),_s(this,i),o&&(this.N?e="headers="+encodeURIComponent(String(ds(o)))+"&"+e:this.o&&fs(i,this.o,o)),Vn(this.h,s),this.Ya&&xn(i,"TYPE","init"),this.O?(xn(i,"$req",e),xn(i,"SID","null"),s.Z=!0,en(s,i,null)):en(s,i,e),this.G=2}}else 3==this.G&&(t?xs(this,t):0==this.i.length||jn(this.h)||xs(this))},Yt.Ia=function(){if(this.u=null,Es(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=zi(se(this.eb,this),t)}},Yt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Fi(10),bs(this),Es(this))},Yt.cb=function(){null!=this.v&&(this.v=null,bs(this),Ss(this),Fi(19))},Yt.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Fi(2)):(this.j.info("Failed to ping google.com"),Fi(1))},(Yt=Ls.prototype).xa=function(){},Yt.wa=function(){},Yt.va=function(){},Yt.ua=function(){},Yt.Ra=function(){},Rs.prototype.g=function(t,e){return new Ns(t,e)},re(Ns,ai),Ns.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,i=this.h||void 0;Fi(0),t.V=e,t.ia=i||{},t.L=t.Y,t.F=Ps(t,null,t.V),vs(t)},Ns.prototype.close=function(){ms(this.g)},Ns.prototype.u=function(t){var e=this.g;if("string"==typeof t){var i={};i.__data__=t,t=i}else this.v&&((i={}).__data__=ci(t),t=i);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&vs(e)},Ns.prototype.M=function(){this.g.l=null,delete this.j,ms(this.g),delete this.g,Ns.X.M.call(this)},re(Fs,qi),re(js,Xi),re(zs,Ls),zs.prototype.xa=function(){hi(this.g,"a")},zs.prototype.wa=function(t){hi(this.g,new Fs(t))},zs.prototype.va=function(t){hi(this.g,new js)},zs.prototype.ua=function(){hi(this.g,"b")},Rs.prototype.createWebChannel=Rs.prototype.g,Ns.prototype.send=Ns.prototype.u,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,Vi.COMPLETE="complete",Wi.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",ai.prototype.listen=ai.prototype.N,es.prototype.listenOnce=es.prototype.O,es.prototype.getLastError=es.prototype.Oa,es.prototype.getLastErrorCode=es.prototype.Ea,es.prototype.getStatus=es.prototype.aa,es.prototype.getResponseJson=es.prototype.Sa,es.prototype.getResponseText=es.prototype.fa,es.prototype.send=es.prototype.da,es.prototype.setWithCredentials=es.prototype.Ka;Xt.createWebChannelTransport=function(){return new Rs},Xt.getStatEventTarget=function(){return Oi()},Xt.ErrorCode=Bi,Xt.EventType=Vi,Xt.Event=Ai,Xt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Xt.FetchXmlHttpFactory=Xn,Xt.WebChannel=Wi,Xt.XhrIo=es;const Bs="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Vs.UNAUTHENTICATED=new Vs(null),Vs.GOOGLE_CREDENTIALS=new Vs("google-credentials-uid"),Vs.FIRST_PARTY=new Vs("first-party-uid"),Vs.MOCK_USER=new Vs("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Hs="9.13.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new it("@firebase/firestore");function Ws(t,...e){if(Us.logLevel<=G.DEBUG){const i=e.map(qs);Us.debug(`Firestore (${Hs}): ${t}`,...i)}}function $s(t,...e){if(Us.logLevel<=G.ERROR){const i=e.map(qs);Us.error(`Firestore (${Hs}): ${t}`,...i)}}function Ys(t,...e){if(Us.logLevel<=G.WARN){const i=e.map(qs);Us.warn(`Firestore (${Hs}): ${t}`,...i)}}function qs(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t="Unexpected state"){const e=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: `+t;throw $s(e),new Error(e)}function Ks(t,e){t||Xs()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Gs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Js extends j{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class to{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Vs.UNAUTHENTICATED)))}shutdown(){}}class eo{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class io{constructor(t){this.t=t,this.currentUser=Vs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i;const n=t=>this.i!==i?(i=this.i,e(t)):Promise.resolve();let s=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qs,t.enqueueRetryable((()=>n(this.currentUser)))};const o=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await n(this.currentUser)}))},r=t=>{Ws("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((t=>r(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?r(t):(Ws("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qs)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ws("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Ks("string"==typeof e.accessToken),new Zs(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ks(null===t||"string"==typeof t),new Vs(t)}}class no{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n,this.type="FirstParty",this.user=Vs.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ks(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class so{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n}getToken(){return Promise.resolve(new no(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable((()=>e(Vs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oo{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ro{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=t=>{null!=t.error&&Ws("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const i=t.token!==this.A;return this.A=t.token,Ws("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>i(e)))};const n=t=>{Ws("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.T.onInit((t=>n(t))),setTimeout((()=>{if(!this.appCheck){const t=this.T.getImmediate({optional:!0});t?n(t):Ws("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Ks("string"==typeof t.token),this.A=t.token,new oo(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ao(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let e=0;e<t;e++)i[e]=Math.floor(256*Math.random());return i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const n=ao(40);for(let s=0;s<n.length;++s)i.length<20&&n[s]<e&&(i+=t.charAt(n[s]%t.length))}return i}}function lo(t,e){return t<e?-1:t>e?1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class co{constructor(t,e,i){void 0===e?e=0:e>t.length&&Xs(),void 0===i?i=t.length-e:i>t.length-e&&Xs(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===co.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof co?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let n=0;n<i;n++){const i=t.get(n),s=e.get(n);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class uo extends co{construct(t,e,i){return new uo(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Js(Gs.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((t=>t.length>0)))}return new uo(e)}static emptyPath(){return new uo([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fo{constructor(t){this.path=t}static fromPath(t){return new fo(uo.fromString(t))}static fromName(t){return new fo(uo.fromString(t).popFirst(5))}static empty(){return new fo(uo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===uo.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return uo.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new fo(new uo(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t,e,i,n){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=n}}po.UNKNOWN_ID=-1;function go(t){return"IndexedDbTransactionError"===t.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ut(t),this.ct=t=>e.writeSequenceNumber(t))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
mo.at=-1;class bo{constructor(t,e){this.comparator=t,this.root=e||vo.EMPTY}insert(t,e){return new bo(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,vo.BLACK,null,null))}remove(t){return new bo(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const n=this.comparator(t,i.key);if(0===n)return e+i.left.size;n<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yo(this.root,t,this.comparator,!1)}getReverseIterator(){return new yo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yo(this.root,t,this.comparator,!0)}}class yo{constructor(t,e,i,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&n&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class vo{constructor(t,e,i,n,s){this.key=t,this.value=e,this.color=null!=i?i:vo.RED,this.left=null!=n?n:vo.EMPTY,this.right=null!=s?s:vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,n,s){return new vo(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=n?n:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let n=this;const s=i(t,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(t,e,i),null):0===s?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(t,e,i)),n.fixUp()}removeMin(){if(this.left.isEmpty())return vo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,n=this;if(e(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===e(t,n.key)){if(n.right.isEmpty())return vo.EMPTY;i=n.right.min(),n=n.copy(i.key,i.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xs();if(this.right.isRed())throw Xs();const t=this.left.check();if(t!==this.right.check())throw Xs();return t+(this.isRed()?0:1)}}vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1,vo.EMPTY=new class{constructor(){this.size=0}get key(){throw Xs()}get value(){throw Xs()}get color(){throw Xs()}get left(){throw Xs()}get right(){throw Xs()}copy(t,e,i,n,s){return this}insert(t,e,i){return new vo(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xo{constructor(t){this.comparator=t,this.data=new bo(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const n=i.getNext();if(this.comparator(n.key,t[1])>=0)return;e(n.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new _o(this.data.getIterator())}getIteratorFrom(t){return new _o(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof xo))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,n=i.getNext().key;if(0!==this.comparator(t,n))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new xo(this.comparator);return e.data=t,e}}class _o{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wo{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new wo(e)}static fromUint8Array(t){const e=function(t){let e="";for(let i=0;i<t.length;++i)e+=String.fromCharCode(t[i]);return e}(t);return new wo(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){var t;return t=this.binaryString,btoa(t)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lo(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}wo.EMPTY_BYTE_STRING=new wo("");new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ko(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function So(t){return"string"==typeof t?wo.fromBase64String(t):wo.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Mo{constructor(t,e,i,n,s,o,r,a){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=n,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=r,this.useFetchStreams=a}}class Eo{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Eo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Eo&&t.projectId===this.projectId&&t.database===this.database}}function To(t){return 0===t&&1/t==-1/0}function Co(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Io,Do;(Do=Io||(Io={}))[Do.OK=0]="OK",Do[Do.CANCELLED=1]="CANCELLED",Do[Do.UNKNOWN=2]="UNKNOWN",Do[Do.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Do[Do.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Do[Do.NOT_FOUND=5]="NOT_FOUND",Do[Do.ALREADY_EXISTS=6]="ALREADY_EXISTS",Do[Do.PERMISSION_DENIED=7]="PERMISSION_DENIED",Do[Do.UNAUTHENTICATED=16]="UNAUTHENTICATED",Do[Do.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Do[Do.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Do[Do.ABORTED=10]="ABORTED",Do[Do.OUT_OF_RANGE=11]="OUT_OF_RANGE",Do[Do.UNIMPLEMENTED=12]="UNIMPLEMENTED",Do[Do.INTERNAL=13]="INTERNAL",Do[Do.UNAVAILABLE=14]="UNAVAILABLE",Do[Do.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
new bo(fo.comparator);new bo(fo.comparator);new bo(fo.comparator),new xo(fo.comparator);new xo(lo);const Ao=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Po=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Oo=Po;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(ko(t.integerValue));else if("doubleValue"in t){const i=ko(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),To(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(So(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?Co(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):Xs()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const t of Object.keys(i))this._e(t,e),this.ae(i[t],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const t of i)this.ae(t,e)}ge(t,e){this.le(e,37),fo.fromName(t).path.forEach((t=>{this.le(e,60),this.Ie(t,e)}))}le(t,e){t.fe(e)}we(t){t.fe(2)}}Lo.Te=new Lo;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
new Uint8Array(0);class Ro{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Ro(t,Ro.DEFAULT_COLLECTION_PERCENTILE,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro.DEFAULT_COLLECTION_PERCENTILE=10,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ro.DEFAULT=new Ro(41943040,Ro.DEFAULT_COLLECTION_PERCENTILE,Ro.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ro.DISABLED=new Ro(-1,0,0);function No(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,e,i=1e3,n=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=n,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),n=Math.max(0,e-i);n>0&&Ws("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,n,(()=>(this.Eo=Date.now(),t()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jo{constructor(t,e,i,n,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=n,this.removalCallback=s,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,i,n,s){const o=Date.now()+i,r=new jo(t,e,o,n,s);return r.start(i),r}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Js(Gs.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zo(t,e){if($s("AsyncQueue",`${e}: ${t}`),go(t))return new Js(Gs.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Xs()}function Vo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Js(Gs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Bo(t);throw new Js(Gs.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ho=new Map;class Uo{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Js(Gs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Js(Gs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,i,n){if(!0===e&&!0===n)throw new Js(Gs.INVALID_ARGUMENT,`${t} and ${i} cannot be used together.`)}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,e,i,n){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uo({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Js(Gs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Js(Gs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uo(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new to;switch(t.type){case"gapi":const e=t.client;return new so(e,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Js(Gs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Ho.get(t);e&&(Ws("ComponentProvider","Removing Datastore"),Ho.delete(t),e.terminate())}(this),Promise.resolve()}}function $o(t,e,i,n={}){var s;const o=(t=Vo(t,Wo))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Ys("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${i}`,ssl:!1})),n.mockUserToken){let e,i;if("string"==typeof n.mockUserToken)e=n.mockUserToken,i=Vs.MOCK_USER;else{e=F(n.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=n.mockUserToken.sub||n.mockUserToken.user_id;if(!o)throw new Js(Gs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new Vs(o)}t._authCredentials=new eo(new Zs(e,i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yo{constructor(t,e,i,n){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=n,this.user=Vs.UNAUTHENTICATED,this.clientId=ho.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,(async t=>{Ws("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(i,(t=>(Ws("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Js(Gs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=zo(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}class qo{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Fo(this,"async_queue_retry"),this.Wc=()=>{const t=No();t&&Ws("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const t=No();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;const e=No();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.Uc)return new Promise((()=>{}));const e=new Qs;return this.Hc((()=>this.Uc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Lc.push(t),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(t){if(!go(t))throw t;Ws("AsyncQueue","Operation failed with retryable error: "+t)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(t){const e=this.Bc.then((()=>(this.Gc=!0,t().catch((t=>{this.Kc=t,this.Gc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw $s("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Gc=!1,t))))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const n=jo.createAndSchedule(this,t,e,i,(t=>this.Yc(t)));return this.qc.push(n),n}zc(){this.Kc&&Xs()}verifyOperationInProgress(){}async Xc(){let t;do{t=this.Bc,await t}while(t!==this.Bc)}Zc(t){for(const e of this.qc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then((()=>{this.qc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.qc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()}))}ea(t){this.jc.push(t)}Yc(t){const e=this.qc.indexOf(t);this.qc.splice(e,1)}}class Xo extends Wo{constructor(t,e,i,n){super(t,e,i,n),this.type="firestore",this._queue=new qo,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ko(this),this._firestoreClient.terminate()}}function Ko(t){var e;const i=t._freezeSettings(),n=function(t,e,i,n){return new Mo(t,e,i,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,n.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Yo(t._authCredentials,t._appCheckCredentials,t._queue,n)}new RegExp("[~\\*/\\[\\]]");!function(t,e=!0){Hs="9.13.0",It(new $("firestore",((t,{instanceIdentifier:i,options:n})=>{const s=t.getProvider("app").getImmediate(),o=new Xo(new io(t.getProvider("auth-internal")),new ro(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Js(Gs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eo(t.options.projectId,e)}(s,i),s);return n=Object.assign({useFetchStreams:e},n),o._setSettings(n),o}),"PUBLIC").setMultipleInstances(!0)),Rt(Bs,"3.7.2",t),Rt(Bs,"3.7.2","esm2017")}();const Go="@firebase/installations",Jo="0.5.16",Qo=1e4,Zo=`w:${Jo}`,tr="FIS_v2",er=36e5,ir=new z("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nr(t){return t instanceof j&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function or(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function rr(t,e){const i=(await e.json()).error;return ir.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function ar({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function hr(t,{refreshToken:e}){const i=ar(t);return i.append("Authorization",function(t){return`${tr} ${t}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),i}async function lr(t){const e=await t();return e.status>=500&&e.status<600?t():e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ur=/^[cdef][\w-]{21}$/;function dr(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(i=t,btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_"));var i;return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return ur.test(e)?e:""}catch(t){return""}}function fr(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Map;function gr(t,e){const i=fr(t);mr(i,e),function(t,e){const i=yr();i&&i.postMessage({key:t,fid:e});vr()}(i,e)}function mr(t,e){const i=pr.get(t);if(i)for(const t of i)t(e)}let br=null;function yr(){return!br&&"BroadcastChannel"in self&&(br=new BroadcastChannel("[Firebase] FID Change"),br.onmessage=t=>{mr(t.data.key,t.data.fid)}),br}function vr(){0===pr.size&&br&&(br.close(),br=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="firebase-installations-store";let _r=null;function wr(){return _r||(_r=gt("firebase-installations-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(xr)}})),_r}async function kr(t,e){const i=fr(t),n=(await wr()).transaction(xr,"readwrite"),s=n.objectStore(xr),o=await s.get(i);return await s.put(e,i),await n.done,o&&o.fid===e.fid||gr(t,e.fid),e}async function Sr(t){const e=fr(t),i=(await wr()).transaction(xr,"readwrite");await i.objectStore(xr).delete(e),await i.done}async function Mr(t,e){const i=fr(t),n=(await wr()).transaction(xr,"readwrite"),s=n.objectStore(xr),o=await s.get(i),r=e(o);return void 0===r?await s.delete(i):await s.put(r,i),await n.done,!r||o&&o.fid===r.fid||gr(t,r.fid),r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Er(t){let e;const i=await Mr(t.appConfig,(i=>{const n=function(t){const e=t||{fid:dr(),registrationStatus:0};return Ir(e)}(i),s=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(ir.create("app-offline"))}}const i={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(t,e){try{const i=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:i}){const n=sr(t),s=ar(t),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const r={fid:i,authVersion:tr,appId:t.appId,sdkVersion:Zo},a={method:"POST",headers:s,body:JSON.stringify(r)},h=await lr((()=>fetch(n,a)));if(h.ok){const t=await h.json();return{fid:t.fid||i,registrationStatus:2,refreshToken:t.refreshToken,authToken:or(t.authToken)}}throw await rr("Create Installation",h)}(t,e);return kr(t.appConfig,i)}catch(i){throw nr(i)&&409===i.customData.serverCode?await Sr(t.appConfig):await kr(t.appConfig,{fid:e.fid,registrationStatus:0}),i}}(t,i);return{installationEntry:i,registrationPromise:n}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Tr(t)}:{installationEntry:e}}(t,n);return e=s.registrationPromise,s.installationEntry}));return""===i.fid?{installationEntry:await e}:{installationEntry:i,registrationPromise:e}}async function Tr(t){let e=await Cr(t.appConfig);for(;1===e.registrationStatus;)await cr(100),e=await Cr(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:i}=await Er(t);return i||e}return e}function Cr(t){return Mr(t,(t=>{if(!t)throw ir.create("installation-not-found");return Ir(t)}))}function Ir(t){return 1===(e=t).registrationStatus&&e.registrationTime+Qo<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function Dr({appConfig:t,heartbeatServiceProvider:e},i){const n=function(t,{fid:e}){return`${sr(t)}/${e}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,i),s=hr(t,i),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const r={installation:{sdkVersion:Zo,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(r)},h=await lr((()=>fetch(n,a)));if(h.ok){return or(await h.json())}throw await rr("Generate Auth Token",h)}async function Ar(t,e=!1){let i;const n=await Mr(t.appConfig,(n=>{if(!Or(n))throw ir.create("not-registered");const s=n.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+er}(t)}(s))return n;if(1===s.requestStatus)return i=async function(t,e){let i=await Pr(t.appConfig);for(;1===i.authToken.requestStatus;)await cr(100),i=await Pr(t.appConfig);const n=i.authToken;return 0===n.requestStatus?Ar(t,e):n}(t,e),n;{if(!navigator.onLine)throw ir.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(n);return i=async function(t,e){try{const i=await Dr(t,e),n=Object.assign(Object.assign({},e),{authToken:i});return await kr(t.appConfig,n),i}catch(i){if(!nr(i)||401!==i.customData.serverCode&&404!==i.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kr(t.appConfig,i)}else await Sr(t.appConfig);throw i}}(t,e),e}}));return i?await i:n.authToken}function Pr(t){return Mr(t,(t=>{if(!Or(t))throw ir.create("not-registered");const e=t.authToken;return 1===(i=e).requestStatus&&i.requestTime+Qo<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var i;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function Or(t){return void 0!==t&&2===t.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Lr(t,e=!1){const i=t;await async function(t){const{registrationPromise:e}=await Er(t);e&&await e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i);return(await Ar(i,e)).token}function Rr(t){return ir.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="installations",Fr=t=>{const e=Dt(t.getProvider("app").getImmediate(),Nr).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:i,registrationPromise:n}=await Er(e);return n?n.catch(console.error):Ar(e).catch(console.error),i.fid}(e),getToken:t=>Lr(e,t)}};It(new $(Nr,(t=>{const e=t.getProvider("app").getImmediate(),i=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){if(!t||!t.options)throw Rr("App Configuration");if(!t.name)throw Rr("App Name");const e=["projectId","apiKey","appId"];for(const i of e)if(!t.options[i])throw Rr(i);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:i,heartbeatServiceProvider:Dt(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),It(new $("installations-internal",Fr,"PRIVATE")),Rt(Go,Jo),Rt(Go,Jo,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jr="analytics",zr="https://www.googletagmanager.com/gtag/js",Br=new it("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vr(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function Hr(t,e,i,n){return async function(s,o,r){try{"event"===s?await async function(t,e,i,n,s){try{let o=[];if(s&&s.send_to){let t=s.send_to;Array.isArray(t)||(t=[t]);const n=await Vr(i);for(const i of t){const t=n.find((t=>t.measurementId===i)),s=t&&e[t.appId];if(!s){o=[];break}o.push(s)}}0===o.length&&(o=Object.values(e)),await Promise.all(o),t("event",n,s||{})}catch(t){Br.error(t)}}(t,e,i,o,r):"config"===s?await async function(t,e,i,n,s,o){const r=n[s];try{if(r)await e[r];else{const t=(await Vr(i)).find((t=>t.measurementId===s));t&&await e[t.appId]}}catch(t){Br.error(t)}t("config",s,o)}(t,e,i,n,o,r):"consent"===s?t("consent","update",r):t("set",o)}catch(t){Br.error(t)}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ur=new z("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'});const Wr=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function $r(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Yr(t,e=Wr,i){const{appId:n,apiKey:s,measurementId:o}=t.options;if(!n)throw Ur.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:n};throw Ur.create("no-api-key")}const r=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Xr;return setTimeout((async()=>{a.abort()}),void 0!==i?i:6e4),qr({appId:n,apiKey:s,measurementId:o},r,a,e)}async function qr(t,{throttleEndTimeMillis:e,backoffCount:i},n,s=Wr){var o,r;const{appId:a,measurementId:h}=t;try{await function(t,e){return new Promise(((i,n)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(i,s);t.addEventListener((()=>{clearTimeout(o),n(Ur.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(n,e)}catch(t){if(h)return Br.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null===(o=t)||void 0===o?void 0:o.message}]`),{appId:a,measurementId:h};throw t}try{const e=await async function(t){var e;const{appId:i,apiKey:n}=t,s={method:"GET",headers:$r(n)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",i),r=await fetch(o,s);if(200!==r.status&&304!==r.status){let t="";try{const i=await r.json();(null===(e=i.error)||void 0===e?void 0:e.message)&&(t=i.error.message)}catch(t){}throw Ur.create("config-fetch-failed",{httpStatus:r.status,responseMessage:t})}return r.json()}(t);return s.deleteThrottleMetadata(a),e}catch(e){const o=e;if(!function(t){if(!(t instanceof j&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o)){if(s.deleteThrottleMetadata(a),h)return Br.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${null==o?void 0:o.message}]`),{appId:a,measurementId:h};throw e}const l=503===Number(null===(r=null==o?void 0:o.customData)||void 0===r?void 0:r.httpStatus)?U(i,s.intervalMillis,30):U(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+l,backoffCount:i+1};return s.setThrottleMetadata(a,c),Br.debug(`Calling attemptFetch again in ${l} millis`),qr(t,c,n,s)}}class Xr{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kr,Gr;function Jr(t){Gr=t}function Qr(t){Kr=t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(t,e,i,n,s,o,r){var a;const h=Yr(t);h.then((e=>{i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Br.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Br.error(t))),e.push(h);const l=async function(){var t;if(!D())return Br.warn(Ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await A()}catch(e){return Br.warn(Ur.create("indexeddb-unavailable",{errorInfo:null===(t=e)||void 0===t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?n.getId():void 0)),[c,u]=await Promise.all([h,l]);(function(t){const e=window.document.getElementsByTagName("script");for(const i of Object.values(e))if(i.src&&i.src.includes(zr)&&i.src.includes(t))return i;return null})(o)||function(t,e){const i=document.createElement("script");i.src=`${zr}?l=${t}&id=${e}`,i.async=!0,document.head.appendChild(i)}(o,c.measurementId),Gr&&(s("consent","default",Gr),Jr(void 0)),s("js",new Date);const d=null!==(a=null==r?void 0:r.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=u&&(d.firebase_id=u),s("config",c.measurementId,d),Kr&&(s("set",Kr),Qr(void 0)),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t){this.app=t}_delete(){return delete ea[this.app.options.appId],Promise.resolve()}}let ea={},ia=[];const na={};let sa,oa,ra="dataLayer",aa="gtag",ha=!1;function la(t,e,i){!function(){const t=[];if(I()&&t.push("This is a browser extension environment."),P()||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),i=Ur.create("invalid-analytics-context",{errorInfo:e});Br.warn(i.message)}}();const n=t.options.appId;if(!n)throw Ur.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Ur.create("no-api-key");Br.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ea[n])throw Ur.create("already-exists",{id:n});if(!ha){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(ra);const{wrappedGtag:t,gtagCore:e}=function(t,e,i,n,s){let o=function(...t){window[n].push(arguments)};return window[s]&&"function"==typeof window[s]&&(o=window[s]),window[s]=Hr(o,t,e,i),{gtagCore:o,wrappedGtag:window[s]}}(ea,ia,na,ra,aa);oa=t,sa=e,ha=!0}ea[n]=Zr(t,ia,na,e,sa,ra,i);return new ta(t)}function ca(t,e,i,n){t=W(t),async function(t,e,i,n,s){if(s&&s.global)t("event",i,n);else{const s=await e;t("event",i,Object.assign(Object.assign({},n),{send_to:s}))}}(oa,ea[t.app.options.appId],e,i,n).catch((t=>Br.error(t)))}const ua="@firebase/analytics",da="0.8.4";
/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
function fa(){}It(new $(jr,((t,{options:e})=>la(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),It(new $("analytics-internal",(function(t){try{const e=t.getProvider(jr).getImmediate();return{logEvent:(t,i,n)=>ca(e,t,i,n)}}catch(t){throw Ur.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Rt(ua,da),Rt(ua,da,"esm2017");const pa=function(){let t=0;return function(){return t++}}();function ga(t){return null==t}function ma(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function ba(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const ya=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function va(t,e){return ya(t)?t:e}function xa(t,e){return void 0===t?e:t}const _a=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function wa(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function ka(t,e,i,n){let s,o,r;if(ma(t))if(o=t.length,n)for(s=o-1;s>=0;s--)e.call(i,t[s],s);else for(s=0;s<o;s++)e.call(i,t[s],s);else if(ba(t))for(r=Object.keys(t),o=r.length,s=0;s<o;s++)e.call(i,t[r[s]],r[s])}function Sa(t,e){let i,n,s,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(s=t[i],o=e[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Ma(t){if(ma(t))return t.map(Ma);if(ba(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let s=0;for(;s<n;++s)e[i[s]]=Ma(t[i[s]]);return e}return t}function Ea(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Ta(t,e,i,n){if(!Ea(t))return;const s=e[t],o=i[t];ba(s)&&ba(o)?Ca(s,o,n):e[t]=Ma(o)}function Ca(t,e,i){const n=ma(e)?e:[e],s=n.length;if(!ba(t))return t;const o=(i=i||{}).merger||Ta;for(let r=0;r<s;++r){if(!ba(e=n[r]))continue;const s=Object.keys(e);for(let n=0,r=s.length;n<r;++n)o(s[n],t,e,i)}return t}function Ia(t,e){return Ca(t,e,{merger:Da})}function Da(t,e,i){if(!Ea(t))return;const n=e[t],s=i[t];ba(n)&&ba(s)?Ia(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ma(s))}const Aa={"":t=>t,x:t=>t.x,y:t=>t.y};function Pa(t,e){const i=Aa[e]||(Aa[e]=function(t){const e=function(t){const e=t.split("."),i=[];let n="";for(const t of e)n+=t,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e));return i(t)}function Oa(t){return t.charAt(0).toUpperCase()+t.slice(1)}const La=t=>void 0!==t,Ra=t=>"function"==typeof t,Na=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function Fa(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const ja=Math.PI,za=2*ja,Ba=za+ja,Va=Number.POSITIVE_INFINITY,Ha=ja/180,Ua=ja/2,Wa=ja/4,$a=2*ja/3,Ya=Math.log10,qa=Math.sign;function Xa(t){const e=Math.round(t);t=Ja(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(Ya(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function Ka(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n==0&&(e.push(n),e.push(t/n));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}function Ga(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ja(t,e,i){return Math.abs(t-e)<i}function Qa(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function Za(t,e,i){let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function th(t){return t*(ja/180)}function eh(t){return t*(180/ja)}function ih(t){if(!ya(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function nh(t,e){const i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*ja&&(o+=za),{angle:o,distance:s}}function sh(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function oh(t,e){return(t-e+Ba)%za-ja}function rh(t){return(t%za+za)%za}function ah(t,e,i,n){const s=rh(t),o=rh(e),r=rh(i),a=rh(o-s),h=rh(r-s),l=rh(s-o),c=rh(s-r);return s===o||s===r||n&&o===r||a>h&&l<c}function hh(t,e,i){return Math.max(e,Math.min(i,t))}function lh(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function ch(t,e,i){i=i||(i=>t[i]<e);let n,s=t.length-1,o=0;for(;s-o>1;)n=o+s>>1,i(n)?o=n:s=n;return{lo:o,hi:s}}const uh=(t,e,i,n)=>ch(t,i,n?n=>t[n][e]<=i:n=>t[n][e]<i),dh=(t,e,i)=>ch(t,i,(n=>t[n][e]>=i));function fh(t,e,i){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>i;)s--;return n>0||s<t.length?t.slice(n,s):t}const ph=["push","pop","shift","splice","unshift"];function gh(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(e);-1!==s&&n.splice(s,1),n.length>0||(ph.forEach((e=>{delete t[e]})),delete t._chartjs)}function mh(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}const bh="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function yh(t,e,i){const n=i||(t=>Array.prototype.slice.call(t));let s=!1,o=[];return function(...i){o=n(i),s||(s=!0,bh.call(window,(()=>{s=!1,t.apply(e,o)})))}}function vh(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const xh=t=>"start"===t?"left":"end"===t?"right":"center",_h=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,wh=(t,e,i,n)=>t===(n?"left":"right")?i:"center"===t?(e+i)/2:e;function kh(t,e,i){const n=e.length;let s=0,o=n;if(t._sorted){const{iScale:r,_parsed:a}=t,h=r.axis,{min:l,max:c,minDefined:u,maxDefined:d}=r.getUserBounds();u&&(s=hh(Math.min(uh(a,r.axis,l).lo,i?n:uh(e,h,r.getPixelForValue(l)).lo),0,n-1)),o=d?hh(Math.max(uh(a,r.axis,c,!0).hi+1,i?0:uh(e,h,r.getPixelForValue(c),!0).hi+1),s,n)-s:n-s}return{start:s,count:o}}function Sh(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=s,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}const Mh=t=>0===t||1===t,Eh=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*za/i),Th=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*za/i)+1,Ch={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Ua),easeOutSine:t=>Math.sin(t*Ua),easeInOutSine:t=>-.5*(Math.cos(ja*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Mh(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Mh(t)?t:Eh(t,.075,.3),easeOutElastic:t=>Mh(t)?t:Th(t,.075,.3),easeInOutElastic(t){const e=.1125;return Mh(t)?t:t<.5?.5*Eh(2*t,e,.45):.5+.5*Th(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Ch.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*Ch.easeInBounce(2*t):.5*Ch.easeOutBounce(2*t-1)+.5};
/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */
function Ih(t){return t+.5|0}const Dh=(t,e,i)=>Math.max(Math.min(t,i),e);function Ah(t){return Dh(Ih(2.55*t),0,255)}function Ph(t){return Dh(Ih(255*t),0,255)}function Oh(t){return Dh(Ih(t/2.55)/100,0,1)}function Lh(t){return Dh(Ih(100*t),0,100)}const Rh={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nh=[..."0123456789ABCDEF"],Fh=t=>Nh[15&t],jh=t=>Nh[(240&t)>>4]+Nh[15&t],zh=t=>(240&t)>>4==(15&t);function Bh(t){var e=(t=>zh(t.r)&&zh(t.g)&&zh(t.b)&&zh(t.a))(t)?Fh:jh;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const Vh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Hh(t,e,i){const n=e*Math.min(i,1-i),s=(e,s=(e+t/30)%12)=>i-n*Math.max(Math.min(s-3,9-s,1),-1);return[s(0),s(8),s(4)]}function Uh(t,e,i){const n=(n,s=(n+t/60)%6)=>i-i*e*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function Wh(t,e,i){const n=Hh(t,1,.5);let s;for(e+i>1&&(s=1/(e+i),e*=s,i*=s),s=0;s<3;s++)n[s]*=1-e-i,n[s]+=e;return n}function $h(t){const e=t.r/255,i=t.g/255,n=t.b/255,s=Math.max(e,i,n),o=Math.min(e,i,n),r=(s+o)/2;let a,h,l;return s!==o&&(l=s-o,h=r>.5?l/(2-s-o):l/(s+o),a=function(t,e,i,n,s){return t===s?(e-i)/n+(e<i?6:0):e===s?(i-t)/n+2:(t-e)/n+4}(e,i,n,l,s),a=60*a+.5),[0|a,h||0,r]}function Yh(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(Ph)}function qh(t,e,i){return Yh(Hh,t,e,i)}function Xh(t){return(t%360+360)%360}function Kh(t){const e=Vh.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?Ah(+e[5]):Ph(+e[5]));const s=Xh(+e[2]),o=+e[3]/100,r=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return Yh(Wh,t,e,i)}(s,o,r):"hsv"===e[1]?function(t,e,i){return Yh(Uh,t,e,i)}(s,o,r):qh(s,o,r),{r:i[0],g:i[1],b:i[2],a:n}}const Gh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Qh;function Zh(t){Qh||(Qh=function(){const t={},e=Object.keys(Jh),i=Object.keys(Gh);let n,s,o,r,a;for(n=0;n<e.length;n++){for(r=a=e[n],s=0;s<i.length;s++)o=i[s],a=a.replace(o,Gh[o]);o=parseInt(Jh[r],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),Qh.transparent=[0,0,0,0]);const e=Qh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const tl=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const el=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,il=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function nl(t,e,i){if(t){let n=$h(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=qh(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function sl(t,e){return t?Object.assign(e||{},t):t}function ol(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ph(t[3]))):(e=sl(t,{r:0,g:0,b:0,a:1})).a=Ph(e.a),e}function rl(t){return"r"===t.charAt(0)?function(t){const e=tl.exec(t);let i,n,s,o=255;if(e){if(e[7]!==i){const t=+e[7];o=e[8]?Ah(t):Dh(255*t,0,255)}return i=+e[1],n=+e[3],s=+e[5],i=255&(e[2]?Ah(i):Dh(i,0,255)),n=255&(e[4]?Ah(n):Dh(n,0,255)),s=255&(e[6]?Ah(s):Dh(s,0,255)),{r:i,g:n,b:s,a:o}}}(t):Kh(t)}class al{constructor(t){if(t instanceof al)return t;const e=typeof t;let i;var n,s,o;"object"===e?i=ol(t):"string"===e&&(o=(n=t).length,"#"===n[0]&&(4===o||5===o?s={r:255&17*Rh[n[1]],g:255&17*Rh[n[2]],b:255&17*Rh[n[3]],a:5===o?17*Rh[n[4]]:255}:7!==o&&9!==o||(s={r:Rh[n[1]]<<4|Rh[n[2]],g:Rh[n[3]]<<4|Rh[n[4]],b:Rh[n[5]]<<4|Rh[n[6]],a:9===o?Rh[n[7]]<<4|Rh[n[8]]:255})),i=s||Zh(t)||rl(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=sl(this._rgb);return t&&(t.a=Oh(t.a)),t}set rgb(t){this._rgb=ol(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Oh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?Bh(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=$h(t),i=e[0],n=Lh(e[1]),s=Lh(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${s}%, ${Oh(t.a)})`:`hsl(${i}, ${n}%, ${s}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb;let s;const o=e===s?.5:e,r=2*o-1,a=i.a-n.a,h=((r*a==-1?r:(r+a)/(1+r*a))+1)/2;s=1-h,i.r=255&h*i.r+s*n.r+.5,i.g=255&h*i.g+s*n.g+.5,i.b=255&h*i.b+s*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const n=il(Oh(t.r)),s=il(Oh(t.g)),o=il(Oh(t.b));return{r:Ph(el(n+i*(il(Oh(e.r))-n))),g:Ph(el(s+i*(il(Oh(e.g))-s))),b:Ph(el(o+i*(il(Oh(e.b))-o))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new al(this.rgb)}alpha(t){return this._rgb.a=Ph(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=Ih(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return nl(this._rgb,2,t),this}darken(t){return nl(this._rgb,2,-t),this}saturate(t){return nl(this._rgb,1,t),this}desaturate(t){return nl(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=$h(t);i[0]=Xh(i[0]+e),i=qh(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function hl(t){return new al(t)}function ll(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function cl(t){return ll(t)?t:hl(t)}function ul(t){return ll(t)?t:hl(t).saturate(.5).darken(.1).hexString()}const dl=Object.create(null),fl=Object.create(null);function pl(t,e){if(!e)return t;const i=e.split(".");for(let e=0,n=i.length;e<n;++e){const n=i[e];t=t[n]||(t[n]=Object.create(null))}return t}function gl(t,e,i){return"string"==typeof e?Ca(pl(t,e),i):Ca(pl(t,""),e)}var ml=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ul(e.backgroundColor),this.hoverBorderColor=(t,e)=>ul(e.borderColor),this.hoverColor=(t,e)=>ul(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return gl(this,t,e)}get(t){return pl(this,t)}describe(t,e){return gl(fl,t,e)}override(t,e){return gl(dl,t,e)}route(t,e,i,n){const s=pl(this,t),o=pl(this,i),r="_"+e;Object.defineProperties(s,{[r]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[r],e=o[n];return ba(t)?Object.assign({},e,t):xa(t,e)},set(t){this[r]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function bl(t,e,i,n,s){let o=e[s];return o||(o=e[s]=t.measureText(s).width,i.push(s)),o>n&&(n=o),n}function yl(t,e,i,n){let s=(n=n||{}).data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let r=0;const a=i.length;let h,l,c,u,d;for(h=0;h<a;h++)if(u=i[h],null!=u&&!0!==ma(u))r=bl(t,s,o,r,u);else if(ma(u))for(l=0,c=u.length;l<c;l++)d=u[l],null==d||ma(d)||(r=bl(t,s,o,r,d));t.restore();const f=o.length/2;if(f>i.length){for(h=0;h<f;h++)delete s[o[h]];o.splice(0,f)}return r}function vl(t,e,i){const n=t.currentDevicePixelRatio,s=0!==i?Math.max(i/2,.5):0;return Math.round((e-s)*n)/n+s}function xl(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function _l(t,e,i,n){wl(t,e,i,n,null)}function wl(t,e,i,n,s){let o,r,a,h,l,c;const u=e.pointStyle,d=e.rotation,f=e.radius;let p=(d||0)*Ha;if(u&&"object"==typeof u&&(o=u.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,n),t.rotate(p),t.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),void t.restore();if(!(isNaN(f)||f<=0)){switch(t.beginPath(),u){default:s?t.ellipse(i,n,s/2,f,0,0,za):t.arc(i,n,f,0,za),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(p)*f,n-Math.cos(p)*f),p+=$a,t.lineTo(i+Math.sin(p)*f,n-Math.cos(p)*f),p+=$a,t.lineTo(i+Math.sin(p)*f,n-Math.cos(p)*f),t.closePath();break;case"rectRounded":l=.516*f,h=f-l,r=Math.cos(p+Wa)*h,a=Math.sin(p+Wa)*h,t.arc(i-r,n-a,l,p-ja,p-Ua),t.arc(i+a,n-r,l,p-Ua,p),t.arc(i+r,n+a,l,p,p+Ua),t.arc(i-a,n+r,l,p+Ua,p+ja),t.closePath();break;case"rect":if(!d){h=Math.SQRT1_2*f,c=s?s/2:h,t.rect(i-c,n-h,2*c,2*h);break}p+=Wa;case"rectRot":r=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(i-r,n-a),t.lineTo(i+a,n-r),t.lineTo(i+r,n+a),t.lineTo(i-a,n+r),t.closePath();break;case"crossRot":p+=Wa;case"cross":r=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r);break;case"star":r=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r),p+=Wa,r=Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r);break;case"line":r=s?s/2:Math.cos(p)*f,a=Math.sin(p)*f,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(p)*f,n+Math.sin(p)*f)}t.fill(),e.borderWidth>0&&t.stroke()}}function kl(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Sl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ml(t){t.restore()}function El(t,e,i,n,s){if(!e)return t.lineTo(i.x,i.y);if("middle"===s){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===s!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Tl(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Cl(t,e,i,n,s,o={}){const r=ma(e)?e:[e],a=o.strokeWidth>0&&""!==o.strokeColor;let h,l;for(t.save(),t.font=s.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);ga(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),h=0;h<r.length;++h)l=r[h],a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),ga(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(l,i,n,o.maxWidth)),t.fillText(l,i,n,o.maxWidth),Il(t,i,n,l,o),n+=s.lineHeight;t.restore()}function Il(t,e,i,n,s){if(s.strikethrough||s.underline){const o=t.measureText(n),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,h=i-o.actualBoundingBoxAscent,l=i+o.actualBoundingBoxDescent,c=s.strikethrough?(h+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(r,c),t.lineTo(a,c),t.stroke()}}function Dl(t,e){const{x:i,y:n,w:s,h:o,radius:r}=e;t.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-Ua,ja,!0),t.lineTo(i,n+o-r.bottomLeft),t.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,ja,Ua,!0),t.lineTo(i+s-r.bottomRight,n+o),t.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Ua,0,!0),t.lineTo(i+s,n+r.topRight),t.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-Ua,!0),t.lineTo(i+r.topLeft,n)}const Al=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Pl=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Ol(t,e){const i=(""+t).match(Al);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function Ll(t,e){const i={},n=ba(e),s=n?Object.keys(e):e,o=ba(t)?n?i=>xa(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of s)i[t]=+o(t)||0;return i}function Rl(t){return Ll(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Nl(t){return Ll(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Fl(t){const e=Rl(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jl(t,e){t=t||{},e=e||ml.font;let i=xa(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let n=xa(t.style,e.style);n&&!(""+n).match(Pl)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const s={family:xa(t.family,e.family),lineHeight:Ol(xa(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:xa(t.weight,e.weight),string:""};return s.string=function(t){return!t||ga(t.size)||ga(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(s),s}function zl(t,e,i,n){let s,o,r,a=!0;for(s=0,o=t.length;s<o;++s)if(r=t[s],void 0!==r&&(void 0!==e&&"function"==typeof r&&(r=r(e),a=!1),void 0!==i&&ma(r)&&(r=r[i%r.length],a=!1),void 0!==r))return n&&!a&&(n.cacheable=!1),r}function Bl(t,e,i){const{min:n,max:s}=t,o=_a(e,(s-n)/2),r=(t,e)=>i&&0===t?0:t+e;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function Vl(t,e){return Object.assign(Object.create(t),e)}function Hl(t,e=[""],i=t,n,s=(()=>t[0])){La(n)||(n=Zl("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:s,override:s=>Hl([s,...t],e,i,n)};return new Proxy(o,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,n)=>ql(i,n,(()=>function(t,e,i,n){let s;for(const o of e)if(s=Zl($l(o,t),i),La(s))return Yl(t,s)?Jl(i,n,t,s):s}(n,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>tc(t).includes(e),ownKeys:t=>tc(t),set(t,e,i){const n=t._storage||(t._storage=s());return t[e]=n[e]=i,delete t._keys,!0}})}function Ul(t,e,i,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Wl(t,n),setContext:e=>Ul(t,e,i,n),override:s=>Ul(t.override(s),e,i,n)};return new Proxy(s,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>ql(t,e,(()=>function(t,e,i){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=t;let a=n[e];Ra(a)&&r.isScriptable(e)&&(a=function(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t),e=e(o,r||n),a.delete(t),Yl(t,e)&&(e=Jl(s._scopes,s,t,e));return e}(e,a,t,i));ma(a)&&a.length&&(a=function(t,e,i,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=i;if(La(o.index)&&n(t))e=e[o.index%e.length];else if(ba(e[0])){const i=e,n=s._scopes.filter((t=>t!==i));e=[];for(const h of i){const i=Jl(n,s,t,h);e.push(Ul(i,o,r&&r[t],a))}}return e}(e,a,t,r.isIndexable));Yl(e,a)&&(a=Ul(a,s,o&&o[e],r));return a}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,n)=>(t[i]=n,delete e[i],!0)})}function Wl(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:i,indexable:n,isScriptable:Ra(i)?i:()=>i,isIndexable:Ra(n)?n:()=>n}}const $l=(t,e)=>t?t+Oa(e):e,Yl=(t,e)=>ba(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function ql(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=i();return t[e]=n,n}function Xl(t,e,i){return Ra(t)?t(e,i):t}const Kl=(t,e)=>!0===t?e:"string"==typeof t?Pa(e,t):void 0;function Gl(t,e,i,n,s){for(const o of e){const e=Kl(i,o);if(e){t.add(e);const o=Xl(e._fallback,i,s);if(La(o)&&o!==i&&o!==n)return o}else if(!1===e&&La(n)&&i!==n)return null}return!1}function Jl(t,e,i,n){const s=e._rootScopes,o=Xl(e._fallback,i,n),r=[...t,...s],a=new Set;a.add(n);let h=Ql(a,r,i,o||i,n);return null!==h&&((!La(o)||o===i||(h=Ql(a,r,o,h,n),null!==h))&&Hl(Array.from(a),[""],s,o,(()=>function(t,e,i){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return ma(s)&&ba(i)?i:s}(e,i,n))))}function Ql(t,e,i,n,s){for(;i;)i=Gl(t,e,i,n,s);return i}function Zl(t,e){for(const i of e){if(!i)continue;const e=i[t];if(La(e))return e}}function tc(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function ec(t,e,i,n){const{iScale:s}=t,{key:o="r"}=this._parsing,r=new Array(n);let a,h,l,c;for(a=0,h=n;a<h;++a)l=a+i,c=e[l],r[a]={r:s.parse(Pa(c,o),l)};return r}const ic=Number.EPSILON||1e-14,nc=(t,e)=>e<t.length&&!t[e].skip&&t[e],sc=t=>"x"===t?"y":"x";function oc(t,e,i,n){const s=t.skip?e:t,o=e,r=i.skip?e:i,a=sh(o,s),h=sh(r,o);let l=a/(a+h),c=h/(a+h);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const u=n*l,d=n*c;return{previous:{x:o.x-u*(r.x-s.x),y:o.y-u*(r.y-s.y)},next:{x:o.x+d*(r.x-s.x),y:o.y+d*(r.y-s.y)}}}function rc(t,e="x"){const i=sc(e),n=t.length,s=Array(n).fill(0),o=Array(n);let r,a,h,l=nc(t,0);for(r=0;r<n;++r)if(a=h,h=l,l=nc(t,r+1),h){if(l){const t=l[e]-h[e];s[r]=0!==t?(l[i]-h[i])/t:0}o[r]=a?l?qa(s[r-1])!==qa(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}!function(t,e,i){const n=t.length;let s,o,r,a,h,l=nc(t,0);for(let c=0;c<n-1;++c)h=l,l=nc(t,c+1),h&&l&&(Ja(e[c],0,ic)?i[c]=i[c+1]=0:(s=i[c]/e[c],o=i[c+1]/e[c],a=Math.pow(s,2)+Math.pow(o,2),a<=9||(r=3/Math.sqrt(a),i[c]=s*r*e[c],i[c+1]=o*r*e[c])))}(t,s,o),function(t,e,i="x"){const n=sc(i),s=t.length;let o,r,a,h=nc(t,0);for(let l=0;l<s;++l){if(r=a,a=h,h=nc(t,l+1),!a)continue;const s=a[i],c=a[n];r&&(o=(s-r[i])/3,a[`cp1${i}`]=s-o,a[`cp1${n}`]=c-o*e[l]),h&&(o=(h[i]-s)/3,a[`cp2${i}`]=s+o,a[`cp2${n}`]=c+o*e[l])}}(t,o,e)}function ac(t,e,i){return Math.max(Math.min(t,i),e)}function hc(t,e,i,n,s){let o,r,a,h;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)rc(t,s);else{let i=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],h=oc(i,a,t[Math.min(o+1,r-(n?0:1))%r],e.tension),a.cp1x=h.previous.x,a.cp1y=h.previous.y,a.cp2x=h.next.x,a.cp2y=h.next.y,i=a}e.capBezierPoints&&function(t,e){let i,n,s,o,r,a=kl(t[0],e);for(i=0,n=t.length;i<n;++i)r=o,o=a,a=i<n-1&&kl(t[i+1],e),o&&(s=t[i],r&&(s.cp1x=ac(s.cp1x,e.left,e.right),s.cp1y=ac(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=ac(s.cp2x,e.left,e.right),s.cp2y=ac(s.cp2y,e.top,e.bottom)))}(t,i)}function lc(){return"undefined"!=typeof window&&"undefined"!=typeof document}function cc(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function uc(t,e,i){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const dc=t=>window.getComputedStyle(t,null);const fc=["top","right","bottom","left"];function pc(t,e,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const o=fc[s];n[o]=parseFloat(t[e+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function gc(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,s=dc(i),o="border-box"===s.boxSizing,r=pc(s,"padding"),a=pc(s,"border","width"),{x:h,y:l,box:c}=function(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:s,offsetY:o}=n;let r,a,h=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(s,o,t.target))r=s,a=o;else{const t=e.getBoundingClientRect();r=n.clientX-t.left,a=n.clientY-t.top,h=!0}return{x:r,y:a,box:h}}(t,i),u=r.left+(c&&a.left),d=r.top+(c&&a.top);let{width:f,height:p}=e;return o&&(f-=r.width+a.width,p-=r.height+a.height),{x:Math.round((h-u)/f*i.width/n),y:Math.round((l-d)/p*i.height/n)}}const mc=t=>Math.round(10*t)/10;function bc(t,e,i,n){const s=dc(t),o=pc(s,"margin"),r=uc(s.maxWidth,t,"clientWidth")||Va,a=uc(s.maxHeight,t,"clientHeight")||Va,h=function(t,e,i){let n,s;if(void 0===e||void 0===i){const o=cc(t);if(o){const t=o.getBoundingClientRect(),r=dc(o),a=pc(r,"border","width"),h=pc(r,"padding");e=t.width-h.width-a.width,i=t.height-h.height-a.height,n=uc(r.maxWidth,o,"clientWidth"),s=uc(r.maxHeight,o,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||Va,maxHeight:s||Va}}(t,e,i);let{width:l,height:c}=h;if("content-box"===s.boxSizing){const t=pc(s,"border","width"),e=pc(s,"padding");l-=e.width+t.width,c-=e.height+t.height}return l=Math.max(0,l-o.width),c=Math.max(0,n?Math.floor(l/n):c-o.height),l=mc(Math.min(l,r,h.maxWidth)),c=mc(Math.min(c,a,h.maxHeight)),l&&!c&&(c=mc(l/2)),{width:l,height:c}}function yc(t,e,i){const n=e||1,s=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=s/n,t.width=o/n;const r=t.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||r.height!==s||r.width!==o)&&(t.currentDevicePixelRatio=n,r.height=s,r.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0)}const vc=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function xc(t,e){const i=function(t,e){return dc(t).getPropertyValue(e)}(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _c(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function wc(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}}function kc(t,e,i,n){const s={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=_c(t,s,i),a=_c(s,o,i),h=_c(o,e,i),l=_c(r,a,i),c=_c(a,h,i);return _c(l,c,i)}const Sc=new Map;function Mc(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Sc.get(i);return n||(n=new Intl.NumberFormat(t,e),Sc.set(i,n)),n}(e,i).format(t)}function Ec(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Tc(t,e){let i,n;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Cc(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ic(t){return"angle"===t?{between:ah,compare:oh,normalize:rh}:{between:lh,compare:(t,e)=>t-e,normalize:t=>t}}function Dc({start:t,end:e,count:i,loop:n,style:s}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i==0,style:s}}function Ac(t,e,i){if(!i)return[t];const{property:n,start:s,end:o}=i,r=e.length,{compare:a,between:h,normalize:l}=Ic(n),{start:c,end:u,loop:d,style:f}=function(t,e,i){const{property:n,start:s,end:o}=i,{between:r,normalize:a}=Ic(n),h=e.length;let l,c,{start:u,end:d,loop:f}=t;if(f){for(u+=h,d+=h,l=0,c=h;l<c&&r(a(e[u%h][n]),s,o);++l)u--,d--;u%=h,d%=h}return d<u&&(d+=h),{start:u,end:d,loop:f,style:t.style}}(t,e,i),p=[];let g,m,b,y=!1,v=null;const x=()=>y||h(s,b,g)&&0!==a(s,b),_=()=>!y||0===a(o,g)||h(o,b,g);for(let t=c,i=c;t<=u;++t)m=e[t%r],m.skip||(g=l(m[n]),g!==b&&(y=h(g,s,o),null===v&&x()&&(v=0===a(g,s)?t:i),null!==v&&_()&&(p.push(Dc({start:v,end:t,loop:d,count:r,style:f})),v=null),i=t,b=g));return null!==v&&p.push(Dc({start:v,end:u,loop:d,count:r,style:f})),p}function Pc(t,e){const i=[],n=t.segments;for(let s=0;s<n.length;s++){const o=Ac(n[s],t.points,e);o.length&&i.push(...o)}return i}function Oc(t,e){const i=t.points,n=t.options.spanGaps,s=i.length;if(!s)return[];const o=!!t._loop,{start:r,end:a}=function(t,e,i,n){let s=0,o=e-1;if(i&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,i&&(o+=s);o>s&&t[o%e].skip;)o--;return o%=e,{start:s,end:o}}(i,s,o,n);if(!0===n)return Lc(t,[{start:r,end:a,loop:o}],i,e);return Lc(t,function(t,e,i,n){const s=t.length,o=[];let r,a=e,h=t[e];for(r=e+1;r<=i;++r){const i=t[r%s];i.skip||i.stop?h.skip||(n=!1,o.push({start:e%s,end:(r-1)%s,loop:n}),e=a=i.stop?r:null):(a=r,h.skip&&(e=r)),h=i}return null!==a&&o.push({start:e%s,end:a%s,loop:n}),o}(i,r,a<r?a+s:a,!!t._fullLoop&&0===r&&a===s-1),i,e)}function Lc(t,e,i,n){return n&&n.setContext&&i?function(t,e,i,n){const s=t._chart.getContext(),o=Rc(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,h=i.length,l=[];let c=o,u=e[0].start,d=u;function f(t,e,n,s){const o=a?-1:1;if(t!==e){for(t+=h;i[t%h].skip;)t-=o;for(;i[e%h].skip;)e+=o;t%h!=e%h&&(l.push({start:t%h,end:e%h,loop:n,style:s}),c=s,u=e%h)}}for(const t of e){u=a?u:t.start;let e,o=i[u%h];for(d=u+1;d<=t.end;d++){const a=i[d%h];e=Rc(n.setContext(Vl(s,{type:"segment",p0:o,p1:a,p0DataIndex:(d-1)%h,p1DataIndex:d%h,datasetIndex:r}))),Nc(e,c)&&f(u,d-1,t.loop,c),o=a,c=e}u<d-1&&f(u,d-1,t.loop,c)}return l}(t,e,i,n):e}function Rc(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Nc(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Fc=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const s=e.listeners[n],o=e.duration;s.forEach((n=>n({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=bh.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,n)=>{if(!i.running||!i.items.length)return;const s=i.items;let o,r=s.length-1,a=!1;for(;r>=0;--r)o=s[r],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),a=!0):(s[r]=s[s.length-1],s.pop());a&&(n.draw(),this._notify(n,i,t,"progress")),s.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=s.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const jc="transparent",zc={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const n=cl(t||jc),s=n.valid&&cl(e||jc);return s&&s.valid?s.mix(n,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class Bc{constructor(t,e,i,n){const s=e[i];n=zl([t.to,n,s,t.from]);const o=zl([t.from,s,n]);this._active=!0,this._fn=t.fn||zc[t.type||typeof o],this._easing=Ch[t.easing]||Ch.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=zl([t.to,e,n,t.from]),this._from=zl([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,s=this._from,o=this._loop,r=this._to;let a;if(this._active=s!==r&&(o||e<i),!this._active)return this._target[n]=r,void this._notify(!0);e<0?this._target[n]=s:(a=e/i%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(s,r,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}ml.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Vc=Object.keys(ml.animation);ml.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),ml.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),ml.describe("animations",{_fallback:"animation"}),ml.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class Hc{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ba(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const n=t[i];if(!ba(n))return;const s={};for(const t of Vc)s[t]=n[t];(ma(n.properties)&&n.properties||[i]).forEach((t=>{t!==i&&e.has(t)||e.set(t,s)}))}))}_animateOptions(t,e){const i=e.options,n=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!n)return[];const s=this._createAnimations(n,i);return i.$shared&&function(t,e){const i=[],n=Object.keys(e);for(let e=0;e<n.length;e++){const s=t[n[e]];s&&s.active()&&i.push(s.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),s}_createAnimations(t,e){const i=this._properties,n=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),r=Date.now();let a;for(a=o.length-1;a>=0;--a){const h=o[a];if("$"===h.charAt(0))continue;if("options"===h){n.push(...this._animateOptions(t,e));continue}const l=e[h];let c=s[h];const u=i.get(h);if(c){if(u&&c.active()){c.update(u,l,r);continue}c.cancel()}u&&u.duration?(s[h]=c=new Bc(u,t,h,l),n.push(c)):t[h]=l}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(Fc.add(this._chart,i),!0):void 0}}function Uc(t,e){const i=t&&t.options||{},n=i.reverse,s=void 0===i.min?e:0,o=void 0===i.max?e:0;return{start:n?o:s,end:n?s:o}}function Wc(t,e){const i=[],n=t._getSortedDatasetMetas(e);let s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function $c(t,e,i,n={}){const s=t.keys,o="single"===n.mode;let r,a,h,l;if(null!==e){for(r=0,a=s.length;r<a;++r){if(h=+s[r],h===i){if(n.all)continue;break}l=t.values[h],ya(l)&&(o||0===e||qa(e)===qa(l))&&(e+=l)}return e}}function Yc(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function qc(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function Xc(t,e,i,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const e=t[s.index];if(i&&e>0||!i&&e<0)return s.index}return null}function Kc(t,e){const{chart:i,_cachedMeta:n}=t,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=n,h=o.axis,l=r.axis,c=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(o,r,n),u=e.length;let d;for(let t=0;t<u;++t){const i=e[t],{[h]:o,[l]:u}=i;d=(i._stacks||(i._stacks={}))[l]=qc(s,c,o),d[a]=u,d._top=Xc(d,r,!0,n.type),d._bottom=Xc(d,r,!1,n.type)}}function Gc(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Jc(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[n]||void 0===e[n][i])return;delete e[n][i]}}}const Qc=t=>"reset"===t||"none"===t,Zc=(t,e)=>e?t:Object.assign({},t);class tu{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Yc(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Jc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,s=e.xAxisID=xa(i.xAxisID,Gc(t,"x")),o=e.yAxisID=xa(i.yAxisID,Gc(t,"y")),r=e.rAxisID=xa(i.rAxisID,Gc(t,"r")),a=e.indexAxis,h=e.iAxisID=n(a,s,o,r),l=e.vAxisID=n(a,o,s,r);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&gh(this._data,this),t._stacked&&Jc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(ba(e))this._data=function(t){const e=Object.keys(t),i=new Array(e.length);let n,s,o;for(n=0,s=e.length;n<s;++n)o=e[n],i[n]={x:o,y:t[o]};return i}(e);else if(i!==e){if(i){gh(i,this);const t=this._cachedMeta;Jc(t),t._parsed=[]}e&&Object.isExtensible(e)&&(s=this,(n=e)._chartjs?n._chartjs.listeners.push(s):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),ph.forEach((t=>{const e="_onData"+Oa(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...t){const s=i.apply(this,t);return n._chartjs.listeners.forEach((i=>{"function"==typeof i[e]&&i[e](...t)})),s}})})))),this._syncList=[],this._data=e}var n,s}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const s=e._stacked;e._stacked=Yc(e.vScale,e),e.stack!==i.stack&&(n=!0,Jc(e),e.stack=i.stack),this._resyncElements(t),(n||s!==e._stacked)&&Kc(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:n}=this,{iScale:s,_stacked:o}=i,r=s.axis;let a,h,l,c=0===t&&e===n.length||i._sorted,u=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=n,i._sorted=!0,l=n;else{l=ma(n[t])?this.parseArrayData(i,n,t,e):ba(n[t])?this.parseObjectData(i,n,t,e):this.parsePrimitiveData(i,n,t,e);const s=()=>null===h[r]||u&&h[r]<u[r];for(a=0;a<e;++a)i._parsed[a+t]=h=l[a],c&&(s()&&(c=!1),u=h);i._sorted=c}o&&Kc(this,l)}parsePrimitiveData(t,e,i,n){const{iScale:s,vScale:o}=t,r=s.axis,a=o.axis,h=s.getLabels(),l=s===o,c=new Array(n);let u,d,f;for(u=0,d=n;u<d;++u)f=u+i,c[u]={[r]:l||s.parse(h[f],f),[a]:o.parse(e[f],f)};return c}parseArrayData(t,e,i,n){const{xScale:s,yScale:o}=t,r=new Array(n);let a,h,l,c;for(a=0,h=n;a<h;++a)l=a+i,c=e[l],r[a]={x:s.parse(c[0],l),y:o.parse(c[1],l)};return r}parseObjectData(t,e,i,n){const{xScale:s,yScale:o}=t,{xAxisKey:r="x",yAxisKey:a="y"}=this._parsing,h=new Array(n);let l,c,u,d;for(l=0,c=n;l<c;++l)u=l+i,d=e[u],h[l]={x:s.parse(Pa(d,r),u),y:o.parse(Pa(d,a),u)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,s=this._cachedMeta,o=e[t.axis];return $c({keys:Wc(n,!0),values:e._stacks[t.axis]},o,s.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const s=i[e.axis];let o=null===s?NaN:s;const r=n&&i._stacks[e.axis];n&&r&&(n.values=r,o=$c(n,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,s=i._sorted&&t===i.iScale,o=n.length,r=this._getOtherScale(t),a=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Wc(i,!0),values:null})(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:c}=function(t){const{min:e,max:i,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}(r);let u,d;function f(){d=n[u];const e=d[r.axis];return!ya(d[t.axis])||l>e||c<e}for(u=0;u<o&&(f()||(this.updateRangeFromParsed(h,t,d,a),!s));++u);if(s)for(u=o-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(h,t,d,a);break}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,s,o;for(n=0,s=e.length;n<s;++n)o=e[n][t.axis],ya(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:n?""+n.getLabelForValue(s[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,n,s;return ba(t)?(e=t.top,i=t.right,n=t.bottom,s=t.left):e=i=n=s=t,{top:e,right:i,bottom:n,left:s,disabled:!1===t}}(xa(this.options.clip,function(t,e,i){if(!1===i)return!1;const n=Uc(t,i),s=Uc(e,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],s=e.chartArea,o=[],r=this._drawStart||0,a=this._drawCount||n.length-r,h=this.options.drawActiveElementsOnTop;let l;for(i.dataset&&i.dataset.draw(t,s,r,a),l=r;l<r+a;++l){const e=n[l];e.hidden||(e.active&&h?o.push(e):e.draw(t,s))}for(l=0;l<o.length;++l)o[l].draw(t,s)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];s=e.$context||(e.$context=function(t,e,i){return Vl(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),s.parsed=this.getParsed(t),s.raw=n.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=function(t,e){return Vl(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=n,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n="active"===e,s=this._cachedDataOpts,o=t+"-"+e,r=s[o],a=this.enableOptionSharing&&La(i);if(r)return Zc(r,a);const h=this.chart.config,l=h.datasetElementScopeKeys(this._type,t),c=n?[`${t}Hover`,"hover",t,""]:[t,""],u=h.getOptionScopes(this.getDataset(),l),d=Object.keys(ml.elements[t]),f=h.resolveNamedOptions(u,d,(()=>this.getContext(i,n)),c);return f.$shared&&(f.$shared=a,s[o]=Object.freeze(Zc(f,a))),f}_resolveAnimations(t,e,i){const n=this.chart,s=this._cachedDataOpts,o=`animation-${e}`,r=s[o];if(r)return r;let a;if(!1!==n.options.animation){const n=this.chart.config,s=n.datasetAnimationScopeKeys(this._type,e),o=n.getOptionScopes(this.getDataset(),s);a=n.createResolver(o,this.getContext(t,i,e))}const h=new Hc(n,a&&a.animations);return a&&a._cacheable&&(s[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Qc(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),n=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(e,s)||s!==n;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:o}}updateElement(t,e,i,n){Qc(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Qc(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const s=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const n=i.length,s=e.length,o=Math.min(s,n);o&&this.parse(0,o),s>n?this._insertElements(n,s-n,t):s<n&&this._removeElements(s,n-s)}_insertElements(t,e,i=!0){const n=this._cachedMeta,s=n.data,o=t+e;let r;const a=t=>{for(t.length+=e,r=t.length-1;r>=o;r--)t[r]=t[r-e]};for(a(s),r=t;r<o;++r)s[r]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&Jc(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function eu(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let e=0,s=i.length;e<s;e++)n=n.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=mh(n.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let n,s,o,r,a=e._length;const h=()=>{32767!==o&&-32768!==o&&(La(r)&&(a=Math.min(a,Math.abs(o-r)||a)),r=o)};for(n=0,s=i.length;n<s;++n)o=e.getPixelForValue(i[n]),h();for(r=void 0,n=0,s=e.ticks.length;n<s;++n)o=e.getPixelForTick(n),h();return a}function iu(t,e,i,n){return ma(t)?function(t,e,i,n){const s=i.parse(t[0],n),o=i.parse(t[1],n),r=Math.min(s,o),a=Math.max(s,o);let h=r,l=a;Math.abs(r)>Math.abs(a)&&(h=a,l=r),e[i.axis]=l,e._custom={barStart:h,barEnd:l,start:s,end:o,min:r,max:a}}(t,e,i,n):e[i.axis]=i.parse(t,n),e}function nu(t,e,i,n){const s=t.iScale,o=t.vScale,r=s.getLabels(),a=s===o,h=[];let l,c,u,d;for(l=i,c=i+n;l<c;++l)d=e[l],u={},u[s.axis]=a||s.parse(r[l],l),h.push(iu(d,u,o,l));return h}function su(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function ou(t,e,i,n){let s=e.borderSkipped;const o={};if(!s)return void(t.borderSkipped=o);if(!0===s)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:r,end:a,reverse:h,top:l,bottom:c}=function(t){let e,i,n,s,o;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(s="end",o="start"):(s="start",o="end"),{start:i,end:n,reverse:e,top:s,bottom:o}}(t);"middle"===s&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?s=l:(i._bottom||0)===n?s=c:(o[ru(c,r,a,h)]=!0,s=l)),o[ru(s,r,a,h)]=!0,t.borderSkipped=o}function ru(t,e,i,n){var s,o,r;return n?(r=i,t=au(t=(s=t)===(o=e)?r:s===r?o:s,i,e)):t=au(t,e,i),t}function au(t,e,i){return"start"===t?e:"end"===t?i:t}function hu(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}tu.defaults={},tu.prototype.datasetElementType=null,tu.prototype.dataElementType=null;class lu extends tu{parsePrimitiveData(t,e,i,n){return nu(t,e,i,n)}parseArrayData(t,e,i,n){return nu(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:s,vScale:o}=t,{xAxisKey:r="x",yAxisKey:a="y"}=this._parsing,h="x"===s.axis?r:a,l="x"===o.axis?r:a,c=[];let u,d,f,p;for(u=i,d=i+n;u<d;++u)p=e[u],f={},f[s.axis]=s.parse(Pa(p,h),u),c.push(iu(Pa(p,l),f,o,u));return c}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,s=this.getParsed(t),o=s._custom,r=su(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(s[n.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const s="reset"===n,{index:o,_cachedMeta:{vScale:r}}=this,a=r.getBasePixel(),h=r.isHorizontal(),l=this._getRuler(),{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,n);for(let d=e;d<e+i;d++){const e=this.getParsed(d),i=s||ga(e[r.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,l),p=(e._stacks||{})[r.axis],g={horizontal:h,base:i.base,enableBorderRadius:!p||su(e._custom)||o===p._top||o===p._bottom,x:h?i.head:f.center,y:h?f.center:i.head,height:h?f.size:Math.abs(i.size),width:h?Math.abs(i.size):f.size};u&&(g.options=c||this.resolveDataElementOptions(d,t[d].active?"active":n));const m=g.options||t[d].options;ou(g,m,p,o),hu(g,m,l.ratio),this.updateElement(t[d],d,g,n)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),s=i.options.stacked,o=[],r=t=>{const i=t.controller.getParsed(e),n=i&&i[t.vScale.axis];if(ga(n)||isNaN(n))return!0};for(const i of n)if((void 0===e||!r(i))&&((!1===s||-1===o.indexOf(i.stack)||void 0===s&&void 0===i.stack)&&o.push(i.stack),i.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),s=void 0!==e?n.indexOf(e):-1;return-1===s?n.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[];let s,o;for(s=0,o=e.data.length;s<o;++s)n.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const r=t.barThickness;return{min:r||eu(e),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:r?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i},options:{base:n,minBarLength:s}}=this,o=n||0,r=this.getParsed(t),a=r._custom,h=su(a);let l,c,u=r[e.axis],d=0,f=i?this.applyStack(e,r,i):u;f!==u&&(d=f-u,f=u),h&&(u=a.barStart,f=a.barEnd-a.barStart,0!==u&&qa(u)!==qa(a.barEnd)&&(d=0),d+=u);const p=ga(n)||h?d:n;let g=e.getPixelForValue(p);if(l=this.chart.getDataVisibility(t)?e.getPixelForValue(d+f):g,c=l-g,Math.abs(c)<s){c=function(t,e,i){return 0!==t?qa(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(c,e,o)*s,u===o&&(g-=c/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),n=Math.min(t,i),r=Math.max(t,i);g=Math.max(Math.min(g,r),n),l=g+c}if(g===e.getPixelForValue(o)){const t=qa(c)*e.getLineWidthForValue(o)/2;g+=t,c-=t}return{size:c,base:g,head:l,center:l+c/2}}_calculateBarIndexPixels(t,e){const i=e.scale,n=this.options,s=n.skipNull,o=xa(n.maxBarThickness,1/0);let r,a;if(e.grouped){const i=s?this._getStackCount(t):e.stackCount,h="flex"===n.barThickness?function(t,e,i,n){const s=e.pixels,o=s[t];let r=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const h=i.categoryPercentage;null===r&&(r=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-r);const l=o-(o-Math.min(r,a))/2*h;return{chunk:Math.abs(a-r)/2*h/n,ratio:i.barPercentage,start:l}}(t,e,n,i):function(t,e,i,n){const s=i.barThickness;let o,r;return ga(s)?(o=e.min*i.categoryPercentage,r=i.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:e.pixels[t]-o/2}}(t,e,n,i),l=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);r=h.start+h.chunk*l+h.chunk/2,a=Math.min(o,h.chunk*h.ratio)}else r=i.getPixelForValue(this.getParsed(t)[i.axis],t),a=Math.min(o,e.min*e.ratio);return{base:r-a/2,head:r+a/2,center:r,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length;let s=0;for(;s<n;++s)null!==this.getParsed(s)[e.axis]&&i[s].draw(this._ctx)}}lu.id="bar",lu.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},lu.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class cu extends tu{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,n){const s=super.parsePrimitiveData(t,e,i,n);for(let t=0;t<s.length;t++)s[t]._custom=this.resolveDataElementOptions(t+i).radius;return s}parseArrayData(t,e,i,n){const s=super.parseArrayData(t,e,i,n);for(let t=0;t<s.length;t++){const n=e[i+t];s[t]._custom=xa(n[2],this.resolveDataElementOptions(t+i).radius)}return s}parseObjectData(t,e,i,n){const s=super.parseObjectData(t,e,i,n);for(let t=0;t<s.length;t++){const n=e[i+t];s[t]._custom=xa(n&&n.r&&+n.r,this.resolveDataElementOptions(t+i).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:n}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),r=n.getLabelForValue(s.y),a=s._custom;return{label:e.label,value:"("+o+", "+r+(a?", "+a:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const s="reset"===n,{iScale:o,vScale:r}=this._cachedMeta,{sharedOptions:a,includeOptions:h}=this._getSharedOptions(e,n),l=o.axis,c=r.axis;for(let u=e;u<e+i;u++){const e=t[u],i=!s&&this.getParsed(u),d={},f=d[l]=s?o.getPixelForDecimal(.5):o.getPixelForValue(i[l]),p=d[c]=s?r.getBasePixel():r.getPixelForValue(i[c]);d.skip=isNaN(f)||isNaN(p),h&&(d.options=a||this.resolveDataElementOptions(u,e.active?"active":n),s&&(d.options.radius=0)),this.updateElement(e,u,d,n)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const s=n.radius;return"active"!==e&&(n.radius=0),n.radius+=xa(i&&i._custom,s),n}}cu.id="bubble",cu.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},cu.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class uu extends tu{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=i;else{let s,o,r=t=>+i[t];if(ba(i[t])){const{key:t="value"}=this._parsing;r=e=>+Pa(i[e],t)}for(s=t,o=t+e;s<o;++s)n._parsed[s]=r(s)}}_getRotation(){return th(this.options.rotation-90)}_getCircumference(){return th(this.options.circumference)}_getRotationExtents(){let t=za,e=-za;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const n=this.chart.getDatasetMeta(i).controller,s=n._getRotation(),o=n._getCircumference();t=Math.min(t,s),e=Math.max(e,s+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,n=this._cachedMeta,s=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-o)/2,0),a=Math.min((h=this.options.cutout,l=r,"string"==typeof h&&h.endsWith("%")?parseFloat(h)/100:h/l),1);var h,l;const c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,i){let n=1,s=1,o=0,r=0;if(e<za){const a=t,h=a+e,l=Math.cos(a),c=Math.sin(a),u=Math.cos(h),d=Math.sin(h),f=(t,e,n)=>ah(t,a,h,!0)?1:Math.max(e,e*i,n,n*i),p=(t,e,n)=>ah(t,a,h,!0)?-1:Math.min(e,e*i,n,n*i),g=f(0,l,u),m=f(Ua,c,d),b=p(ja,l,u),y=p(ja+Ua,c,d);n=(g-b)/2,s=(m-y)/2,o=-(g+b)/2,r=-(m+y)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}(d,u,a),b=(i.width-o)/f,y=(i.height-o)/p,v=Math.max(Math.min(b,y)/2,0),x=_a(this.options.radius,v),_=(x-Math.max(x*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,n.total=this.calculateTotal(),this.outerRadius=x-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const i=this.options,n=this._cachedMeta,s=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===n._parsed[t]||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*s/za)}updateElements(t,e,i,n){const s="reset"===n,o=this.chart,r=o.chartArea,a=o.options.animation,h=(r.left+r.right)/2,l=(r.top+r.bottom)/2,c=s&&a.animateScale,u=c?0:this.innerRadius,d=c?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,n);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,s);for(g=e;g<e+i;++g){const e=this._circumference(g,s),i=t[g],o={x:h+this.offsetX,y:l+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:u};p&&(o.options=f||this.resolveDataElementOptions(g,i.active?"active":n)),m+=e,this.updateElement(i,g,o,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,n=0;for(i=0;i<e.length;i++){const s=t._parsed[i];null===s||isNaN(s)||!this.chart.getDataVisibility(i)||e[i].hidden||(n+=Math.abs(s))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?za*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],s=Mc(e._parsed[t],i.options.locale);return{label:n[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const i=this.chart;let n,s,o,r,a;if(!t)for(n=0,s=i.data.datasets.length;n<s;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),t=o.data,r=o.controller;break}if(!t)return 0;for(n=0,s=t.length;n<s;++n)a=r.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(xa(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}uu.id="doughnut",uu.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},uu.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},uu.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const s=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const i=": "+t.formattedValue;return ma(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}};class du extends tu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:n=[],_dataset:s}=e,o=this.chart._animationsDisabled;let{start:r,count:a}=kh(e,n,o);this._drawStart=r,this._drawCount=a,Sh(e)&&(r=0,a=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:h},t),this.updateElements(n,r,a,t)}updateElements(t,e,i,n){const s="reset"===n,{iScale:o,vScale:r,_stacked:a,_dataset:h}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,n),u=o.axis,d=r.axis,{spanGaps:f,segment:p}=this.options,g=Ga(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===n;let b=e>0&&this.getParsed(e-1);for(let f=e;f<e+i;++f){const e=t[f],i=this.getParsed(f),y=m?e:{},v=ga(i[d]),x=y[u]=o.getPixelForValue(i[u],f),_=y[d]=s||v?r.getBasePixel():r.getPixelForValue(a?this.applyStack(r,i,a):i[d],f);y.skip=isNaN(x)||isNaN(_)||v,y.stop=f>0&&Math.abs(i[u]-b[u])>g,p&&(y.parsed=i,y.raw=h.data[f]),c&&(y.options=l||this.resolveDataElementOptions(f,e.active?"active":n)),m||this.updateElement(e,f,y,n),b=i}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}du.id="line",du.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},du.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class fu extends tu{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],s=Mc(e._parsed[t].r,i.options.locale);return{label:n[t]||"",value:s}}parseObjectData(t,e,i,n){return ec.bind(this)(t,e,i,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,i)=>{const n=this.getParsed(i).r;!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<e.min&&(e.min=n),n>e.max&&(e.max=n))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(n/2,0),o=(s-Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=s-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,i,n){const s="reset"===n,o=this.chart,r=o.options.animation,a=this._cachedMeta.rScale,h=a.xCenter,l=a.yCenter,c=a.getIndexAngle(0)-.5*ja;let u,d=c;const f=360/this.countVisibleElements();for(u=0;u<e;++u)d+=this._computeAngle(u,n,f);for(u=e;u<e+i;u++){const e=t[u];let i=d,p=d+this._computeAngle(u,n,f),g=o.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;d=p,s&&(r.animateScale&&(g=0),r.animateRotate&&(i=p=c));const m={x:h,y:l,innerRadius:0,outerRadius:g,startAngle:i,endAngle:p,options:this.resolveDataElementOptions(u,e.active?"active":n)};this.updateElement(e,u,m,n)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++})),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?th(this.resolveDataElementOptions(t,e).angle||i):0}}fu.id="polarArea",fu.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},fu.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const s=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class pu extends uu{}pu.id="pie",pu.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class gu extends tu{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,n){return ec.bind(this)(t,e,i,n)}update(t){const e=this._cachedMeta,i=e.dataset,n=e.data||[],s=e.iScale.getLabels();if(i.points=n,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:s.length===n.length,options:e};this.updateElement(i,void 0,o,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,i,n){const s=this._cachedMeta.rScale,o="reset"===n;for(let r=e;r<e+i;r++){const e=t[r],i=this.resolveDataElementOptions(r,e.active?"active":n),a=s.getPointPositionForValue(r,this.getParsed(r).r),h=o?s.xCenter:a.x,l=o?s.yCenter:a.y,c={x:h,y:l,angle:a.angle,skip:isNaN(h)||isNaN(l),options:i};this.updateElement(e,r,c,n)}}}gu.id="radar",gu.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},gu.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class mu{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Ga(this.x)&&Ga(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach((t=>{n[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),n}}mu.defaults={},mu.defaultRoutes=void 0;const bu={values:t=>ma(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const n=this.chart.options.locale;let s,o=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(s="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const r=Ya(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),h={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(h,this.options.ticks.format),Mc(t,n,h)},logarithmic(t,e,i){if(0===t)return"0";const n=t/Math.pow(10,Math.floor(Ya(t)));return 1===n||2===n||5===n?bu.numeric.call(this,t,e,i):""}};var yu={formatters:bu};function vu(t,e){const i=t.options.ticks,n=i.maxTicksLimit||function(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),s=t._maxLength/i;return Math.floor(Math.min(n,s))}(t),s=i.major.enabled?function(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}(e):[],o=s.length,r=s[0],a=s[o-1],h=[];if(o>n)return function(t,e,i,n){let s,o=0,r=i[0];for(n=Math.ceil(n),s=0;s<t.length;s++)s===r&&(e.push(t[s]),o++,r=i[o*n])}(e,h,s,o/n),h;const l=function(t,e,i){const n=function(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}(t),s=e.length/i;if(!n)return Math.max(s,1);const o=Ka(n);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>s)return e}return Math.max(s,1)}(s,e,n);if(o>0){let t,i;const n=o>1?Math.round((a-r)/(o-1)):null;for(xu(e,h,l,ga(n)?0:r-n,r),t=0,i=o-1;t<i;t++)xu(e,h,l,s[t],s[t+1]);return xu(e,h,l,a,ga(n)?e.length:a+n),h}return xu(e,h,l),h}function xu(t,e,i,n,s){const o=xa(n,0),r=Math.min(xa(s,t.length),t.length);let a,h,l,c=0;for(i=Math.ceil(i),s&&(a=s-n,i=a/Math.floor(a/i)),l=o;l<0;)c++,l=Math.round(o+c*i);for(h=Math.max(o,0);h<r;h++)h===l&&(e.push(t[h]),c++,l=Math.round(o+c*i))}ml.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:yu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),ml.route("scale.ticks","color","","color"),ml.route("scale.grid","color","","borderColor"),ml.route("scale.grid","borderColor","","borderColor"),ml.route("scale.title","color","","color"),ml.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),ml.describe("scales",{_fallback:"scale"}),ml.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const _u=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function wu(t,e){const i=[],n=t.length/e,s=t.length;let o=0;for(;o<s;o+=n)i.push(t[Math.floor(o)]);return i}function ku(t,e,i){const n=t.ticks.length,s=Math.min(e,n-1),o=t._startPixel,r=t._endPixel,a=1e-6;let h,l=t.getPixelForTick(s);if(!(i&&(h=1===n?Math.max(l-o,r-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(s-1))/2,l+=s<e?h:-h,l<o-a||l>r+a)))return l}function Su(t){return t.drawTicks?t.tickLength:0}function Mu(t,e){if(!t.display)return 0;const i=jl(t.font,e),n=Fl(t.padding);return(ma(t.text)?t.text.length:1)*i.lineHeight+n.height}function Eu(t,e,i){let n=xh(t);return(i&&"right"!==e||!i&&"right"===e)&&(n=(t=>"left"===t?"right":"right"===t?"left":t)(n)),n}class Tu extends mu{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=va(t,Number.POSITIVE_INFINITY),e=va(e,Number.NEGATIVE_INFINITY),i=va(i,Number.POSITIVE_INFINITY),n=va(n,Number.NEGATIVE_INFINITY),{min:va(t,i),max:va(e,n),minDefined:ya(t),maxDefined:ya(e)}}getMinMax(t){let e,{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds();if(s&&o)return{min:i,max:n};const r=this.getMatchingVisibleMetas();for(let a=0,h=r.length;a<h;++a)e=r[a].controller.getMinMax(this,t),s||(i=Math.min(i,e.min)),o||(n=Math.max(n,e.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:va(i,va(n,i)),max:va(n,va(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wa(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:s,ticks:o}=this.options,r=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Bl(this,s,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=r<this.ticks.length;this._convertTicksToLabels(a?wu(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=vu(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wa(this.options.afterUpdate,[this])}beforeSetDimensions(){wa(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wa(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),wa(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wa(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,s;for(i=0,n=t.length;i<n;i++)s=t[i],s.label=wa(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){wa(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wa(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,n=e.minRotation||0,s=e.maxRotation;let o,r,a,h=n;if(!this._isVisible()||!e.display||n>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const l=this._getLabelSizes(),c=l.widest.width,u=l.highest.height,d=hh(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/i:d/(i-1),c+6>o&&(o=d/(i-(t.offset?.5:1)),r=this.maxHeight-Su(t.grid)-e.padding-Mu(t.title,this.chart.options.font),a=Math.sqrt(c*c+u*u),h=eh(Math.min(Math.asin(hh((l.highest.height+6)/o,-1,1)),Math.asin(hh(r/a,-1,1))-Math.asin(hh(u/a,-1,1)))),h=Math.max(n,Math.min(s,h))),this.labelRotation=h}afterCalculateLabelRotation(){wa(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wa(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:s}}=this,o=this._isVisible(),r=this.isHorizontal();if(o){const o=Mu(n,e.options.font);if(r?(t.width=this.maxWidth,t.height=Su(s)+o):(t.height=this.maxHeight,t.width=Su(s)+o),i.display&&this.ticks.length){const{first:e,last:n,widest:s,highest:o}=this._getLabelSizes(),a=2*i.padding,h=th(this.labelRotation),l=Math.cos(h),c=Math.sin(h);if(r){const e=i.mirror?0:c*s.width+l*o.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=i.mirror?0:l*s.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,n,c,l)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:s,padding:o},position:r}=this.options,a=0!==this.labelRotation,h="top"!==r&&"x"===this.axis;if(this.isHorizontal()){const r=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,u=0;a?h?(c=n*t.width,u=i*e.height):(c=i*t.height,u=n*e.width):"start"===s?u=e.width:"end"===s?c=t.width:"inner"!==s&&(c=t.width/2,u=e.width/2),this.paddingLeft=Math.max((c-r+o)*this.width/(this.width-r),0),this.paddingRight=Math.max((u-l+o)*this.width/(this.width-l),0)}else{let i=e.height/2,n=t.height/2;"start"===s?(i=0,n=t.height):"end"===s&&(i=e.height,n=0),this.paddingTop=i+o,this.paddingBottom=n+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wa(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)ga(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=wu(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:n}=this,s=[],o=[];let r,a,h,l,c,u,d,f,p,g,m,b=0,y=0;for(r=0;r<e;++r){if(l=t[r].label,c=this._resolveTickFontOptions(r),i.font=u=c.string,d=n[u]=n[u]||{data:{},gc:[]},f=c.lineHeight,p=g=0,ga(l)||ma(l)){if(ma(l))for(a=0,h=l.length;a<h;++a)m=l[a],ga(m)||ma(m)||(p=bl(i,d.data,d.gc,p,m),g+=f)}else p=bl(i,d.data,d.gc,p,l),g=f;s.push(p),o.push(g),b=Math.max(p,b),y=Math.max(g,y)}!function(t,e){ka(t,(t=>{const i=t.gc,n=i.length/2;let s;if(n>e){for(s=0;s<n;++s)delete t.data[i[s]];i.splice(0,n)}}))}(n,e);const v=s.indexOf(b),x=o.indexOf(y),_=t=>({width:s[t]||0,height:o[t]||0});return{first:_(0),last:_(e-1),widest:_(v),highest:_(x),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return hh(this._alignToPixels?vl(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return Vl(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=Vl(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=th(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,r=s?s.widest.width+o:0,a=s?s.highest.height+o:0;return this.isHorizontal()?a*i>r*n?r/i:a/n:a*n<r*i?a/i:r/n}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:s,position:o}=n,r=s.offset,a=this.isHorizontal(),h=this.ticks.length+(r?1:0),l=Su(s),c=[],u=s.setContext(this.getContext()),d=u.drawBorder?u.borderWidth:0,f=d/2,p=function(t){return vl(i,t,d)};let g,m,b,y,v,x,_,w,k,S,M,E;if("top"===o)g=p(this.bottom),x=this.bottom-l,w=g-f,S=p(t.top)+f,E=t.bottom;else if("bottom"===o)g=p(this.top),S=t.top,E=p(t.bottom)-f,x=g+f,w=this.top+l;else if("left"===o)g=p(this.right),v=this.right-l,_=g-f,k=p(t.left)+f,M=t.right;else if("right"===o)g=p(this.left),k=t.left,M=p(t.right)-f,v=g+f,_=this.left+l;else if("x"===e){if("center"===o)g=p((t.top+t.bottom)/2+.5);else if(ba(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}S=t.top,E=t.bottom,x=g+f,w=x+l}else if("y"===e){if("center"===o)g=p((t.left+t.right)/2);else if(ba(o)){const t=Object.keys(o)[0],e=o[t];g=p(this.chart.scales[t].getPixelForValue(e))}v=g-f,_=v-l,k=t.left,M=t.right}const T=xa(n.ticks.maxTicksLimit,h),C=Math.max(1,Math.ceil(h/T));for(m=0;m<h;m+=C){const t=s.setContext(this.getContext(m)),e=t.lineWidth,n=t.color,o=t.borderDash||[],h=t.borderDashOffset,l=t.tickWidth,u=t.tickColor,d=t.tickBorderDash||[],f=t.tickBorderDashOffset;b=ku(this,m,r),void 0!==b&&(y=vl(i,b,e),a?v=_=k=M=y:x=w=S=E=y,c.push({tx1:v,ty1:x,tx2:_,ty2:w,x1:k,y1:S,x2:M,y2:E,width:e,color:n,borderDash:o,borderDashOffset:h,tickWidth:l,tickColor:u,tickBorderDash:d,tickBorderDashOffset:f}))}return this._ticksLength=h,this._borderValue=g,c}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:s}=i,o=this.isHorizontal(),r=this.ticks,{align:a,crossAlign:h,padding:l,mirror:c}=s,u=Su(i.grid),d=u+l,f=c?-l:d,p=-th(this.labelRotation),g=[];let m,b,y,v,x,_,w,k,S,M,E,T,C="middle";if("top"===n)_=this.bottom-f,w=this._getXAxisLabelAlignment();else if("bottom"===n)_=this.top+f,w=this._getXAxisLabelAlignment();else if("left"===n){const t=this._getYAxisLabelAlignment(u);w=t.textAlign,x=t.x}else if("right"===n){const t=this._getYAxisLabelAlignment(u);w=t.textAlign,x=t.x}else if("x"===e){if("center"===n)_=(t.top+t.bottom)/2+d;else if(ba(n)){const t=Object.keys(n)[0],e=n[t];_=this.chart.scales[t].getPixelForValue(e)+d}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===n)x=(t.left+t.right)/2-d;else if(ba(n)){const t=Object.keys(n)[0],e=n[t];x=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===a?C="top":"end"===a&&(C="bottom"));const I=this._getLabelSizes();for(m=0,b=r.length;m<b;++m){y=r[m],v=y.label;const t=s.setContext(this.getContext(m));k=this.getPixelForTick(m)+s.labelOffset,S=this._resolveTickFontOptions(m),M=S.lineHeight,E=ma(v)?v.length:1;const e=E/2,i=t.color,a=t.textStrokeColor,l=t.textStrokeWidth;let u,d=w;if(o?(x=k,"inner"===w&&(d=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===n?"near"===h||0!==p?-E*M+M/2:"center"===h?-I.highest.height/2-e*M+M:-I.highest.height+M/2:"near"===h||0!==p?M/2:"center"===h?I.highest.height/2-e*M:I.highest.height-E*M,c&&(T*=-1)):(_=k,T=(1-E)*M/2),t.showLabelBackdrop){const e=Fl(t.backdropPadding),i=I.heights[m],n=I.widths[m];let s=_+T-e.top,o=x-e.left;switch(C){case"middle":s-=i/2;break;case"bottom":s-=i}switch(w){case"center":o-=n/2;break;case"right":o-=n}u={left:o,top:s,width:n+e.width,height:i+e.height,color:t.backdropColor}}g.push({rotation:p,label:v,font:S,color:i,strokeColor:a,strokeWidth:l,textOffset:T,textAlign:d,textBaseline:C,translation:[x,_],backdrop:u})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-th(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:s}}=this.options,o=t+s,r=this._getLabelSizes().widest.width;let a,h;return"left"===e?n?(h=this.right+s,"near"===i?a="left":"center"===i?(a="center",h+=r/2):(a="right",h+=r)):(h=this.right-o,"near"===i?a="right":"center"===i?(a="center",h-=r/2):(a="left",h=this.left)):"right"===e?n?(h=this.left+s,"near"===i?a="right":"center"===i?(a="center",h-=r/2):(a="left",h-=r)):(h=this.left+o,"near"===i?a="left":"center"===i?(a="center",h+=r/2):(a="right",h=this.right)):a="right",{textAlign:a,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));if(i>=0){return e.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const r=(t,e,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=n.length;s<o;++s){const t=n[s];e.drawOnChartArea&&r({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&r({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:i}}=this,n=i.setContext(this.getContext()),s=i.drawBorder?n.borderWidth:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,r=this._borderValue;let a,h,l,c;this.isHorizontal()?(a=vl(t,this.left,s)-s/2,h=vl(t,this.right,o)+o/2,l=c=r):(l=vl(t,this.top,s)-s/2,c=vl(t,this.bottom,o)+o/2,a=h=r),e.save(),e.lineWidth=n.borderWidth,e.strokeStyle=n.borderColor,e.beginPath(),e.moveTo(a,l),e.lineTo(h,c),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&Sl(e,i);const n=this._labelItems||(this._labelItems=this._computeLabelItems(t));let s,o;for(s=0,o=n.length;s<o;++s){const t=n[s],i=t.font,o=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Cl(e,o,0,t.textOffset,i,t)}i&&Ml(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const s=jl(i.font),o=Fl(i.padding),r=i.align;let a=s.lineHeight/2;"bottom"===e||"center"===e||ba(e)?(a+=o.bottom,ma(i.text)&&(a+=s.lineHeight*(i.text.length-1))):a+=o.top;const{titleX:h,titleY:l,maxWidth:c,rotation:u}=function(t,e,i,n){const{top:s,left:o,bottom:r,right:a,chart:h}=t,{chartArea:l,scales:c}=h;let u,d,f,p=0;const g=r-s,m=a-o;if(t.isHorizontal()){if(d=_h(n,o,a),ba(i)){const t=Object.keys(i)[0],n=i[t];f=c[t].getPixelForValue(n)+g-e}else f="center"===i?(l.bottom+l.top)/2+g-e:_u(t,i,e);u=a-o}else{if(ba(i)){const t=Object.keys(i)[0],n=i[t];d=c[t].getPixelForValue(n)-m+e}else d="center"===i?(l.left+l.right)/2-m+e:_u(t,i,e);f=_h(n,r,s),p="left"===i?-Ua:Ua}return{titleX:d,titleY:f,maxWidth:u,rotation:p}}(this,a,e,r);Cl(t,i.text,0,0,s,{color:i.color,maxWidth:c,rotation:u,textAlign:Eu(r,e,n),textBaseline:"middle",translation:[h,l]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=xa(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Tu.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let s,o;for(s=0,o=e.length;s<o;++s){const o=e[s];o[i]!==this.id||t&&o.type!==t||n.push(o)}return n}_resolveTickFontOptions(t){return jl(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Cu{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const n=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in n||(n[s]=t,function(t,e,i){const n=Ca(Object.create(null),[i?ml.get(i):{},ml.get(e),t.defaults]);ml.set(e,n),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const n=i.split("."),s=n.pop(),o=[t].concat(n).join("."),r=e[i].split("."),a=r.pop(),h=r.join(".");ml.route(o,s,h,a)}))}(e,t.defaultRoutes);t.descriptors&&ml.describe(e,t.descriptors)}(t,o,i),this.override&&ml.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in ml[n]&&(delete ml[n][i],this.override&&delete dl[i])}}var Iu=new class{constructor(){this.controllers=new Cu(tu,"datasets",!0),this.elements=new Cu(mu,"elements"),this.plugins=new Cu(Object,"plugins"),this.scales=new Cu(Tu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const n=i||this._getRegistryForType(e);i||n.isForType(e)||n===this.plugins&&e.id?this._exec(t,n,e):ka(e,(e=>{const n=i||this._getRegistryForType(e);this._exec(t,n,e)}))}))}_exec(t,e,i){const n=Oa(t);wa(i["before"+n],[],i),e[t](i),wa(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}};class Du extends tu{update(t){const e=this._cachedMeta,{data:i=[]}=e,n=this.chart._animationsDisabled;let{start:s,count:o}=kh(e,i,n);if(this._drawStart=s,this._drawCount=o,Sh(e)&&(s=0,o=i.length),this.options.showLine){const{dataset:s,_dataset:o}=e;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=i;const r=this.resolveDatasetElementOptions(t);r.segment=this.options.segment,this.updateElement(s,void 0,{animated:!n,options:r},t)}this.updateElements(i,s,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=Iu.getElement("line")),super.addElements()}updateElements(t,e,i,n){const s="reset"===n,{iScale:o,vScale:r,_stacked:a,_dataset:h}=this._cachedMeta,l=this.resolveDataElementOptions(e,n),c=this.getSharedOptions(l),u=this.includeOptions(n,c),d=o.axis,f=r.axis,{spanGaps:p,segment:g}=this.options,m=Ga(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||"none"===n;let y=e>0&&this.getParsed(e-1);for(let l=e;l<e+i;++l){const e=t[l],i=this.getParsed(l),p=b?e:{},v=ga(i[f]),x=p[d]=o.getPixelForValue(i[d],l),_=p[f]=s||v?r.getBasePixel():r.getPixelForValue(a?this.applyStack(r,i,a):i[f],l);p.skip=isNaN(x)||isNaN(_)||v,p.stop=l>0&&Math.abs(i[d]-y[d])>m,g&&(p.parsed=i,p.raw=h.data[l]),u&&(p.options=c||this.resolveDataElementOptions(l,e.active?"active":n)),b||this.updateElement(e,l,p,n),y=i}this.updateSharedOptions(c,n,l)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}const i=t.dataset,n=i.options&&i.options.borderWidth||0;if(!e.length)return n;const s=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,s,o)/2}}Du.id="scatter",Du.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},Du.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Au=Object.freeze({__proto__:null,BarController:lu,BubbleController:cu,DoughnutController:uu,LineController:du,PolarAreaController:fu,PieController:pu,RadarController:gu,ScatterController:Du});function Pu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ou{constructor(t){this.options=t||{}}init(t){}formats(){return Pu()}parse(t,e){return Pu()}format(t,e){return Pu()}add(t,e,i){return Pu()}diff(t,e,i){return Pu()}startOf(t,e,i){return Pu()}endOf(t,e){return Pu()}}Ou.override=function(t){Object.assign(Ou.prototype,t)};var Lu={_date:Ou};function Ru(t,e,i,n){const{controller:s,data:o,_sorted:r}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&r&&o.length){const t=a._reversePixels?dh:uh;if(!n)return t(o,e,i);if(s._sharedOptions){const n=o[0],s="function"==typeof n.getRange&&n.getRange(e);if(s){const n=t(o,e,i-s),r=t(o,e,i+s);return{lo:n.lo,hi:r.hi}}}}return{lo:0,hi:o.length-1}}function Nu(t,e,i,n,s){const o=t.getSortedVisibleDatasetMetas(),r=i[e];for(let t=0,i=o.length;t<i;++t){const{index:i,data:a}=o[t],{lo:h,hi:l}=Ru(o[t],e,r,s);for(let t=h;t<=l;++t){const e=a[t];e.skip||n(e,i,t)}}}function Fu(t,e,i,n,s){const o=[];if(!s&&!t.isPointInArea(e))return o;return Nu(t,i,e,(function(i,r,a){(s||kl(i,t.chartArea,0))&&i.inRange(e.x,e.y,n)&&o.push({element:i,datasetIndex:r,index:a})}),!0),o}function ju(t,e,i,n,s,o){let r=[];const a=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){const s=e?Math.abs(t.x-n.x):0,o=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(i);let h=Number.POSITIVE_INFINITY;return Nu(t,i,e,(function(i,l,c){const u=i.inRange(e.x,e.y,s);if(n&&!u)return;const d=i.getCenterPoint(s);if(!(!!o||t.isPointInArea(d))&&!u)return;const f=a(e,d);f<h?(r=[{element:i,datasetIndex:l,index:c}],h=f):f===h&&r.push({element:i,datasetIndex:l,index:c})})),r}function zu(t,e,i,n,s,o){return o||t.isPointInArea(e)?"r"!==i||n?ju(t,e,i,n,s,o):function(t,e,i,n){let s=[];return Nu(t,i,e,(function(t,i,o){const{startAngle:r,endAngle:a}=t.getProps(["startAngle","endAngle"],n),{angle:h}=nh(t,{x:e.x,y:e.y});ah(h,r,a)&&s.push({element:t,datasetIndex:i,index:o})})),s}(t,e,i,s):[]}function Bu(t,e,i,n,s){const o=[],r="x"===i?"inXRange":"inYRange";let a=!1;return Nu(t,i,e,((t,n,h)=>{t[r](e[i],s)&&(o.push({element:t,datasetIndex:n,index:h}),a=a||t.inRange(e.x,e.y,s))})),n&&!a?[]:o}var Vu={evaluateInteractionItems:Nu,modes:{index(t,e,i,n){const s=gc(e,t),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?Fu(t,s,o,n,r):zu(t,s,o,!1,n,r),h=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,i=t.data[e];i&&!i.skip&&h.push({element:i,datasetIndex:t.index,index:e})})),h):[]},dataset(t,e,i,n){const s=gc(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?Fu(t,s,o,n,r):zu(t,s,o,!1,n,r);if(a.length>0){const e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point:(t,e,i,n)=>Fu(t,gc(e,t),i.axis||"xy",n,i.includeInvisible||!1),nearest(t,e,i,n){const s=gc(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return zu(t,s,o,i.intersect,n,r)},x:(t,e,i,n)=>Bu(t,gc(e,t),"x",i.intersect,n),y:(t,e,i,n)=>Bu(t,gc(e,t),"y",i.intersect,n)}};const Hu=["left","top","right","bottom"];function Uu(t,e){return t.filter((t=>t.pos===e))}function Wu(t,e){return t.filter((t=>-1===Hu.indexOf(t.pos)&&t.box.axis===e))}function $u(t,e){return t.sort(((t,i)=>{const n=e?i:t,s=e?t:i;return n.weight===s.weight?n.index-s.index:n.weight-s.weight}))}function Yu(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:n,stackWeight:s}=i;if(!t||!Hu.includes(n))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];const{fullSize:r}=a.box,h=i[a.stack],l=h&&a.stackWeight/h.weight;a.horizontal?(a.width=l?l*n:r&&e.availableWidth,a.height=s):(a.width=n,a.height=l?l*s:r&&e.availableHeight)}return i}function qu(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function Xu(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Ku(t,e,i,n){const{pos:s,box:o}=i,r=t.maxPadding;if(!ba(s)){i.size&&(t[s]-=i.size);const e=n[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?o.height:o.width),i.size=e.size/e.count,t[s]+=i.size}o.getPadding&&Xu(r,o.getPadding());const a=Math.max(0,e.outerWidth-qu(r,t,"left","right")),h=Math.max(0,e.outerHeight-qu(r,t,"top","bottom")),l=a!==t.w,c=h!==t.h;return t.w=a,t.h=h,i.horizontal?{same:l,other:c}:{same:c,other:l}}function Gu(t,e){const i=e.maxPadding;function n(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{n[t]=Math.max(e[t],i[t])})),n}return n(t?["left","right"]:["top","bottom"])}function Ju(t,e,i,n){const s=[];let o,r,a,h,l,c;for(o=0,r=t.length,l=0;o<r;++o){a=t[o],h=a.box,h.update(a.width||e.w,a.height||e.h,Gu(a.horizontal,e));const{same:r,other:u}=Ku(e,i,a,n);l|=r&&s.length,c=c||u,h.fullSize||s.push(a)}return l&&Ju(s,e,i,n)||c}function Qu(t,e,i,n,s){t.top=i,t.left=e,t.right=e+n,t.bottom=i+s,t.width=n,t.height=s}function Zu(t,e,i,n){const s=i.padding;let{x:o,y:r}=e;for(const a of t){const t=a.box,h=n[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/h.weight||1;if(a.horizontal){const n=e.w*l,o=h.size||t.height;La(h.start)&&(r=h.start),t.fullSize?Qu(t,s.left,r,i.outerWidth-s.right-s.left,o):Qu(t,e.left+h.placed,r,n,o),h.start=r,h.placed+=n,r=t.bottom}else{const n=e.h*l,r=h.size||t.width;La(h.start)&&(o=h.start),t.fullSize?Qu(t,o,s.top,r,i.outerHeight-s.bottom-s.top):Qu(t,o,e.top+h.placed,r,n),h.start=o,h.placed+=n,o=t.right}}e.x=o,e.y=r}ml.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var td={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const s=Fl(t.options.layout.padding),o=Math.max(e-s.width,0),r=Math.max(i-s.height,0),a=function(t){const e=function(t){const e=[];let i,n,s,o,r,a;for(i=0,n=(t||[]).length;i<n;++i)s=t[i],({position:o,options:{stack:r,stackWeight:a=1}}=s),e.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return e}(t),i=$u(e.filter((t=>t.box.fullSize)),!0),n=$u(Uu(e,"left"),!0),s=$u(Uu(e,"right")),o=$u(Uu(e,"top"),!0),r=$u(Uu(e,"bottom")),a=Wu(e,"x"),h=Wu(e,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(h).concat(r).concat(a),chartArea:Uu(e,"chartArea"),vertical:n.concat(s).concat(h),horizontal:o.concat(r).concat(a)}}(t.boxes),h=a.vertical,l=a.horizontal;ka(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=h.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/c,hBoxMaxHeight:r/2}),d=Object.assign({},s);Xu(d,Fl(n));const f=Object.assign({maxPadding:d,w:o,h:r,x:s.left,y:s.top},s),p=Yu(h.concat(l),u);Ju(a.fullSize,f,u,p),Ju(h,f,u,p),Ju(l,f,u,p)&&Ju(h,f,u,p),function(t){const e=t.maxPadding;function i(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(f),Zu(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Zu(a.rightAndBottom,f,u,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ka(a.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class ed{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class id extends ed{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const nd="$chartjs",sd={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},od=t=>null===t||""===t;const rd=!!vc&&{passive:!0};function ad(t,e,i){t.canvas.removeEventListener(e,i,rd)}function hd(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function ld(t,e,i){const n=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||hd(i.addedNodes,n),e=e&&!hd(i.removedNodes,n);e&&i()}));return s.observe(document,{childList:!0,subtree:!0}),s}function cd(t,e,i){const n=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||hd(i.removedNodes,n),e=e&&!hd(i.addedNodes,n);e&&i()}));return s.observe(document,{childList:!0,subtree:!0}),s}const ud=new Map;let dd=0;function fd(){const t=window.devicePixelRatio;t!==dd&&(dd=t,ud.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function pd(t,e,i){const n=t.canvas,s=n&&cc(n);if(!s)return;const o=yh(((t,e)=>{const n=s.clientWidth;i(t,e),n<s.clientWidth&&i()}),window),r=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height;0===i&&0===n||o(i,n)}));return r.observe(s),function(t,e){ud.size||window.addEventListener("resize",fd),ud.set(t,e)}(t,o),r}function gd(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){ud.delete(t),ud.size||window.removeEventListener("resize",fd)}(t)}function md(t,e,i){const n=t.canvas,s=yh((e=>{null!==t.ctx&&i(function(t,e){const i=sd[t.type]||t.type,{x:n,y:s}=gc(t,e);return{type:i,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==s?s:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,i){t.addEventListener(e,i,rd)}(n,e,s),s}class bd extends ed{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[nd]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",od(s)){const e=xc(t,"width");void 0!==e&&(t.width=e)}if(od(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=xc(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[nd])return!1;const i=e[nd].initial;["height","width"].forEach((t=>{const n=i[t];ga(n)?e.removeAttribute(t):e.setAttribute(t,n)}));const n=i.style||{};return Object.keys(n).forEach((t=>{e.style[t]=n[t]})),e.width=e.width,delete e[nd],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),s={attach:ld,detach:cd,resize:pd}[e]||md;n[e]=s(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:gd,detach:gd,resize:gd}[e]||ad)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return bc(t,e,i,n)}isAttached(t){const e=cc(t);return!(!e||!e.isConnected)}}class yd{constructor(){this._init=[]}notify(t,e,i,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(s,t,e,i);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,n){n=n||{};for(const s of t){const t=s.plugin;if(!1===wa(t[i],[e,n,s.options],t)&&n.cancelable)return!1}return!0}invalidate(){ga(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=xa(i.options&&i.options.plugins,{}),s=function(t){const e={},i=[],n=Object.keys(Iu.plugins.items);for(let t=0;t<n.length;t++)i.push(Iu.getPlugin(n[t]));const s=t.plugins||[];for(let t=0;t<s.length;t++){const n=s[t];-1===i.indexOf(n)&&(i.push(n),e[n.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==n||e?function(t,{plugins:e,localIds:i},n,s){const o=[],r=t.getContext();for(const a of e){const e=a.id,h=vd(n[e],s);null!==h&&o.push({plugin:a,options:xd(t.config,{plugin:a,local:i[e]},h,r)})}return o}(t,s,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function vd(t,e){return e||!1!==t?!0===t?{}:t:null}function xd(t,{plugin:e,local:i},n,s){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(n,o);return i&&e.defaults&&r.push(e.defaults),t.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _d(t,e){const i=ml.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function wd(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(i=e.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.charAt(0).toLowerCase();var i}function kd(t){const e=t.options||(t.options={});e.plugins=xa(e.plugins,{}),e.scales=function(t,e){const i=dl[t.type]||{scales:{}},n=e.scales||{},s=_d(t.type,e),o=Object.create(null),r=Object.create(null);return Object.keys(n).forEach((t=>{const e=n[t];if(!ba(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=wd(t,e),h=function(t,e){return t===e?"_index_":"_value_"}(a,s),l=i.scales||{};o[a]=o[a]||t,r[t]=Ia(Object.create(null),[{axis:a},e,l[a],l[h]])})),t.data.datasets.forEach((i=>{const s=i.type||t.type,a=i.indexAxis||_d(s,e),h=(dl[s]||{}).scales||{};Object.keys(h).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,a),s=i[e+"AxisID"]||o[e]||e;r[s]=r[s]||Object.create(null),Ia(r[s],[{axis:e},n[s],h[t]])}))})),Object.keys(r).forEach((t=>{const e=r[t];Ia(e,[ml.scales[e.type],ml.scale])})),r}(t,e)}function Sd(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Md=new Map,Ed=new Set;function Td(t,e){let i=Md.get(t);return i||(i=e(),Md.set(t,i),Ed.add(i)),i}const Cd=(t,e,i)=>{const n=Pa(e,i);void 0!==n&&t.add(n)};class Id{constructor(t){this._config=function(t){return(t=t||{}).data=Sd(t.data),kd(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Sd(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Td(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Td(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Td(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Td(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:s}=this,o=this._cachedScopes(t,i),r=o.get(e);if(r)return r;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>Cd(a,t,e)))),e.forEach((t=>Cd(a,n,t))),e.forEach((t=>Cd(a,dl[s]||{},t))),e.forEach((t=>Cd(a,ml,t))),e.forEach((t=>Cd(a,fl,t)))}));const h=Array.from(a);return 0===h.length&&h.push(Object.create(null)),Ed.has(e)&&o.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,dl[e]||{},ml.datasets[e]||{},{type:e},ml,fl]}resolveNamedOptions(t,e,i,n=[""]){const s={$shared:!0},{resolver:o,subPrefixes:r}=Dd(this._resolverCache,t,n);let a=o;if(function(t,e){const{isScriptable:i,isIndexable:n}=Wl(t);for(const s of e){const e=i(s),o=n(s),r=(o||e)&&t[s];if(e&&(Ra(r)||Ad(r))||o&&ma(r))return!0}return!1}(o,e)){s.$shared=!1;a=Ul(o,i=Ra(i)?i():i,this.createResolver(t,i,r))}for(const t of e)s[t]=a[t];return s}createResolver(t,e,i=[""],n){const{resolver:s}=Dd(this._resolverCache,t,i);return ba(e)?Ul(s,e,void 0,n):s}}function Dd(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=i.join();let o=n.get(s);if(!o){o={resolver:Hl(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},n.set(s,o)}return o}const Ad=t=>ba(t)&&Object.getOwnPropertyNames(t).reduce(((e,i)=>e||Ra(t[i])),!1);const Pd=["top","bottom","left","right","chartArea"];function Od(t,e){return"top"===t||"bottom"===t||-1===Pd.indexOf(t)&&"x"===e}function Ld(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function Rd(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),wa(i&&i.onComplete,[t],e)}function Nd(t){const e=t.chart,i=e.options.animation;wa(i&&i.onProgress,[t],e)}function Fd(t){return lc()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const jd={},zd=t=>{const e=Fd(t);return Object.values(jd).filter((t=>t.canvas===e)).pop()};function Bd(t,e,i){const n=Object.keys(t);for(const s of n){const n=+s;if(n>=e){const o=t[s];delete t[s],(i>0||n>e)&&(t[n+i]=o)}}}class Vd{constructor(t,e){const i=this.config=new Id(e),n=Fd(t),s=zd(n);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!lc()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?id:bd}(n)),this.platform.updateConfig(i);const r=this.platform.acquireContext(n,o.aspectRatio),a=r&&r.canvas,h=a&&a.height,l=a&&a.width;this.id=pa(),this.ctx=r,this.canvas=a,this.width=l,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new yd,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vh((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],jd[this.id]=this,r&&a?(Fc.listen(this,"complete",Rd),Fc.listen(this,"progress",Nd),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:s}=this;return ga(t)?e&&s?s:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xl(this.canvas,this.ctx),this}stop(){return Fc.stop(this),this}resize(t,e){Fc.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,e,s),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,yc(this,r,!0)&&(this.notifyPlugins("resize",{size:o}),wa(i.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){ka(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let s=[];e&&(s=s.concat(Object.keys(e).map((t=>{const i=e[t],n=wd(t,i),s="r"===n,o="x"===n;return{options:i,dposition:s?"chartArea":o?"bottom":"left",dtype:s?"radialLinear":o?"category":"linear"}})))),ka(s,(e=>{const s=e.options,o=s.id,r=wd(o,s),a=xa(s.type,e.dtype);void 0!==s.position&&Od(s.position,r)===Od(e.dposition)||(s.position=e.dposition),n[o]=!0;let h=null;if(o in i&&i[o].type===a)h=i[o];else{h=new(Iu.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(s,t)})),ka(n,((t,e)=>{t||delete i[e]})),ka(i,(t=>{td.configure(this,t,t.options),td.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Ld("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const n=e[i];let s=this.getDatasetMeta(i);const o=n.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(i),s=this.getDatasetMeta(i)),s.type=o,s.indexAxis=n.indexAxis||_d(o,this.options),s.order=n.order||0,s.index=i,s.label=""+n.label,s.visible=this.isDatasetVisible(i),s.controller)s.controller.updateIndex(i),s.controller.linkScales();else{const e=Iu.getController(o),{datasetElementType:n,dataElementType:r}=ml.datasets[o];Object.assign(e.prototype,{dataElementType:Iu.getElement(r),datasetElementType:n&&Iu.getElement(n)}),s.controller=new e(this,i),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){ka(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!n&&-1===s.indexOf(e);e.buildOrUpdateElements(i),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),n||ka(s,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ld("z","_idx"));const{_active:r,_lastEvent:a}=this;a?this._eventHandler(a,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){ka(this.scales,(t=>{td.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);Na(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:s}of e){Bd(t,n,"_removeElements"===i?-s:s)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),n=i(0);for(let t=1;t<e;t++)if(!Na(n,i(t)))return;return Array.from(n).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;td.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ka(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Ra(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Fc.has(this)?this.attached&&!Fc.running(this)&&Fc.start(this):(this.draw(),Rd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,s;for(n=0,s=e.length;n<s;++n){const s=e[n];t&&!s.visible||i.push(s)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,n=!i.disabled,s=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(n&&Sl(e,{left:!1===i.left?0:s.left-i.left,right:!1===i.right?this.width:s.right+i.right,top:!1===i.top?0:s.top-i.top,bottom:!1===i.bottom?this.height:s.bottom+i.bottom}),t.controller.draw(),n&&Ml(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return kl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,n){const s=Vu.modes[e];return"function"==typeof s?s(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter((t=>t&&t._dataset===e)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=Vl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,n);La(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update((e=>e.datasetIndex===t?n:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Fc.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xl(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete jd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};ka(this.options.events,(t=>i(t,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(i,n)=>{t[i]&&(e.removeEventListener(this,i,n),delete t[i])},s=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const r=()=>{n("attach",r),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,n("resize",s),this._stop(),this._resize(0,0),i("attach",r)},e.isAttached(this.canvas)?r():o()}unbindEvents(){ka(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},ka(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let s,o,r,a;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+n+"DatasetHoverStyle"]()),r=0,a=t.length;r<a;++r){o=t[r];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!Sa(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const n=this.options.hover,s=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=s(e,t),r=i?t:s(t,e);o.length&&this.updateHoverStyle(o,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,n))return;const s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:n=[],options:s}=this,o=e,r=this._getActiveElements(t,n,i,o),a=Fa(t),h=function(t,e,i,n){return i&&"mouseout"!==t.type?n?e:t:null}(t,this._lastEvent,i,a);i&&(this._lastEvent=null,wa(s.onHover,[t,r,this],this),a&&wa(s.onClick,[t,r,this],this));const l=!Sa(r,n);return(l||e)&&(this._active=r,this._updateHoverStyles(r,n,e)),this._lastEvent=h,l}_getActiveElements(t,e,i,n){if("mouseout"===t.type)return[];if(!i)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,n)}}const Hd=()=>ka(Vd.instances,(t=>t._plugins.invalidate())),Ud=!0;function Wd(t,e,i){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:h}=e;let l=s/a;t.beginPath(),t.arc(o,r,a,n-l,i+l),h>s?(l=s/h,t.arc(o,r,h,i+l,n-l,!0)):t.arc(o,r,s,i+Ua,n-Ua),t.closePath(),t.clip()}function $d(t,e,i,n){const s=Ll(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(i-e)/2,r=Math.min(o,n*e/2),a=t=>{const e=(i-Math.min(o,t))*n/2;return hh(t,0,Math.min(o,e))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:hh(s.innerStart,0,r),innerEnd:hh(s.innerEnd,0,r)}}function Yd(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function qd(t,e,i,n,s,o){const{x:r,y:a,startAngle:h,pixelMargin:l,innerRadius:c}=e,u=Math.max(e.outerRadius+n+i-l,0),d=c>0?c+n+i+l:0;let f=0;const p=s-h;if(n){const t=((c>0?c-n:0)+(u>0?u-n:0))/2;f=(p-(0!==t?p*t/(t+n):p))/2}const g=(p-Math.max(.001,p*u-i/ja)/u)/2,m=h+g+f,b=s-g-f,{outerStart:y,outerEnd:v,innerStart:x,innerEnd:_}=$d(e,d,u,b-m),w=u-y,k=u-v,S=m+y/w,M=b-v/k,E=d+x,T=d+_,C=m+x/E,I=b-_/T;if(t.beginPath(),o){if(t.arc(r,a,u,S,M),v>0){const e=Yd(k,M,r,a);t.arc(e.x,e.y,v,M,b+Ua)}const e=Yd(T,b,r,a);if(t.lineTo(e.x,e.y),_>0){const e=Yd(T,I,r,a);t.arc(e.x,e.y,_,b+Ua,I+Math.PI)}if(t.arc(r,a,d,b-_/d,m+x/d,!0),x>0){const e=Yd(E,C,r,a);t.arc(e.x,e.y,x,C+Math.PI,m-Ua)}const i=Yd(w,m,r,a);if(t.lineTo(i.x,i.y),y>0){const e=Yd(w,S,r,a);t.arc(e.x,e.y,y,m-Ua,S)}}else{t.moveTo(r,a);const e=Math.cos(S)*u+r,i=Math.sin(S)*u+a;t.lineTo(e,i);const n=Math.cos(M)*u+r,s=Math.sin(M)*u+a;t.lineTo(n,s)}t.closePath()}function Xd(t,e,i,n,s,o){const{options:r}=e,{borderWidth:a,borderJoinStyle:h}=r,l="inner"===r.borderAlign;a&&(l?(t.lineWidth=2*a,t.lineJoin=h||"round"):(t.lineWidth=a,t.lineJoin=h||"bevel"),e.fullCircles&&function(t,e,i){const{x:n,y:s,startAngle:o,pixelMargin:r,fullCircles:a}=e,h=Math.max(e.outerRadius-r,0),l=e.innerRadius+r;let c;for(i&&Wd(t,e,o+za),t.beginPath(),t.arc(n,s,l,o+za,o,!0),c=0;c<a;++c)t.stroke();for(t.beginPath(),t.arc(n,s,h,o,o+za),c=0;c<a;++c)t.stroke()}(t,e,l),l&&Wd(t,e,s),qd(t,e,i,n,s,o),t.stroke())}Object.defineProperties(Vd,{defaults:{enumerable:Ud,value:ml},instances:{enumerable:Ud,value:jd},overrides:{enumerable:Ud,value:dl},registry:{enumerable:Ud,value:Iu},version:{enumerable:Ud,value:"3.9.1"},getChart:{enumerable:Ud,value:zd},register:{enumerable:Ud,value:(...t)=>{Iu.add(...t),Hd()}},unregister:{enumerable:Ud,value:(...t)=>{Iu.remove(...t),Hd()}}});class Kd extends mu{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.getProps(["x","y"],i),{angle:s,distance:o}=nh(n,{x:t,y:e}),{startAngle:r,endAngle:a,innerRadius:h,outerRadius:l,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=this.options.spacing/2,d=xa(c,a-r)>=za||ah(s,r,a),f=lh(o,h+u,l+u);return d&&f}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:s,innerRadius:o,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:a,spacing:h}=this.options,l=(n+s)/2,c=(o+r+h+a)/2;return{x:e+Math.cos(l)*c,y:i+Math.sin(l)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,n=(e.offset||0)/2,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>za?Math.floor(i/za):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let r=0;if(n){r=n/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*r,Math.sin(e)*r),this.circumference>=ja&&(r=n)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const a=function(t,e,i,n,s){const{fullCircles:o,startAngle:r,circumference:a}=e;let h=e.endAngle;if(o){qd(t,e,i,n,r+za,s);for(let e=0;e<o;++e)t.fill();isNaN(a)||(h=r+a%za,a%za==0&&(h+=za))}return qd(t,e,i,n,h,s),t.fill(),h}(t,this,r,s,o);Xd(t,this,r,s,a,o),t.restore()}}function Gd(t,e,i=e){t.lineCap=xa(i.borderCapStyle,e.borderCapStyle),t.setLineDash(xa(i.borderDash,e.borderDash)),t.lineDashOffset=xa(i.borderDashOffset,e.borderDashOffset),t.lineJoin=xa(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=xa(i.borderWidth,e.borderWidth),t.strokeStyle=xa(i.borderColor,e.borderColor)}function Jd(t,e,i){t.lineTo(i.x,i.y)}function Qd(t,e,i={}){const n=t.length,{start:s=0,end:o=n-1}=i,{start:r,end:a}=e,h=Math.max(s,r),l=Math.min(o,a),c=s<r&&o<r||s>a&&o>a;return{count:n,start:h,loop:e.loop,ilen:l<h&&!c?n+l-h:l-h}}function Zd(t,e,i,n){const{points:s,options:o}=e,{count:r,start:a,loop:h,ilen:l}=Qd(s,i,n),c=function(t){return t.stepped?El:t.tension||"monotone"===t.cubicInterpolationMode?Tl:Jd}(o);let u,d,f,{move:p=!0,reverse:g}=n||{};for(u=0;u<=l;++u)d=s[(a+(g?l-u:u))%r],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):c(t,f,d,g,o.stepped),f=d);return h&&(d=s[(a+(g?l:0))%r],c(t,f,d,g,o.stepped)),!!h}function tf(t,e,i,n){const s=e.points,{count:o,start:r,ilen:a}=Qd(s,i,n),{move:h=!0,reverse:l}=n||{};let c,u,d,f,p,g,m=0,b=0;const y=t=>(r+(l?a-t:t))%o,v=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(h&&(u=s[y(0)],t.moveTo(u.x,u.y)),c=0;c<=a;++c){if(u=s[y(c)],u.skip)continue;const e=u.x,i=u.y,n=0|e;n===d?(i<f?f=i:i>p&&(p=i),m=(b*m+e)/++b):(v(),t.lineTo(e,i),d=n,b=0,f=p=i),g=i}v()}function ef(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?tf:Zd}Kd.id="arc",Kd.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},Kd.defaultRoutes={backgroundColor:"backgroundColor"};const nf="function"==typeof Path2D;function sf(t,e,i,n){nf&&!e.options.segment?function(t,e,i,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,i,n)&&s.closePath()),Gd(t,e.options),t.stroke(s)}(t,e,i,n):function(t,e,i,n){const{segments:s,options:o}=e,r=ef(e);for(const a of s)Gd(t,o,a.style),t.beginPath(),r(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}(t,e,i,n)}class of extends mu{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;hc(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Oc(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],s=this.points,o=Pc(this,{property:e,start:n,end:n});if(!o.length)return;const r=[],a=function(t){return t.stepped?wc:t.tension||"monotone"===t.cubicInterpolationMode?kc:_c}(i);let h,l;for(h=0,l=o.length;h<l;++h){const{start:l,end:c}=o[h],u=s[l],d=s[c];if(u===d){r.push(u);continue}const f=a(u,d,Math.abs((n-u[e])/(d[e]-u[e])),i.stepped);f[e]=t[e],r.push(f)}return 1===r.length?r[0]:r}pathSegment(t,e,i){return ef(this)(t,this,e,i)}path(t,e,i){const n=this.segments,s=ef(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const r of n)o&=s(t,this,r,{start:e,end:e+i-1});return!!o}draw(t,e,i,n){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),sf(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function rf(t,e,i,n){const s=t.options,{[i]:o}=t.getProps([i],n);return Math.abs(e-o)<s.radius+s.hitRadius}of.id="line",of.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},of.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},of.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class af extends mu{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(e-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return rf(this,t,"x",e)}inYRange(t,e){return rf(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!kl(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,_l(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function hf(t,e){const{x:i,y:n,base:s,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let a,h,l,c,u;return t.horizontal?(u=r/2,a=Math.min(i,s),h=Math.max(i,s),l=n-u,c=n+u):(u=o/2,a=i-u,h=i+u,l=Math.min(n,s),c=Math.max(n,s)),{left:a,top:l,right:h,bottom:c}}function lf(t,e,i,n){return t?0:hh(e,i,n)}function cf(t){const e=hf(t),i=e.right-e.left,n=e.bottom-e.top,s=function(t,e,i){const n=t.options.borderWidth,s=t.borderSkipped,o=Rl(n);return{t:lf(s.top,o.top,0,i),r:lf(s.right,o.right,0,e),b:lf(s.bottom,o.bottom,0,i),l:lf(s.left,o.left,0,e)}}(t,i/2,n/2),o=function(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=Nl(s),r=Math.min(e,i),a=t.borderSkipped,h=n||ba(s);return{topLeft:lf(!h||a.top||a.left,o.topLeft,0,r),topRight:lf(!h||a.top||a.right,o.topRight,0,r),bottomLeft:lf(!h||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:lf(!h||a.bottom||a.right,o.bottomRight,0,r)}}(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function uf(t,e,i,n){const s=null===e,o=null===i,r=t&&!(s&&o)&&hf(t,n);return r&&(s||lh(e,r.left,r.right))&&(o||lh(i,r.top,r.bottom))}function df(t,e){t.rect(e.x,e.y,e.w,e.h)}function ff(t,e,i={}){const n=t.x!==i.x?-e:0,s=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-n,r=(t.y+t.h!==i.y+i.h?e:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+o,h:t.h+r,radius:t.radius}}af.id="point",af.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},af.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class pf extends mu{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:s,outer:o}=cf(this),r=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Dl:df;var a;t.save(),o.w===s.w&&o.h===s.h||(t.beginPath(),r(t,ff(o,e,s)),t.clip(),r(t,ff(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),r(t,ff(s,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return uf(this,t,e,i)}inXRange(t,e){return uf(this,t,null,e)}inYRange(t,e){return uf(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+n)/2:e,y:s?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}pf.id="bar",pf.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},pf.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var gf=Object.freeze({__proto__:null,ArcElement:Kd,LineElement:of,PointElement:af,BarElement:pf});function mf(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function bf(t){t.data.datasets.forEach((t=>{mf(t)}))}var yf={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void bf(t);const n=t.width;t.data.datasets.forEach(((e,s)=>{const{_data:o,indexAxis:r}=e,a=t.getDatasetMeta(s),h=o||e.data;if("y"===zl([r,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const l=t.scales[a.xAxisID];if("linear"!==l.type&&"time"!==l.type)return;if(t.options.parsing)return;let{start:c,count:u}=function(t,e){const i=e.length;let n,s=0;const{iScale:o}=t,{min:r,max:a,minDefined:h,maxDefined:l}=o.getUserBounds();return h&&(s=hh(uh(e,o.axis,r).lo,0,i-1)),n=l?hh(uh(e,o.axis,a).hi+1,s,i)-s:i-s,{start:s,count:n}}(a,h);if(u<=(i.threshold||4*n))return void mf(e);let d;switch(ga(o)&&(e._data=h,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":d=function(t,e,i,n,s){const o=s.samples||n;if(o>=i)return t.slice(e,e+i);const r=[],a=(i-2)/(o-2);let h=0;const l=e+i-1;let c,u,d,f,p,g=e;for(r[h++]=t[g],c=0;c<o-2;c++){let n,s=0,o=0;const l=Math.floor((c+1)*a)+1+e,m=Math.min(Math.floor((c+2)*a)+1,i)+e,b=m-l;for(n=l;n<m;n++)s+=t[n].x,o+=t[n].y;s/=b,o/=b;const y=Math.floor(c*a)+1+e,v=Math.min(Math.floor((c+1)*a)+1,i)+e,{x:x,y:_}=t[g];for(d=f=-1,n=y;n<v;n++)f=.5*Math.abs((x-s)*(t[n].y-_)-(x-t[n].x)*(o-_)),f>d&&(d=f,u=t[n],p=n);r[h++]=u,g=p}return r[h++]=t[l],r}(h,c,u,n,i);break;case"min-max":d=function(t,e,i,n){let s,o,r,a,h,l,c,u,d,f,p=0,g=0;const m=[],b=e+i-1,y=t[e].x,v=t[b].x-y;for(s=e;s<e+i;++s){o=t[s],r=(o.x-y)/v*n,a=o.y;const e=0|r;if(e===h)a<d?(d=a,l=s):a>f&&(f=a,c=s),p=(g*p+o.x)/++g;else{const i=s-1;if(!ga(l)&&!ga(c)){const e=Math.min(l,c),n=Math.max(l,c);e!==u&&e!==i&&m.push({...t[e],x:p}),n!==u&&n!==i&&m.push({...t[n],x:p})}s>0&&i!==u&&m.push(t[i]),m.push(o),h=e,g=0,d=f=a,l=c=u=s}}return m}(h,c,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=d}))},destroy(t){bf(t)}};function vf(t,e,i,n){if(n)return;let s=e[t],o=i[t];return"angle"===t&&(s=rh(s),o=rh(o)),{property:t,start:s,end:o}}function xf(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function _f(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function wf(t,e){let i=[],n=!1;return ma(t)?(n=!0,i=t):i=function(t,e){const{x:i=null,y:n=null}=t||{},s=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=xf(t,e,s);const r=s[t],a=s[e];null!==n?(o.push({x:r.x,y:n}),o.push({x:a.x,y:n})):null!==i&&(o.push({x:i,y:r.y}),o.push({x:i,y:a.y}))})),o}(t,e),i.length?new of({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function kf(t){return t&&!1!==t.fill}function Sf(t,e,i){let n=t[e].fill;const s=[e];let o;if(!i)return n;for(;!1!==n&&-1===s.indexOf(n);){if(!ya(n))return n;if(o=t[n],!o)return!1;if(o.visible)return n;s.push(n),n=o.fill}return!1}function Mf(t,e,i){const n=function(t){const e=t.options,i=e.fill;let n=xa(i&&i.target,i);void 0===n&&(n=!!e.backgroundColor);return!1!==n&&null!==n&&(!0===n?"origin":n)}(t);if(ba(n))return!isNaN(n.value)&&n;let s=parseFloat(n);return ya(s)&&Math.floor(s)===s?function(t,e,i,n){"-"!==t&&"+"!==t||(i=e+i);return!(i===e||i<0||i>=n)&&i}(n[0],e,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Ef(t,e,i){const n=[];for(let s=0;s<i.length;s++){const o=i[s],{first:r,last:a,point:h}=Tf(o,e,"x");if(!(!h||r&&a))if(r)n.unshift(h);else if(t.push(h),!a)break}t.push(...n)}function Tf(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const s=n[i],o=t.segments,r=t.points;let a=!1,h=!1;for(let t=0;t<o.length;t++){const e=o[t],n=r[e.start][i],l=r[e.end][i];if(lh(s,n,l)){a=s===n,h=s===l;break}}return{first:a,last:h,point:n}}class Cf{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:s,radius:o}=this;return e=e||{start:0,end:za},t.arc(n,s,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,s=t.angle;return{x:e+Math.cos(s)*n,y:i+Math.sin(s)*n,angle:s}}}function If(t){const{chart:e,fill:i,line:n}=t;if(ya(i))return function(t,e){const i=t.getDatasetMeta(e),n=i&&t.isDatasetVisible(e);return n?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:n}=t,s=[],o=n.segments,r=n.points,a=function(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let t=0;t<n.length;t++){const s=n[t];if(s.index===e)break;s.hidden||i.unshift(s.dataset)}return i}(e,i);a.push(wf({x:null,y:e.bottom},n));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Ef(s,r[t],a)}return new of({points:s,options:{}})}(t);if("shape"===i)return!0;const s=function(t){const e=t.scale||{};return e.getPointPositionForValue?function(t){const{scale:e,fill:i}=t,n=e.options,s=e.getLabels().length,o=n.reverse?e.max:e.min,r=function(t,e,i){let n;return n="start"===t?i:"end"===t?e.options.reverse?e.min:e.max:ba(t)?t.value:e.getBaseValue(),n}(i,e,o),a=[];if(n.grid.circular){const t=e.getPointPositionForValue(0,o);return new Cf({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(r)})}for(let t=0;t<s;++t)a.push(e.getPointPositionForValue(t,r));return a}(t):function(t){const{scale:e={},fill:i}=t,n=function(t,e){let i=null;return"start"===t?i=e.bottom:"end"===t?i=e.top:ba(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e);if(ya(n)){const t=e.isHorizontal();return{x:t?n:null,y:t?null:n}}return null}(t)}(t);return s instanceof Cf?s:wf(s,n)}function Df(t,e,i){const n=If(e),{line:s,scale:o,axis:r}=e,a=s.options,h=a.fill,l=a.backgroundColor,{above:c=l,below:u=l}=h||{};n&&s.points.length&&(Sl(t,i),function(t,e){const{line:i,target:n,above:s,below:o,area:r,scale:a}=e,h=i._loop?"angle":e.axis;t.save(),"x"===h&&o!==s&&(Af(t,n,r.top),Pf(t,{line:i,target:n,color:s,scale:a,property:h}),t.restore(),t.save(),Af(t,n,r.bottom));Pf(t,{line:i,target:n,color:o,scale:a,property:h}),t.restore()}(t,{line:s,target:n,above:c,below:u,area:i,scale:o,axis:r}),Ml(t))}function Af(t,e,i){const{segments:n,points:s}=e;let o=!0,r=!1;t.beginPath();for(const a of n){const{start:n,end:h}=a,l=s[n],c=s[xf(n,h,s)];o?(t.moveTo(l.x,l.y),o=!1):(t.lineTo(l.x,i),t.lineTo(l.x,l.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(c.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function Pf(t,e){const{line:i,target:n,property:s,color:o,scale:r}=e,a=function(t,e,i){const n=t.segments,s=t.points,o=e.points,r=[];for(const t of n){let{start:n,end:a}=t;a=xf(n,a,s);const h=vf(i,s[n],s[a],t.loop);if(!e.segments){r.push({source:t,target:h,start:s[n],end:s[a]});continue}const l=Pc(e,h);for(const e of l){const n=vf(i,o[e.start],o[e.end],e.loop),a=Ac(t,s,n);for(const t of a)r.push({source:t,target:e,start:{[i]:_f(h,n,"start",Math.max)},end:{[i]:_f(h,n,"end",Math.min)}})}}return r}(i,n,s);for(const{source:e,target:h,start:l,end:c}of a){const{style:{backgroundColor:a=o}={}}=e,u=!0!==n;t.save(),t.fillStyle=a,Of(t,r,u&&vf(s,l,c)),t.beginPath();const d=!!i.pathSegment(t,e);let f;if(u){d?t.closePath():Lf(t,n,c,s);const e=!!n.pathSegment(t,h,{move:d,reverse:!0});f=d&&e,f||Lf(t,n,l,s)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function Of(t,e,i){const{top:n,bottom:s}=e.chart.chartArea,{property:o,start:r,end:a}=i||{};"x"===o&&(t.beginPath(),t.rect(r,n,a-r,s-n),t.clip())}function Lf(t,e,i,n){const s=e.interpolate(i,n);s&&t.lineTo(s.x,s.y)}var Rf={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,s=[];let o,r,a,h;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,h=null,a&&a.options&&a instanceof of&&(h={visible:t.isDatasetVisible(r),index:r,fill:Mf(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=h,s.push(h);for(r=0;r<n;++r)h=s[r],h&&!1!==h.fill&&(h.fill=Sf(s,r,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,s=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=s.length-1;e>=0;--e){const i=s[e].$filler;i&&(i.line.updateControlPoints(o,i.axis),n&&i.fill&&Df(t.ctx,i,o))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;kf(i)&&Df(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;kf(n)&&"beforeDatasetDraw"===i.drawTime&&Df(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Nf=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}};class Ff extends mu{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=wa(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,n=jl(i.font),s=n.size,o=this._computeTitleHeight(),{boxWidth:r,itemHeight:a}=Nf(i,s);let h,l;e.font=n.string,this.isHorizontal()?(h=this.maxWidth,l=this._fitRows(o,s,r,a)+10):(l=this.maxHeight,h=this._fitCols(o,s,r,a)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:s,maxWidth:o,options:{labels:{padding:r}}}=this,a=this.legendHitBoxes=[],h=this.lineWidths=[0],l=n+r;let c=t;s.textAlign="left",s.textBaseline="middle";let u=-1,d=-l;return this.legendItems.forEach(((t,f)=>{const p=i+e/2+s.measureText(t.text).width;(0===f||h[h.length-1]+p+2*r>o)&&(c+=l,h[h.length-(f>0?0:1)]=0,d+=l,u++),a[f]={left:0,top:d,row:u,width:p,height:n},h[h.length-1]+=p+r})),c}_fitCols(t,e,i,n){const{ctx:s,maxHeight:o,options:{labels:{padding:r}}}=this,a=this.legendHitBoxes=[],h=this.columnSizes=[],l=o-t;let c=r,u=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,o)=>{const g=i+e/2+s.measureText(t.text).width;o>0&&d+n+2*r>l&&(c+=u+r,h.push({width:u,height:d}),f+=u+r,p++,u=d=0),a[o]={left:f,top:d,col:p,width:g,height:n},u=Math.max(u,g),d+=n+r})),c+=u,h.push({width:u,height:d}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:s}}=this,o=Ec(s,this.left,this.width);if(this.isHorizontal()){let s=0,r=_h(i,this.left+n,this.right-this.lineWidths[s]);for(const a of e)s!==a.row&&(s=a.row,r=_h(i,this.left+n,this.right-this.lineWidths[s])),a.top+=this.top+t+n,a.left=o.leftForLtr(o.x(r),a.width),r+=a.width+n}else{let s=0,r=_h(i,this.top+t+n,this.bottom-this.columnSizes[s].height);for(const a of e)a.col!==s&&(s=a.col,r=_h(i,this.top+t+n,this.bottom-this.columnSizes[s].height)),a.top=r,a.left+=this.left+n,a.left=o.leftForLtr(o.x(a.left),a.width),r+=a.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Sl(t,this),this._draw(),Ml(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:s,labels:o}=t,r=ml.color,a=Ec(t.rtl,this.left,this.width),h=jl(o.font),{color:l,padding:c}=o,u=h.size,d=u/2;let f;this.drawTitle(),n.textAlign=a.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=Nf(o,u),b=this.isHorizontal(),y=this._computeTitleHeight();f=b?{x:_h(s,this.left+c,this.right-i[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:_h(s,this.top+y+c,this.bottom-e[0].height),line:0},Tc(this.ctx,t.textDirection);const v=m+c;this.legendItems.forEach(((x,_)=>{n.strokeStyle=x.fontColor||l,n.fillStyle=x.fontColor||l;const w=n.measureText(x.text).width,k=a.textAlign(x.textAlign||(x.textAlign=o.textAlign)),S=p+d+w;let M=f.x,E=f.y;a.setWidth(this.width),b?_>0&&M+S+c>this.right&&(E=f.y+=v,f.line++,M=f.x=_h(s,this.left+c,this.right-i[f.line])):_>0&&E+v>this.bottom&&(M=f.x=M+e[f.line].width+c,f.line++,E=f.y=_h(s,this.top+y+c,this.bottom-e[f.line].height));!function(t,e,i){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const s=xa(i.lineWidth,1);if(n.fillStyle=xa(i.fillStyle,r),n.lineCap=xa(i.lineCap,"butt"),n.lineDashOffset=xa(i.lineDashOffset,0),n.lineJoin=xa(i.lineJoin,"miter"),n.lineWidth=s,n.strokeStyle=xa(i.strokeStyle,r),n.setLineDash(xa(i.lineDash,[])),o.usePointStyle){const r={radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:s},h=a.xPlus(t,p/2);wl(n,r,h,e+d,o.pointStyleWidth&&p)}else{const o=e+Math.max((u-g)/2,0),r=a.leftForLtr(t,p),h=Nl(i.borderRadius);n.beginPath(),Object.values(h).some((t=>0!==t))?Dl(n,{x:r,y:o,w:p,h:g,radius:h}):n.rect(r,o,p,g),n.fill(),0!==s&&n.stroke()}n.restore()}(a.x(M),E,x),M=wh(k,M+p+d,b?M+S:this.right,t.rtl),function(t,e,i){Cl(n,i.text,t,e+m/2,h,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(M),E,x),b?f.x+=S+c:f.y+=v})),Cc(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=jl(e.font),n=Fl(e.padding);if(!e.display)return;const s=Ec(t.rtl,this.left,this.width),o=this.ctx,r=e.position,a=i.size/2,h=n.top+a;let l,c=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),l=this.top+h,c=_h(t.align,c,this.right-u);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);l=h+_h(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=_h(r,c,c+u);o.textAlign=s.textAlign(xh(r)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Cl(o,e.text,d,l,i)}_computeTitleHeight(){const t=this.options.title,e=jl(t.font),i=Fl(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,s;if(lh(t,this.left,this.right)&&lh(e,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(n=s[i],lh(t,n.left,n.left+n.width)&&lh(e,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const n=this._hoveredItem,s=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(n,i);n&&!s&&wa(e.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!s&&wa(e.onHover,[t,i,this],this)}else i&&wa(e.onClick,[t,i,this],this)}}var jf={id:"legend",_element:Ff,start(t,e,i){const n=t.legend=new Ff({ctx:t.ctx,options:i,chart:t});td.configure(t,n,i),td.addBox(t,n)},stop(t){td.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;td.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const r=t.controller.getStyle(i?0:void 0),a=Fl(r.borderWidth);return{text:e[t.index].label,fillStyle:r.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:r.borderCapStyle,lineDash:r.borderDash,lineDashOffset:r.borderDashOffset,lineJoin:r.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:r.borderColor,pointStyle:n||r.pointStyle,rotation:r.rotation,textAlign:s||r.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class zf extends mu{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const n=ma(i.text)?i.text.length:1;this._padding=Fl(i.padding);const s=n*jl(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:n,right:s,options:o}=this,r=o.align;let a,h,l,c=0;return this.isHorizontal()?(h=_h(r,i,s),l=e+t,a=s-i):("left"===o.position?(h=i+t,l=_h(r,n,e),c=-.5*ja):(h=s-t,l=_h(r,e,n),c=.5*ja),a=n-e),{titleX:h,titleY:l,maxWidth:a,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=jl(e.font),n=i.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:r,rotation:a}=this._drawArgs(n);Cl(t,e.text,0,0,i,{color:e.color,maxWidth:r,rotation:a,textAlign:xh(e.align),textBaseline:"middle",translation:[s,o]})}}var Bf={id:"title",_element:zf,start(t,e,i){!function(t,e){const i=new zf({ctx:t.ctx,options:e,chart:t});td.configure(t,i,e),td.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;td.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;td.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vf=new WeakMap;var Hf={id:"subtitle",start(t,e,i){const n=new zf({ctx:t.ctx,options:i,chart:t});td.configure(t,n,i),td.addBox(t,n),Vf.set(t,n)},stop(t){td.removeBox(t,Vf.get(t)),Vf.delete(t)},beforeUpdate(t,e,i){const n=Vf.get(t);td.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Uf={average(t){if(!t.length)return!1;let e,i,n=0,s=0,o=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();n+=t.x,s+=t.y,++o}}return{x:n/o,y:s/o}},nearest(t,e){if(!t.length)return!1;let i,n,s,o=e.x,r=e.y,a=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){const n=t[i].element;if(n&&n.hasValue()){const t=sh(e,n.getCenterPoint());t<a&&(a=t,s=n)}}if(s){const t=s.tooltipPosition();o=t.x,r=t.y}return{x:o,y:r}}};function Wf(t,e){return e&&(ma(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function $f(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Yf(t,e){const{element:i,datasetIndex:n,index:s}=e,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:t,label:r,parsed:o.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function qf(t,e){const i=t.chart.ctx,{body:n,footer:s,title:o}=t,{boxWidth:r,boxHeight:a}=e,h=jl(e.bodyFont),l=jl(e.titleFont),c=jl(e.footerFont),u=o.length,d=s.length,f=n.length,p=Fl(e.padding);let g=p.height,m=0,b=n.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(b+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*l.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b){g+=f*(e.displayColors?Math.max(a,h.lineHeight):h.lineHeight)+(b-f)*h.lineHeight+(b-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let y=0;const v=function(t){m=Math.max(m,i.measureText(t).width+y)};return i.save(),i.font=l.string,ka(t.title,v),i.font=h.string,ka(t.beforeBody.concat(t.afterBody),v),y=e.displayColors?r+2+e.boxPadding:0,ka(n,(t=>{ka(t.before,v),ka(t.lines,v),ka(t.after,v)})),y=0,i.font=c.string,ka(t.footer,v),i.restore(),m+=p.width,{width:m,height:g}}function Xf(t,e,i,n){const{x:s,width:o}=i,{width:r,chartArea:{left:a,right:h}}=t;let l="center";return"center"===n?l=s<=(a+h)/2?"left":"right":s<=o/2?l="left":s>=r-o/2&&(l="right"),function(t,e,i,n){const{x:s,width:o}=n,r=i.caretSize+i.caretPadding;return"left"===t&&s+o+r>e.width||"right"===t&&s-o-r<0||void 0}(l,t,e,i)&&(l="center"),l}function Kf(t,e,i){const n=i.yAlign||e.yAlign||function(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||Xf(t,e,i,n),yAlign:n}}function Gf(t,e,i,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:h}=i,l=s+o,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Nl(r);let p=function(t,e){let{x:i,width:n}=t;return"right"===e?i-=n:"center"===e&&(i-=n/2),i}(e,a);const g=function(t,e,i){let{y:n,height:s}=t;return"top"===e?n+=i:n-="bottom"===e?s+i:s/2,n}(e,h,l);return"center"===h?"left"===a?p+=l:"right"===a&&(p-=l):"left"===a?p-=Math.max(c,d)+s:"right"===a&&(p+=Math.max(u,f)+s),{x:hh(p,0,n.width-e.width),y:hh(g,0,n.height-e.height)}}function Jf(t,e,i){const n=Fl(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function Qf(t){return Wf([],$f(t))}function Zf(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}class tp extends mu{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,s=new Hc(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,i=this._tooltipItems,Vl(t,{tooltip:e,tooltipItems:i,type:"tooltip"})));var t,e,i}getTitle(t,e){const{callbacks:i}=e,n=i.beforeTitle.apply(this,[t]),s=i.title.apply(this,[t]),o=i.afterTitle.apply(this,[t]);let r=[];return r=Wf(r,$f(n)),r=Wf(r,$f(s)),r=Wf(r,$f(o)),r}getBeforeBody(t,e){return Qf(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:i}=e,n=[];return ka(t,(t=>{const e={before:[],lines:[],after:[]},s=Zf(i,t);Wf(e.before,$f(s.beforeLabel.call(this,t))),Wf(e.lines,s.label.call(this,t)),Wf(e.after,$f(s.afterLabel.call(this,t))),n.push(e)})),n}getAfterBody(t,e){return Qf(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:i}=e,n=i.beforeFooter.apply(this,[t]),s=i.footer.apply(this,[t]),o=i.afterFooter.apply(this,[t]);let r=[];return r=Wf(r,$f(n)),r=Wf(r,$f(s)),r=Wf(r,$f(o)),r}_createItems(t){const e=this._active,i=this.chart.data,n=[],s=[],o=[];let r,a,h=[];for(r=0,a=e.length;r<a;++r)h.push(Yf(this.chart,e[r]));return t.filter&&(h=h.filter(((e,n,s)=>t.filter(e,n,s,i)))),t.itemSort&&(h=h.sort(((e,n)=>t.itemSort(e,n,i)))),ka(h,(e=>{const i=Zf(t.callbacks,e);n.push(i.labelColor.call(this,e)),s.push(i.labelPointStyle.call(this,e)),o.push(i.labelTextColor.call(this,e))})),this.labelColors=n,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let s,o=[];if(n.length){const t=Uf[i.position].call(this,n,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const e=this._size=qf(this,i),r=Object.assign({},t,e),a=Kf(this.chart,i,r),h=Gf(i,r,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,s={opacity:1,x:h.x,y:h.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const s=this.getCaretPosition(t,i,n);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:s}=this,{caretSize:o,cornerRadius:r}=i,{topLeft:a,topRight:h,bottomLeft:l,bottomRight:c}=Nl(r),{x:u,y:d}=t,{width:f,height:p}=e;let g,m,b,y,v,x;return"center"===s?(v=d+p/2,"left"===n?(g=u,m=g-o,y=v+o,x=v-o):(g=u+f,m=g+o,y=v-o,x=v+o),b=g):(m="left"===n?u+Math.max(a,l)+o:"right"===n?u+f-Math.max(h,c)-o:this.caretX,"top"===s?(y=d,v=y-o,g=m-o,b=m+o):(y=d+p,v=y+o,g=m+o,b=m-o),x=y),{x1:g,x2:m,x3:b,y1:y,y2:v,y3:x}}drawTitle(t,e,i){const n=this.title,s=n.length;let o,r,a;if(s){const h=Ec(i.rtl,this.x,this.width);for(t.x=Jf(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",o=jl(i.titleFont),r=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,a=0;a<s;++a)e.fillText(n[a],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r,a+1===s&&(t.y+=i.titleMarginBottom-r)}}_drawColorBox(t,e,i,n,s){const o=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:a,boxWidth:h,boxPadding:l}=s,c=jl(s.bodyFont),u=Jf(this,"left",s),d=n.x(u),f=a<c.lineHeight?(c.lineHeight-a)/2:0,p=e.y+f;if(s.usePointStyle){const e={radius:Math.min(h,a)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},i=n.leftForLtr(d,h)+h/2,l=p+a/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,_l(t,e,i,l),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,_l(t,e,i,l)}else{t.lineWidth=ba(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=n.leftForLtr(d,h-l),i=n.leftForLtr(n.xPlus(d,1),h-l-2),r=Nl(o.borderRadius);Object.values(r).some((t=>0!==t))?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Dl(t,{x:e,y:p,w:h,h:a,radius:r}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Dl(t,{x:i,y:p+1,w:h-2,h:a-2,radius:r}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(e,p,h,a),t.strokeRect(e,p,h,a),t.fillStyle=o.backgroundColor,t.fillRect(i,p+1,h-2,a-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:s,bodyAlign:o,displayColors:r,boxHeight:a,boxWidth:h,boxPadding:l}=i,c=jl(i.bodyFont);let u=c.lineHeight,d=0;const f=Ec(i.rtl,this.x,this.width),p=function(i){e.fillText(i,f.x(t.x+d),t.y+u/2),t.y+=u+s},g=f.textAlign(o);let m,b,y,v,x,_,w;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=Jf(this,g,i),e.fillStyle=i.bodyColor,ka(this.beforeBody,p),d=r&&"right"!==g?"center"===o?h/2+l:h+2+l:0,v=0,_=n.length;v<_;++v){for(m=n[v],b=this.labelTextColors[v],e.fillStyle=b,ka(m.before,p),y=m.lines,r&&y.length&&(this._drawColorBox(e,t,v,f,i),u=Math.max(c.lineHeight,a)),x=0,w=y.length;x<w;++x)p(y[x]),u=c.lineHeight;ka(m.after,p)}d=0,u=c.lineHeight,ka(this.afterBody,p),t.y-=s}drawFooter(t,e,i){const n=this.footer,s=n.length;let o,r;if(s){const a=Ec(i.rtl,this.x,this.width);for(t.x=Jf(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=a.textAlign(i.footerAlign),e.textBaseline="middle",o=jl(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,r=0;r<s;++r)e.fillText(n[r],a.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:s,yAlign:o}=this,{x:r,y:a}=t,{width:h,height:l}=i,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Nl(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(r+c,a),"top"===o&&this.drawCaret(t,e,i,n),e.lineTo(r+h-u,a),e.quadraticCurveTo(r+h,a,r+h,a+u),"center"===o&&"right"===s&&this.drawCaret(t,e,i,n),e.lineTo(r+h,a+l-f),e.quadraticCurveTo(r+h,a+l,r+h-f,a+l),"bottom"===o&&this.drawCaret(t,e,i,n),e.lineTo(r+d,a+l),e.quadraticCurveTo(r,a+l,r,a+l-d),"center"===o&&"left"===s&&this.drawCaret(t,e,i,n),e.lineTo(r,a+c),e.quadraticCurveTo(r,a,r+c,a),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,s=i&&i.y;if(n||s){const i=Uf[t.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=qf(this,t),r=Object.assign({},i,this._size),a=Kf(e,t,r),h=Gf(t,r,a,e);n._to===h.x&&s._to===h.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Fl(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,n,e),Tc(t,e.textDirection),s.y+=o.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),Cc(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),s=!Sa(i,n),o=this._positionChanged(n,e);(s||o)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,s=this._active||[],o=this._getActiveElements(t,s,e,i),r=this._positionChanged(o,t),a=e||!Sa(o,s)||r;return a&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,i,n){const s=this.options;if("mouseout"===t.type)return[];if(!n)return e;const o=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:n,options:s}=this,o=Uf[s.position].call(this,t,e);return!1!==o&&(i!==o.x||n!==o.y)}}tp.positioners=Uf;var ep={id:"tooltip",_element:tp,positioners:Uf,afterInit(t,e,i){i&&(t.tooltip=new tp({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",i))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:fa,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:fa,beforeBody:fa,beforeLabel:fa,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return ga(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:fa,afterBody:fa,beforeFooter:fa,footer:fa,afterFooter:fa}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ip=Object.freeze({__proto__:null,Decimation:yf,Filler:Rf,Legend:jf,SubTitle:Hf,Title:Bf,Tooltip:ep});function np(t,e,i,n){const s=t.indexOf(e);if(-1===s)return((t,e,i,n)=>("string"==typeof e?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,n);return s!==t.lastIndexOf(e)?i:s}class sp extends Tu{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:n}of e)t[i]===n&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ga(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:hh(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:np(i,t,xa(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)n.push({value:i});return n}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function op(t,e){const i=[],{bounds:n,step:s,min:o,max:r,precision:a,count:h,maxTicks:l,maxDigits:c,includeBounds:u}=t,d=s||1,f=l-1,{min:p,max:g}=e,m=!ga(o),b=!ga(r),y=!ga(h),v=(g-p)/(c+1);let x,_,w,k,S=Xa((g-p)/f/d)*d;if(S<1e-14&&!m&&!b)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=Xa(k*S/f/d)*d),ga(a)||(x=Math.pow(10,a),S=Math.ceil(S*x)/x),"ticks"===n?(_=Math.floor(p/S)*S,w=Math.ceil(g/S)*S):(_=p,w=g),m&&b&&s&&Qa((r-o)/s,S/1e3)?(k=Math.round(Math.min((r-o)/S,l)),S=(r-o)/k,_=o,w=r):y?(_=m?o:_,w=b?r:w,k=h-1,S=(w-_)/k):(k=(w-_)/S,k=Ja(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const M=Math.max(ih(S),ih(_));x=Math.pow(10,ga(a)?M:a),_=Math.round(_*x)/x,w=Math.round(w*x)/x;let E=0;for(m&&(u&&_!==o?(i.push({value:o}),_<o&&E++,Ja(Math.round((_+E*S)*x)/x,o,rp(o,v,t))&&E++):_<o&&E++);E<k;++E)i.push({value:Math.round((_+E*S)*x)/x});return b&&u&&w!==r?i.length&&Ja(i[i.length-1].value,r,rp(r,v,t))?i[i.length-1].value=r:i.push({value:r}):b&&w!==r||i.push({value:w}),i}function rp(t,e,{horizontal:i,minRotation:n}){const s=th(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}sp.id="category",sp.defaults={ticks:{callback:sp.prototype.getLabelForValue}};class ap extends Tu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ga(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this;const o=t=>n=e?n:t,r=t=>s=i?s:t;if(t){const t=qa(n),e=qa(s);t<0&&e<0?r(0):t>0&&e>0&&o(0)}if(n===s){let e=1;(s>=Number.MAX_SAFE_INTEGER||n<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*s)),r(s+e),t||o(n-e)}this.min=n,this.max=s}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n=op({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Za(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Mc(t,this.chart.options.locale,this.options.ticks.format)}}class hp extends ap{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ya(t)?t:0,this.max=ya(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=th(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/n))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function lp(t){return 1===t/Math.pow(10,Math.floor(Ya(t)))}hp.id="linear",hp.defaults={ticks:{callback:yu.formatters.numeric}};class cp extends Tu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=ap.prototype.parse.apply(this,[t,e]);if(0!==i)return ya(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ya(t)?Math.max(0,t):null,this.max=ya(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const s=e=>i=t?i:e,o=t=>n=e?n:t,r=(t,e)=>Math.pow(10,Math.floor(Ya(t))+e);i===n&&(i<=0?(s(1),o(10)):(s(r(i,-1)),o(r(n,1)))),i<=0&&s(r(n,-1)),n<=0&&o(r(i,1)),this._zero&&this.min!==this._suggestedMin&&i===r(this.min,0)&&s(r(i,-1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e=function(t,e){const i=Math.floor(Ya(e.max)),n=Math.ceil(e.max/Math.pow(10,i)),s=[];let o=va(t.min,Math.pow(10,Math.floor(Ya(e.min)))),r=Math.floor(Ya(o)),a=Math.floor(o/Math.pow(10,r)),h=r<0?Math.pow(10,Math.abs(r)):1;do{s.push({value:o,major:lp(o)}),++a,10===a&&(a=1,++r,h=r>=0?1:h),o=Math.round(a*Math.pow(10,r)*h)/h}while(r<i||r===i&&a<n);const l=va(t.max,o);return s.push({value:l,major:lp(o)}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Za(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Mc(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ya(t),this._valueRange=Ya(this.max)-Ya(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ya(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function up(t){const e=t.ticks;if(e.display&&t.display){const t=Fl(e.backdropPadding);return xa(e.font&&e.font.size,ml.font.size)+t.height}return 0}function dp(t,e,i,n,s){return t===n||t===s?{start:e-i/2,end:e+i/2}:t<n||t>s?{start:e-i,end:e}:{start:e,end:e+i}}function fp(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),n=[],s=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?ja/o:0;for(let u=0;u<o;u++){const o=r.setContext(t.getPointLabelContext(u));s[u]=o.padding;const d=t.getPointPosition(u,t.drawingArea+s[u],a),f=jl(o.font),p=(h=t.ctx,l=f,c=ma(c=t._pointLabels[u])?c:[c],{w:yl(h,l.string,c),h:c.length*l.lineHeight});n[u]=p;const g=rh(t.getIndexAngle(u)+a),m=Math.round(eh(g));pp(i,e,g,dp(m,d.x,p.w,0,180),dp(m,d.y,p.h,90,270))}var h,l,c;t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const n=[],s=t._pointLabels.length,o=t.options,r=up(o)/2,a=t.drawingArea,h=o.pointLabels.centerPointLabels?ja/s:0;for(let o=0;o<s;o++){const s=t.getPointPosition(o,a+r+i[o],h),l=Math.round(eh(rh(s.angle+Ua))),c=e[o],u=bp(s.y,c.h,l),d=gp(l),f=mp(s.x,c.w,d);n.push({x:s.x,y:u,textAlign:d,left:f,top:u,right:f+c.w,bottom:u+c.h})}return n}(t,n,s)}function pp(t,e,i,n,s){const o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let a=0,h=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(h=(e.t-s.start)/r,t.t=Math.min(t.t,e.t-h)):s.end>e.b&&(h=(s.end-e.b)/r,t.b=Math.max(t.b,e.b+h))}function gp(t){return 0===t||180===t?"center":t<180?"left":"right"}function mp(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function bp(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}function yp(t,e,i,n){const{ctx:s}=t;if(i)s.arc(t.xCenter,t.yCenter,e,0,za);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),s.lineTo(i.x,i.y)}}cp.id="logarithmic",cp.defaults={ticks:{callback:yu.formatters.logarithmic,major:{enabled:!0}}};class vp extends ap{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Fl(up(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=ya(t)&&!isNaN(t)?t:0,this.max=ya(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/up(this.options))}generateTickLabels(t){ap.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=wa(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?fp(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){return rh(t*(za/(this._pointLabels.length||1))+th(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(ga(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ga(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return Vl(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const n=this.getIndexAngle(t)-Ua+i;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),yp(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:n}=e,s=this._pointLabels.length;let o,r,a;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const e=n.setContext(t.getPointLabelContext(s)),o=jl(e.font),{x:r,y:a,textAlign:h,left:l,top:c,right:u,bottom:d}=t._pointLabelItems[s],{backdropColor:f}=e;if(!ga(f)){const t=Nl(e.borderRadius),n=Fl(e.backdropPadding);i.fillStyle=f;const s=l-n.left,o=c-n.top,r=u-l+n.width,a=d-c+n.height;Object.values(t).some((t=>0!==t))?(i.beginPath(),Dl(i,{x:s,y:o,w:r,h:a,radius:t}),i.fill()):i.fillRect(s,o,r,a)}Cl(i,t._pointLabels[s],r,a+o.lineHeight/2,o,{color:e.color,textAlign:h,textBaseline:"middle"})}}(this,s),n.display&&this.ticks.forEach(((t,e)=>{if(0!==e){r=this.getDistanceFromCenterForValue(t.value);!function(t,e,i,n){const s=t.ctx,o=e.circular,{color:r,lineWidth:a}=e;!o&&!n||!r||!a||i<0||(s.save(),s.strokeStyle=r,s.lineWidth=a,s.setLineDash(e.borderDash),s.lineDashOffset=e.borderDashOffset,s.beginPath(),yp(t,i,o,n),s.closePath(),s.stroke(),s.restore())}(this,n.setContext(this.getContext(e-1)),r,s)}})),i.display){for(t.save(),o=s-1;o>=0;o--){const n=i.setContext(this.getPointLabelContext(o)),{color:s,lineWidth:h}=n;h&&s&&(t.lineWidth=h,t.strokeStyle=s,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,r=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),a=this.getPointPosition(o,r),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(a.x,a.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((n,r)=>{if(0===r&&!e.reverse)return;const a=i.setContext(this.getContext(r)),h=jl(a.font);if(s=this.getDistanceFromCenterForValue(this.ticks[r].value),a.showLabelBackdrop){t.font=h.string,o=t.measureText(n.label).width,t.fillStyle=a.backdropColor;const e=Fl(a.backdropPadding);t.fillRect(-o/2-e.left,-s-h.size/2-e.top,o+e.width,h.size+e.height)}Cl(t,n.label,0,-s,h,{color:a.color})})),t.restore()}drawTitle(){}}vp.id="radialLinear",vp.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:yu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},vp.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},vp.descriptors={angleLines:{_fallback:"grid"}};const xp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_p=Object.keys(xp);function wp(t,e){return t-e}function kp(t,e){if(ga(e))return null;const i=t._adapter,{parser:n,round:s,isoWeekday:o}=t._parseOpts;let r=e;return"function"==typeof n&&(r=n(r)),ya(r)||(r="string"==typeof n?i.parse(r,n):i.parse(r)),null===r?null:(s&&(r="week"!==s||!Ga(o)&&!0!==o?i.startOf(r,s):i.startOf(r,"isoWeek",o)),+r)}function Sp(t,e,i,n){const s=_p.length;for(let o=_p.indexOf(t);o<s-1;++o){const t=xp[_p[o]],s=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(s*t.size))<=n)return _p[o]}return _p[s-1]}function Mp(t,e,i){if(i){if(i.length){const{lo:n,hi:s}=ch(i,e);t[i[n]>=e?i[n]:i[s]]=!0}}else t[e]=!0}function Ep(t,e,i){const n=[],s={},o=e.length;let r,a;for(r=0;r<o;++r)a=e[r],s[a]=r,n.push({value:a,major:!1});return 0!==o&&i?function(t,e,i,n){const s=t._adapter,o=+s.startOf(e[0].value,n),r=e[e.length-1].value;let a,h;for(a=o;a<=r;a=+s.add(a,1,n))h=i[a],h>=0&&(e[h].major=!0);return e}(t,n,s,i):n}class Tp extends Tu{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),n=this._adapter=new Lu._date(t.adapters.date);n.init(e),Ia(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:kp(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:n,max:s,minDefined:o,maxDefined:r}=this.getUserBounds();function a(t){o||isNaN(t.min)||(n=Math.min(n,t.min)),r||isNaN(t.max)||(s=Math.max(s,t.max))}o&&r||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),n=ya(n)&&!isNaN(n)?n:+e.startOf(Date.now(),i),s=ya(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(n,s-1),this.max=Math.max(n+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,n="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const s=this.min,o=fh(n,s,this.max);return this._unit=e.unit||(i.autoSkip?Sp(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(t,e,i,n,s){for(let o=_p.length-1;o>=_p.indexOf(i);o--){const i=_p[o];if(xp[i].common&&t._adapter.diff(s,n,i)>=e-1)return i}return _p[i?_p.indexOf(i):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=_p.indexOf(t)+1,i=_p.length;e<i;++e)if(xp[_p[e]].common)return _p[e]}(this._unit):void 0,this.initOffsets(n),t.reverse&&o.reverse(),Ep(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t){let e,i,n=0,s=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),n=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),s=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=hh(n,0,o),s=hh(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,e=this.min,i=this.max,n=this.options,s=n.time,o=s.unit||Sp(s.minUnit,e,i,this._getLabelCapacity(e)),r=xa(s.stepSize,1),a="week"===o&&s.isoWeekday,h=Ga(a)||!0===a,l={};let c,u,d=e;if(h&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,h?"day":o),t.diff(i,e,o)>1e5*r)throw new Error(e+" and "+i+" are too far apart with stepSize of "+r+" "+o);const f="data"===n.ticks.source&&this.getDataTimestamps();for(c=d,u=0;c<i;c=+t.add(c,r,o),u++)Mp(l,c,f);return c!==i&&"ticks"!==n.bounds&&1!==u||Mp(l,c,f),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,n){const s=this.options,o=s.time.displayFormats,r=this._unit,a=this._majorUnit,h=r&&o[r],l=a&&o[a],c=i[e],u=a&&l&&c&&c.major,d=this._adapter.format(t,n||(u?l:h)),f=s.ticks.callback;return f?wa(f,[d,e,i],this):d}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,n=th(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(n),o=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:i*s+r*o,h:i*o+r*s}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,Ep(this,[t],this._majorUnit),n),o=this._getLabelSize(s),r=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return r>0?r:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,e=n.length;t<e;++t)i=i.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const n=this.getLabels();for(e=0,i=n.length;e<i;++e)t.push(kp(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return mh(t.sort(wp))}}function Cp(t,e,i){let n,s,o,r,a=0,h=t.length-1;i?(e>=t[a].pos&&e<=t[h].pos&&({lo:a,hi:h}=uh(t,"pos",e)),({pos:n,time:o}=t[a]),({pos:s,time:r}=t[h])):(e>=t[a].time&&e<=t[h].time&&({lo:a,hi:h}=uh(t,"time",e)),({time:n,pos:o}=t[a]),({time:s,pos:r}=t[h]));const l=s-n;return l?o+(r-o)*(e-n)/l:o}Tp.id="time",Tp.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Ip extends Tp{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Cp(e,this.min),this._tableRange=Cp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],s=[];let o,r,a,h,l;for(o=0,r=t.length;o<r;++o)h=t[o],h>=e&&h<=i&&n.push(h);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,r=n.length;o<r;++o)l=n[o+1],a=n[o-1],h=n[o],Math.round((l+a)/2)!==h&&s.push({time:h,pos:o/(r-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Cp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Cp(this._table,i*this._tableRange+this._minPos,!0)}}Ip.id="timeseries",Ip.defaults=Tp.defaults;Vd.register(...[Au,gf,ip,Object.freeze({__proto__:null,CategoryScale:sp,LinearScale:hp,LogarithmicScale:cp,RadialLinearScale:vp,TimeScale:Tp,TimeSeriesScale:Ip})]);var Dp=Vd;const Ap=new class{constructor(t){this.baseURL=t}get(t){return fetch(this.baseURL+t).then((t=>t.json()))}put(t,e){return this._send("put",t,e)}post(t,e){return this._send("post",t,e)}patch(t,e){return this._send("patch",t,e)}delete(t,e){return this._send("delete",t,e)}_send(t,e,i){return fetch(this.baseURL+e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((t=>t.json()))}}("https://nutrition-logger-4a682-default-rtdb.firebaseio.com/"),Pp=new class{constructor(){this.food=[]}removeFood(t){this.food.length>t&&t>=0&&this.food.splice(t,1)}addFood(t,e,i){this.food.push({carbs:Number.parseInt(t,10),protein:Number.parseInt(e,10),fat:Number.parseInt(i,10)})}getTotalCarbs(){return this.food.reduce(((t,e)=>t+e.carbs),0)}getTotalProtein(){return this.food.reduce(((t,e)=>t+e.protein),0)}getTotalFat(){return this.food.reduce(((t,e)=>t+e.fat),0)}getTotalCalories(){return 4*this.getTotalCarbs()+4*this.getTotalProtein()+9*this.getTotalFat()}},Op=Ot({apiKey:"AIzaSyDaNdqJ6U40eJO_nosHlw7Lj0_MzbXGvAg",authDomain:"nutrition-logger-4a682.firebaseapp.com",projectId:"nutrition-logger-4a682",storageBucket:"nutrition-logger-4a682.appspot.com",messagingSenderId:"434895144907",appId:"1:434895144907:web:481cff3fc742342ebb584e",measurementId:"G-F2ZJESK4VN"});(function(t,e){const i="string"==typeof t?t:e||"(default)",n=Dt("object"==typeof t?t:Lt(),"firestore").getImmediate({identifier:i});if(!n._initialized){const t=R("firestore");t&&$o(n,...t)}})(Op),function(t=Lt()){const e=Dt(t=W(t),jr);e.isInitialized()?e.getImmediate():function(t,e={}){const i=Dt(t,jr);if(i.isInitialized()){const t=i.getImmediate();if(V(e,i.getOptions()))return t;throw Ur.create("already-initialized")}const n=i.initialize({options:e})}(t)}(Op);t(n).duration=1500,t(n).gap=250;const Lp=document.querySelector("#food-list"),Rp=document.querySelector("#create-form"),Np=document.querySelector("#create-name"),Fp=document.querySelector("#create-carbs"),jp=document.querySelector("#create-protein"),zp=document.querySelector("#create-fat"),Bp=(e,i)=>{Ap.post("/history.json",{position:e}).then((s=>{console.log(s),s.error?(console.error(s.error),t(n).show("Unable to remove item.")):(i.parentNode.parentNode.remove(),t(n).show("Removed Item"),Pp.removeFood(e),Wp())}))},Vp=(t,e,n,s)=>{const o=0!=e?e:0,r=0!=n?n:0,a=0!=s?s:0;var h;Pp.addFood(o,r,a),Lp.insertAdjacentHTML("beforeend",`<li class="card">\n        <div>\n          <h3 class="name">${h=t,h[0].toUpperCase()+h.substring(1).toLowerCase()}</h3>\n          <button type="button" class="delete-btn">Delete</button>\n          <div class="calories">${i(o,r,a)} calories</div>\n          <ul class="macros">\n            <li class="carbs"><div>Carbs</div><div class="value">${o}g</div></li>\n            <li class="protein"><div>Protein</div><div class="value">${r}g</div></li>\n            <li class="fat"><div>Fat</div><div class="value">${a}g</div></li>\n          </ul>\n        </div>\n      </li>`)};Rp.addEventListener("submit",(e=>{e.preventDefault(),Ap.post("/history.json",{fields:{name:{stringValue:Np.value},carbs:{integerValue:Fp.value},protein:{integerValue:jp.value},fat:{integerValue:zp.value}}}).then((e=>{console.log(e),e.error?t(n).show("Some data is missing."):(t(n).show("Food added successfully."),Vp(Np.value,Fp.value,jp.value,zp.value),Wp(),Np.value="",Fp.value="",jp.value="",zp.value="")}))}));let Hp=null;const Up=document.querySelector("#total-calories"),Wp=()=>{(()=>{Hp?.destroy();const t=document.querySelector("#app-chart").getContext("2d");Hp=new Dp(t,{type:"bar",data:{labels:["Carbs","Protein","Fat"],datasets:[{label:"Macronutrients",data:[Pp.getTotalCarbs(),Pp.getTotalProtein(),Pp.getTotalFat()],backgroundColor:["#25AEEE","#FECD52","#57D269"],borderWidth:3}]},options:{scales:{y:{ticks:{beginAtZero:!0}}}}})})(),Up.textContent=Pp.getTotalCalories(),document.querySelectorAll(".delete-btn").forEach(((t,e)=>{t.oldOnClick&&t.removeEventListener("click",t.oldOnClick);const i=()=>{Bp(e,t)};t.addEventListener("click",i),t.oldOnClick=i}))};Ap.get("/history.json?pageSize=100").then((t=>{t?.documents?.forEach((t=>{const e=t.fields;Vp(e.name.stringValue,e.carbs.integerValue,e.protein.integerValue,e.fat.integerValue)})),Wp()}));
//# sourceMappingURL=index.88cb7993.js.map
